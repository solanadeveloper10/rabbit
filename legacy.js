var La=Object.defineProperty;var Lo=gt=>{throw TypeError(gt)};var Da=(gt,yt,bt)=>yt in gt?La(gt,yt,{enumerable:!0,configurable:!0,writable:!0,value:bt}):gt[yt]=bt;var ui=(gt,yt,bt)=>Da(gt,typeof yt!="symbol"?yt+"":yt,bt),Dr=(gt,yt,bt)=>yt.has(gt)||Lo("Cannot "+bt);var ve=(gt,yt,bt)=>(Dr(gt,yt,"read from private field"),bt?bt.call(gt):yt.get(gt)),it=(gt,yt,bt)=>yt.has(gt)?Lo("Cannot add the same private member more than once"):yt instanceof WeakSet?yt.add(gt):yt.set(gt,bt),Me=(gt,yt,bt,vi)=>(Dr(gt,yt,"write to private field"),vi?vi.call(gt,bt):yt.set(gt,bt),bt),Xn=(gt,yt,bt)=>(Dr(gt,yt,"access private method"),bt);(function(){"use strict";var $i,bi,sn,an,Ui,zi,ln,_i,wi,fi,un,Mt,Vt,ni,Wi,Vi,Ii,ki,Do,Mo,Ro,Xi,Mn,Gi,Gt,Yt,cn,fn,hn,dn,pn,mn,Rn,Li,ft,hi,Di,Mi;class gt{constructor(e=!0){it(this,$i,!0);it(this,bi,!1);Me(this,$i,e),e&&Me(this,bi,!!document.querySelector("body[data-screen-lock]"))}lock(){Me(this,bi,!0),ve(this,$i)&&document.body.setAttribute("data-screen-lock","1")}unlock(){Me(this,bi,!1),ve(this,$i)&&document.body.removeAttribute("data-screen-lock")}isLocked(){return ve(this,$i)&&Me(this,bi,!!document.querySelector("body[data-screen-lock]")),ve(this,bi)}}$i=new WeakMap,bi=new WeakMap;const yt=t=>{if(typeof t=="string"){const e=t.toLowerCase();if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1}return!!t},bt=()=>{const t=navigator.userAgent||navigator.vendor||window.opera;return navigator.userAgentData?navigator.userAgentData.platform==="iOS":/iPad|iPhone|iPod/.test(t)&&!window.MSStream},vi=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),qo=(t,e)=>t.indexOf(e)===0,Bo=(t,e)=>t.substr(t.length-e.length)===e,Mr=t=>{let e=t;if(typeof e!="string")return e;for(;e.indexOf("/")===0&&e.length;)e=e.substring(1);return e};function Rr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xn={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var jo=xn.exports,qr;function Fo(){return qr||(qr=1,function(t){(function(e,o){t.exports=e.document?o(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return o(n)}})(typeof window<"u"?window:jo,function(e,o){var n=[],s=Object.getPrototypeOf,a=n.slice,h=n.flat?function(r){return n.flat.call(r)}:function(r){return n.concat.apply([],r)},u=n.push,p=n.indexOf,T={},v=T.toString,m=T.hasOwnProperty,f=m.toString,d=f.call(Object),b={},y=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},_=function(c){return c!=null&&c===c.window},A=e.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function O(r,c,x){x=x||A;var E,I,L=x.createElement("script");if(L.text=r,c)for(E in w)I=c[E]||c.getAttribute&&c.getAttribute(E),I&&L.setAttribute(E,I);x.head.appendChild(L).parentNode.removeChild(L)}function k(r){return r==null?r+"":typeof r=="object"||typeof r=="function"?T[v.call(r)]||"object":typeof r}var S="3.7.1",R=/HTML$/i,l=function(r,c){return new l.fn.init(r,c)};l.fn=l.prototype={jquery:S,constructor:l,length:0,toArray:function(){return a.call(this)},get:function(r){return r==null?a.call(this):r<0?this[r+this.length]:this[r]},pushStack:function(r){var c=l.merge(this.constructor(),r);return c.prevObject=this,c},each:function(r){return l.each(this,r)},map:function(r){return this.pushStack(l.map(this,function(c,x){return r.call(c,x,c)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(r,c){return(c+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(r,c){return c%2}))},eq:function(r){var c=this.length,x=+r+(r<0?c:0);return this.pushStack(x>=0&&x<c?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:n.sort,splice:n.splice},l.extend=l.fn.extend=function(){var r,c,x,E,I,L,j=arguments[0]||{},K=1,Q=arguments.length,ne=!1;for(typeof j=="boolean"&&(ne=j,j=arguments[K]||{},K++),typeof j!="object"&&!y(j)&&(j={}),K===Q&&(j=this,K--);K<Q;K++)if((r=arguments[K])!=null)for(c in r)E=r[c],!(c==="__proto__"||j===E)&&(ne&&E&&(l.isPlainObject(E)||(I=Array.isArray(E)))?(x=j[c],I&&!Array.isArray(x)?L=[]:!I&&!l.isPlainObject(x)?L={}:L=x,I=!1,j[c]=l.extend(ne,L,E)):E!==void 0&&(j[c]=E));return j},l.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(r){throw new Error(r)},noop:function(){},isPlainObject:function(r){var c,x;return!r||v.call(r)!=="[object Object]"?!1:(c=s(r),c?(x=m.call(c,"constructor")&&c.constructor,typeof x=="function"&&f.call(x)===d):!0)},isEmptyObject:function(r){var c;for(c in r)return!1;return!0},globalEval:function(r,c,x){O(r,{nonce:c&&c.nonce},x)},each:function(r,c){var x,E=0;if(C(r))for(x=r.length;E<x&&c.call(r[E],E,r[E])!==!1;E++);else for(E in r)if(c.call(r[E],E,r[E])===!1)break;return r},text:function(r){var c,x="",E=0,I=r.nodeType;if(!I)for(;c=r[E++];)x+=l.text(c);return I===1||I===11?r.textContent:I===9?r.documentElement.textContent:I===3||I===4?r.nodeValue:x},makeArray:function(r,c){var x=c||[];return r!=null&&(C(Object(r))?l.merge(x,typeof r=="string"?[r]:r):u.call(x,r)),x},inArray:function(r,c,x){return c==null?-1:p.call(c,r,x)},isXMLDoc:function(r){var c=r&&r.namespaceURI,x=r&&(r.ownerDocument||r).documentElement;return!R.test(c||x&&x.nodeName||"HTML")},merge:function(r,c){for(var x=+c.length,E=0,I=r.length;E<x;E++)r[I++]=c[E];return r.length=I,r},grep:function(r,c,x){for(var E,I=[],L=0,j=r.length,K=!x;L<j;L++)E=!c(r[L],L),E!==K&&I.push(r[L]);return I},map:function(r,c,x){var E,I,L=0,j=[];if(C(r))for(E=r.length;L<E;L++)I=c(r[L],L,x),I!=null&&j.push(I);else for(L in r)I=c(r[L],L,x),I!=null&&j.push(I);return h(j)},guid:1,support:b}),typeof Symbol=="function"&&(l.fn[Symbol.iterator]=n[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(r,c){T["[object "+c+"]"]=c.toLowerCase()});function C(r){var c=!!r&&"length"in r&&r.length,x=k(r);return y(r)||_(r)?!1:x==="array"||c===0||typeof c=="number"&&c>0&&c-1 in r}function M(r,c){return r.nodeName&&r.nodeName.toLowerCase()===c.toLowerCase()}var P=n.pop,N=n.sort,D=n.splice,B="[\\x20\\t\\r\\n\\f]",F=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g");l.contains=function(r,c){var x=c&&c.parentNode;return r===x||!!(x&&x.nodeType===1&&(r.contains?r.contains(x):r.compareDocumentPosition&&r.compareDocumentPosition(x)&16))};var G=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Y(r,c){return c?r==="\0"?"ï¿½":r.slice(0,-1)+"\\"+r.charCodeAt(r.length-1).toString(16)+" ":"\\"+r}l.escapeSelector=function(r){return(r+"").replace(G,Y)};var H=A,ee=u;(function(){var r,c,x,E,I,L=ee,j,K,Q,ne,ce,pe=l.expando,le=0,_e=0,je=Un(),st=Un(),Xe=Un(),Lt=Un(),Nt=function(Z,ie){return Z===ie&&(I=!0),0},ri="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oi="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ke="\\["+B+"*("+oi+")(?:"+B+"*([*^$|!~]?=)"+B+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+oi+"))|)"+B+"*\\]",ji=":("+oi+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ke+")*)|.*)\\)|)",at=new RegExp(B+"+","g"),kt=new RegExp("^"+B+"*,"+B+"*"),_n=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),Sr=new RegExp(B+"|>"),si=new RegExp(ji),wn=new RegExp("^"+oi+"$"),ai={ID:new RegExp("^#("+oi+")"),CLASS:new RegExp("^\\.("+oi+")"),TAG:new RegExp("^("+oi+"|[*])"),ATTR:new RegExp("^"+Ke),PSEUDO:new RegExp("^"+ji),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+ri+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Oi=/^(?:input|select|textarea|button)$/i,Si=/^h\d$/i,Zt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Cr=/[+~]/,mi=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),gi=function(Z,ie){var ae="0x"+Z.slice(1)-65536;return ie||(ae<0?String.fromCharCode(ae+65536):String.fromCharCode(ae>>10|55296,ae&1023|56320))},Oa=function(){Ci()},Sa=Wn(function(Z){return Z.disabled===!0&&M(Z,"fieldset")},{dir:"parentNode",next:"legend"});function Ca(){try{return j.activeElement}catch{}}try{L.apply(n=a.call(H.childNodes),H.childNodes),n[H.childNodes.length].nodeType}catch{L={apply:function(ie,ae){ee.apply(ie,a.call(ae))},call:function(ie){ee.apply(ie,a.call(arguments,1))}}}function dt(Z,ie,ae,ue){var de,xe,Se,Ne,Ce,Ge,qe,Fe=ie&&ie.ownerDocument,Ze=ie?ie.nodeType:9;if(ae=ae||[],typeof Z!="string"||!Z||Ze!==1&&Ze!==9&&Ze!==11)return ae;if(!ue&&(Ci(ie),ie=ie||j,Q)){if(Ze!==11&&(Ce=Zt.exec(Z)))if(de=Ce[1]){if(Ze===9)if(Se=ie.getElementById(de)){if(Se.id===de)return L.call(ae,Se),ae}else return ae;else if(Fe&&(Se=Fe.getElementById(de))&&dt.contains(ie,Se)&&Se.id===de)return L.call(ae,Se),ae}else{if(Ce[2])return L.apply(ae,ie.getElementsByTagName(Z)),ae;if((de=Ce[3])&&ie.getElementsByClassName)return L.apply(ae,ie.getElementsByClassName(de)),ae}if(!Lt[Z+" "]&&(!ne||!ne.test(Z))){if(qe=Z,Fe=ie,Ze===1&&(Sr.test(Z)||_n.test(Z))){for(Fe=Cr.test(Z)&&Nr(ie.parentNode)||ie,(Fe!=ie||!b.scope)&&((Ne=ie.getAttribute("id"))?Ne=l.escapeSelector(Ne):ie.setAttribute("id",Ne=pe)),Ge=kn(Z),xe=Ge.length;xe--;)Ge[xe]=(Ne?"#"+Ne:":scope")+" "+zn(Ge[xe]);qe=Ge.join(",")}try{return L.apply(ae,Fe.querySelectorAll(qe)),ae}catch{Lt(Z,!0)}finally{Ne===pe&&ie.removeAttribute("id")}}}return Io(Z.replace(F,"$1"),ie,ae,ue)}function Un(){var Z=[];function ie(ae,ue){return Z.push(ae+" ")>c.cacheLength&&delete ie[Z.shift()],ie[ae+" "]=ue}return ie}function ei(Z){return Z[pe]=!0,Z}function Ki(Z){var ie=j.createElement("fieldset");try{return!!Z(ie)}catch{return!1}finally{ie.parentNode&&ie.parentNode.removeChild(ie),ie=null}}function Na(Z){return function(ie){return M(ie,"input")&&ie.type===Z}}function $a(Z){return function(ie){return(M(ie,"input")||M(ie,"button"))&&ie.type===Z}}function $o(Z){return function(ie){return"form"in ie?ie.parentNode&&ie.disabled===!1?"label"in ie?"label"in ie.parentNode?ie.parentNode.disabled===Z:ie.disabled===Z:ie.isDisabled===Z||ie.isDisabled!==!Z&&Sa(ie)===Z:ie.disabled===Z:"label"in ie?ie.disabled===Z:!1}}function Fi(Z){return ei(function(ie){return ie=+ie,ei(function(ae,ue){for(var de,xe=Z([],ae.length,ie),Se=xe.length;Se--;)ae[de=xe[Se]]&&(ae[de]=!(ue[de]=ae[de]))})})}function Nr(Z){return Z&&typeof Z.getElementsByTagName<"u"&&Z}function Ci(Z){var ie,ae=Z?Z.ownerDocument||Z:H;return ae==j||ae.nodeType!==9||!ae.documentElement||(j=ae,K=j.documentElement,Q=!l.isXMLDoc(j),ce=K.matches||K.webkitMatchesSelector||K.msMatchesSelector,K.msMatchesSelector&&H!=j&&(ie=j.defaultView)&&ie.top!==ie&&ie.addEventListener("unload",Oa),b.getById=Ki(function(ue){return K.appendChild(ue).id=l.expando,!j.getElementsByName||!j.getElementsByName(l.expando).length}),b.disconnectedMatch=Ki(function(ue){return ce.call(ue,"*")}),b.scope=Ki(function(){return j.querySelectorAll(":scope")}),b.cssHas=Ki(function(){try{return j.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),b.getById?(c.filter.ID=function(ue){var de=ue.replace(mi,gi);return function(xe){return xe.getAttribute("id")===de}},c.find.ID=function(ue,de){if(typeof de.getElementById<"u"&&Q){var xe=de.getElementById(ue);return xe?[xe]:[]}}):(c.filter.ID=function(ue){var de=ue.replace(mi,gi);return function(xe){var Se=typeof xe.getAttributeNode<"u"&&xe.getAttributeNode("id");return Se&&Se.value===de}},c.find.ID=function(ue,de){if(typeof de.getElementById<"u"&&Q){var xe,Se,Ne,Ce=de.getElementById(ue);if(Ce){if(xe=Ce.getAttributeNode("id"),xe&&xe.value===ue)return[Ce];for(Ne=de.getElementsByName(ue),Se=0;Ce=Ne[Se++];)if(xe=Ce.getAttributeNode("id"),xe&&xe.value===ue)return[Ce]}return[]}}),c.find.TAG=function(ue,de){return typeof de.getElementsByTagName<"u"?de.getElementsByTagName(ue):de.querySelectorAll(ue)},c.find.CLASS=function(ue,de){if(typeof de.getElementsByClassName<"u"&&Q)return de.getElementsByClassName(ue)},ne=[],Ki(function(ue){var de;K.appendChild(ue).innerHTML="<a id='"+pe+"' href='' disabled='disabled'></a><select id='"+pe+"-\r\\' disabled='disabled'><option selected=''></option></select>",ue.querySelectorAll("[selected]").length||ne.push("\\["+B+"*(?:value|"+ri+")"),ue.querySelectorAll("[id~="+pe+"-]").length||ne.push("~="),ue.querySelectorAll("a#"+pe+"+*").length||ne.push(".#.+[+~]"),ue.querySelectorAll(":checked").length||ne.push(":checked"),de=j.createElement("input"),de.setAttribute("type","hidden"),ue.appendChild(de).setAttribute("name","D"),K.appendChild(ue).disabled=!0,ue.querySelectorAll(":disabled").length!==2&&ne.push(":enabled",":disabled"),de=j.createElement("input"),de.setAttribute("name",""),ue.appendChild(de),ue.querySelectorAll("[name='']").length||ne.push("\\["+B+"*name"+B+"*="+B+`*(?:''|"")`)}),b.cssHas||ne.push(":has"),ne=ne.length&&new RegExp(ne.join("|")),Nt=function(ue,de){if(ue===de)return I=!0,0;var xe=!ue.compareDocumentPosition-!de.compareDocumentPosition;return xe||(xe=(ue.ownerDocument||ue)==(de.ownerDocument||de)?ue.compareDocumentPosition(de):1,xe&1||!b.sortDetached&&de.compareDocumentPosition(ue)===xe?ue===j||ue.ownerDocument==H&&dt.contains(H,ue)?-1:de===j||de.ownerDocument==H&&dt.contains(H,de)?1:E?p.call(E,ue)-p.call(E,de):0:xe&4?-1:1)}),j}dt.matches=function(Z,ie){return dt(Z,null,null,ie)},dt.matchesSelector=function(Z,ie){if(Ci(Z),Q&&!Lt[ie+" "]&&(!ne||!ne.test(ie)))try{var ae=ce.call(Z,ie);if(ae||b.disconnectedMatch||Z.document&&Z.document.nodeType!==11)return ae}catch{Lt(ie,!0)}return dt(ie,j,null,[Z]).length>0},dt.contains=function(Z,ie){return(Z.ownerDocument||Z)!=j&&Ci(Z),l.contains(Z,ie)},dt.attr=function(Z,ie){(Z.ownerDocument||Z)!=j&&Ci(Z);var ae=c.attrHandle[ie.toLowerCase()],ue=ae&&m.call(c.attrHandle,ie.toLowerCase())?ae(Z,ie,!Q):void 0;return ue!==void 0?ue:Z.getAttribute(ie)},dt.error=function(Z){throw new Error("Syntax error, unrecognized expression: "+Z)},l.uniqueSort=function(Z){var ie,ae=[],ue=0,de=0;if(I=!b.sortStable,E=!b.sortStable&&a.call(Z,0),N.call(Z,Nt),I){for(;ie=Z[de++];)ie===Z[de]&&(ue=ae.push(de));for(;ue--;)D.call(Z,ae[ue],1)}return E=null,Z},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(a.apply(this)))},c=l.expr={cacheLength:50,createPseudo:ei,match:ai,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Z){return Z[1]=Z[1].replace(mi,gi),Z[3]=(Z[3]||Z[4]||Z[5]||"").replace(mi,gi),Z[2]==="~="&&(Z[3]=" "+Z[3]+" "),Z.slice(0,4)},CHILD:function(Z){return Z[1]=Z[1].toLowerCase(),Z[1].slice(0,3)==="nth"?(Z[3]||dt.error(Z[0]),Z[4]=+(Z[4]?Z[5]+(Z[6]||1):2*(Z[3]==="even"||Z[3]==="odd")),Z[5]=+(Z[7]+Z[8]||Z[3]==="odd")):Z[3]&&dt.error(Z[0]),Z},PSEUDO:function(Z){var ie,ae=!Z[6]&&Z[2];return ai.CHILD.test(Z[0])?null:(Z[3]?Z[2]=Z[4]||Z[5]||"":ae&&si.test(ae)&&(ie=kn(ae,!0))&&(ie=ae.indexOf(")",ae.length-ie)-ae.length)&&(Z[0]=Z[0].slice(0,ie),Z[2]=ae.slice(0,ie)),Z.slice(0,3))}},filter:{TAG:function(Z){var ie=Z.replace(mi,gi).toLowerCase();return Z==="*"?function(){return!0}:function(ae){return M(ae,ie)}},CLASS:function(Z){var ie=je[Z+" "];return ie||(ie=new RegExp("(^|"+B+")"+Z+"("+B+"|$)"))&&je(Z,function(ae){return ie.test(typeof ae.className=="string"&&ae.className||typeof ae.getAttribute<"u"&&ae.getAttribute("class")||"")})},ATTR:function(Z,ie,ae){return function(ue){var de=dt.attr(ue,Z);return de==null?ie==="!=":ie?(de+="",ie==="="?de===ae:ie==="!="?de!==ae:ie==="^="?ae&&de.indexOf(ae)===0:ie==="*="?ae&&de.indexOf(ae)>-1:ie==="$="?ae&&de.slice(-ae.length)===ae:ie==="~="?(" "+de.replace(at," ")+" ").indexOf(ae)>-1:ie==="|="?de===ae||de.slice(0,ae.length+1)===ae+"-":!1):!0}},CHILD:function(Z,ie,ae,ue,de){var xe=Z.slice(0,3)!=="nth",Se=Z.slice(-4)!=="last",Ne=ie==="of-type";return ue===1&&de===0?function(Ce){return!!Ce.parentNode}:function(Ce,Ge,qe){var Fe,Ze,De,vt,zt,Bt=xe!==Se?"nextSibling":"previousSibling",Qt=Ce.parentNode,li=Ne&&Ce.nodeName.toLowerCase(),Ji=!qe&&!Ne,jt=!1;if(Qt){if(xe){for(;Bt;){for(De=Ce;De=De[Bt];)if(Ne?M(De,li):De.nodeType===1)return!1;zt=Bt=Z==="only"&&!zt&&"nextSibling"}return!0}if(zt=[Se?Qt.firstChild:Qt.lastChild],Se&&Ji){for(Ze=Qt[pe]||(Qt[pe]={}),Fe=Ze[Z]||[],vt=Fe[0]===le&&Fe[1],jt=vt&&Fe[2],De=vt&&Qt.childNodes[vt];De=++vt&&De&&De[Bt]||(jt=vt=0)||zt.pop();)if(De.nodeType===1&&++jt&&De===Ce){Ze[Z]=[le,vt,jt];break}}else if(Ji&&(Ze=Ce[pe]||(Ce[pe]={}),Fe=Ze[Z]||[],vt=Fe[0]===le&&Fe[1],jt=vt),jt===!1)for(;(De=++vt&&De&&De[Bt]||(jt=vt=0)||zt.pop())&&!((Ne?M(De,li):De.nodeType===1)&&++jt&&(Ji&&(Ze=De[pe]||(De[pe]={}),Ze[Z]=[le,jt]),De===Ce)););return jt-=de,jt===ue||jt%ue===0&&jt/ue>=0}}},PSEUDO:function(Z,ie){var ae,ue=c.pseudos[Z]||c.setFilters[Z.toLowerCase()]||dt.error("unsupported pseudo: "+Z);return ue[pe]?ue(ie):ue.length>1?(ae=[Z,Z,"",ie],c.setFilters.hasOwnProperty(Z.toLowerCase())?ei(function(de,xe){for(var Se,Ne=ue(de,ie),Ce=Ne.length;Ce--;)Se=p.call(de,Ne[Ce]),de[Se]=!(xe[Se]=Ne[Ce])}):function(de){return ue(de,0,ae)}):ue}},pseudos:{not:ei(function(Z){var ie=[],ae=[],ue=Lr(Z.replace(F,"$1"));return ue[pe]?ei(function(de,xe,Se,Ne){for(var Ce,Ge=ue(de,null,Ne,[]),qe=de.length;qe--;)(Ce=Ge[qe])&&(de[qe]=!(xe[qe]=Ce))}):function(de,xe,Se){return ie[0]=de,ue(ie,null,Se,ae),ie[0]=null,!ae.pop()}}),has:ei(function(Z){return function(ie){return dt(Z,ie).length>0}}),contains:ei(function(Z){return Z=Z.replace(mi,gi),function(ie){return(ie.textContent||l.text(ie)).indexOf(Z)>-1}}),lang:ei(function(Z){return wn.test(Z||"")||dt.error("unsupported lang: "+Z),Z=Z.replace(mi,gi).toLowerCase(),function(ie){var ae;do if(ae=Q?ie.lang:ie.getAttribute("xml:lang")||ie.getAttribute("lang"))return ae=ae.toLowerCase(),ae===Z||ae.indexOf(Z+"-")===0;while((ie=ie.parentNode)&&ie.nodeType===1);return!1}}),target:function(Z){var ie=e.location&&e.location.hash;return ie&&ie.slice(1)===Z.id},root:function(Z){return Z===K},focus:function(Z){return Z===Ca()&&j.hasFocus()&&!!(Z.type||Z.href||~Z.tabIndex)},enabled:$o(!1),disabled:$o(!0),checked:function(Z){return M(Z,"input")&&!!Z.checked||M(Z,"option")&&!!Z.selected},selected:function(Z){return Z.parentNode&&Z.parentNode.selectedIndex,Z.selected===!0},empty:function(Z){for(Z=Z.firstChild;Z;Z=Z.nextSibling)if(Z.nodeType<6)return!1;return!0},parent:function(Z){return!c.pseudos.empty(Z)},header:function(Z){return Si.test(Z.nodeName)},input:function(Z){return Oi.test(Z.nodeName)},button:function(Z){return M(Z,"input")&&Z.type==="button"||M(Z,"button")},text:function(Z){var ie;return M(Z,"input")&&Z.type==="text"&&((ie=Z.getAttribute("type"))==null||ie.toLowerCase()==="text")},first:Fi(function(){return[0]}),last:Fi(function(Z,ie){return[ie-1]}),eq:Fi(function(Z,ie,ae){return[ae<0?ae+ie:ae]}),even:Fi(function(Z,ie){for(var ae=0;ae<ie;ae+=2)Z.push(ae);return Z}),odd:Fi(function(Z,ie){for(var ae=1;ae<ie;ae+=2)Z.push(ae);return Z}),lt:Fi(function(Z,ie,ae){var ue;for(ae<0?ue=ae+ie:ae>ie?ue=ie:ue=ae;--ue>=0;)Z.push(ue);return Z}),gt:Fi(function(Z,ie,ae){for(var ue=ae<0?ae+ie:ae;++ue<ie;)Z.push(ue);return Z})}},c.pseudos.nth=c.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[r]=Na(r);for(r in{submit:!0,reset:!0})c.pseudos[r]=$a(r);function Po(){}Po.prototype=c.filters=c.pseudos,c.setFilters=new Po;function kn(Z,ie){var ae,ue,de,xe,Se,Ne,Ce,Ge=st[Z+" "];if(Ge)return ie?0:Ge.slice(0);for(Se=Z,Ne=[],Ce=c.preFilter;Se;){(!ae||(ue=kt.exec(Se)))&&(ue&&(Se=Se.slice(ue[0].length)||Se),Ne.push(de=[])),ae=!1,(ue=_n.exec(Se))&&(ae=ue.shift(),de.push({value:ae,type:ue[0].replace(F," ")}),Se=Se.slice(ae.length));for(xe in c.filter)(ue=ai[xe].exec(Se))&&(!Ce[xe]||(ue=Ce[xe](ue)))&&(ae=ue.shift(),de.push({value:ae,type:xe,matches:ue}),Se=Se.slice(ae.length));if(!ae)break}return ie?Se.length:Se?dt.error(Z):st(Z,Ne).slice(0)}function zn(Z){for(var ie=0,ae=Z.length,ue="";ie<ae;ie++)ue+=Z[ie].value;return ue}function Wn(Z,ie,ae){var ue=ie.dir,de=ie.next,xe=de||ue,Se=ae&&xe==="parentNode",Ne=_e++;return ie.first?function(Ce,Ge,qe){for(;Ce=Ce[ue];)if(Ce.nodeType===1||Se)return Z(Ce,Ge,qe);return!1}:function(Ce,Ge,qe){var Fe,Ze,De=[le,Ne];if(qe){for(;Ce=Ce[ue];)if((Ce.nodeType===1||Se)&&Z(Ce,Ge,qe))return!0}else for(;Ce=Ce[ue];)if(Ce.nodeType===1||Se)if(Ze=Ce[pe]||(Ce[pe]={}),de&&M(Ce,de))Ce=Ce[ue]||Ce;else{if((Fe=Ze[xe])&&Fe[0]===le&&Fe[1]===Ne)return De[2]=Fe[2];if(Ze[xe]=De,De[2]=Z(Ce,Ge,qe))return!0}return!1}}function $r(Z){return Z.length>1?function(ie,ae,ue){for(var de=Z.length;de--;)if(!Z[de](ie,ae,ue))return!1;return!0}:Z[0]}function Pa(Z,ie,ae){for(var ue=0,de=ie.length;ue<de;ue++)dt(Z,ie[ue],ae);return ae}function Vn(Z,ie,ae,ue,de){for(var xe,Se=[],Ne=0,Ce=Z.length,Ge=ie!=null;Ne<Ce;Ne++)(xe=Z[Ne])&&(!ae||ae(xe,ue,de))&&(Se.push(xe),Ge&&ie.push(Ne));return Se}function Pr(Z,ie,ae,ue,de,xe){return ue&&!ue[pe]&&(ue=Pr(ue)),de&&!de[pe]&&(de=Pr(de,xe)),ei(function(Se,Ne,Ce,Ge){var qe,Fe,Ze,De,vt=[],zt=[],Bt=Ne.length,Qt=Se||Pa(ie||"*",Ce.nodeType?[Ce]:Ce,[]),li=Z&&(Se||!ie)?Vn(Qt,vt,Z,Ce,Ge):Qt;if(ae?(De=de||(Se?Z:Bt||ue)?[]:Ne,ae(li,De,Ce,Ge)):De=li,ue)for(qe=Vn(De,zt),ue(qe,[],Ce,Ge),Fe=qe.length;Fe--;)(Ze=qe[Fe])&&(De[zt[Fe]]=!(li[zt[Fe]]=Ze));if(Se){if(de||Z){if(de){for(qe=[],Fe=De.length;Fe--;)(Ze=De[Fe])&&qe.push(li[Fe]=Ze);de(null,De=[],qe,Ge)}for(Fe=De.length;Fe--;)(Ze=De[Fe])&&(qe=de?p.call(Se,Ze):vt[Fe])>-1&&(Se[qe]=!(Ne[qe]=Ze))}}else De=Vn(De===Ne?De.splice(Bt,De.length):De),de?de(null,Ne,De,Ge):L.apply(Ne,De)})}function Ir(Z){for(var ie,ae,ue,de=Z.length,xe=c.relative[Z[0].type],Se=xe||c.relative[" "],Ne=xe?1:0,Ce=Wn(function(Fe){return Fe===ie},Se,!0),Ge=Wn(function(Fe){return p.call(ie,Fe)>-1},Se,!0),qe=[function(Fe,Ze,De){var vt=!xe&&(De||Ze!=x)||((ie=Ze).nodeType?Ce(Fe,Ze,De):Ge(Fe,Ze,De));return ie=null,vt}];Ne<de;Ne++)if(ae=c.relative[Z[Ne].type])qe=[Wn($r(qe),ae)];else{if(ae=c.filter[Z[Ne].type].apply(null,Z[Ne].matches),ae[pe]){for(ue=++Ne;ue<de&&!c.relative[Z[ue].type];ue++);return Pr(Ne>1&&$r(qe),Ne>1&&zn(Z.slice(0,Ne-1).concat({value:Z[Ne-2].type===" "?"*":""})).replace(F,"$1"),ae,Ne<ue&&Ir(Z.slice(Ne,ue)),ue<de&&Ir(Z=Z.slice(ue)),ue<de&&zn(Z))}qe.push(ae)}return $r(qe)}function Ia(Z,ie){var ae=ie.length>0,ue=Z.length>0,de=function(xe,Se,Ne,Ce,Ge){var qe,Fe,Ze,De=0,vt="0",zt=xe&&[],Bt=[],Qt=x,li=xe||ue&&c.find.TAG("*",Ge),Ji=le+=Qt==null?1:Math.random()||.1,jt=li.length;for(Ge&&(x=Se==j||Se||Ge);vt!==jt&&(qe=li[vt])!=null;vt++){if(ue&&qe){for(Fe=0,!Se&&qe.ownerDocument!=j&&(Ci(qe),Ne=!Q);Ze=Z[Fe++];)if(Ze(qe,Se||j,Ne)){L.call(Ce,qe);break}Ge&&(le=Ji)}ae&&((qe=!Ze&&qe)&&De--,xe&&zt.push(qe))}if(De+=vt,ae&&vt!==De){for(Fe=0;Ze=ie[Fe++];)Ze(zt,Bt,Se,Ne);if(xe){if(De>0)for(;vt--;)zt[vt]||Bt[vt]||(Bt[vt]=P.call(Ce));Bt=Vn(Bt)}L.apply(Ce,Bt),Ge&&!xe&&Bt.length>0&&De+ie.length>1&&l.uniqueSort(Ce)}return Ge&&(le=Ji,x=Qt),zt};return ae?ei(de):de}function Lr(Z,ie){var ae,ue=[],de=[],xe=Xe[Z+" "];if(!xe){for(ie||(ie=kn(Z)),ae=ie.length;ae--;)xe=Ir(ie[ae]),xe[pe]?ue.push(xe):de.push(xe);xe=Xe(Z,Ia(de,ue)),xe.selector=Z}return xe}function Io(Z,ie,ae,ue){var de,xe,Se,Ne,Ce,Ge=typeof Z=="function"&&Z,qe=!ue&&kn(Z=Ge.selector||Z);if(ae=ae||[],qe.length===1){if(xe=qe[0]=qe[0].slice(0),xe.length>2&&(Se=xe[0]).type==="ID"&&ie.nodeType===9&&Q&&c.relative[xe[1].type]){if(ie=(c.find.ID(Se.matches[0].replace(mi,gi),ie)||[])[0],ie)Ge&&(ie=ie.parentNode);else return ae;Z=Z.slice(xe.shift().value.length)}for(de=ai.needsContext.test(Z)?0:xe.length;de--&&(Se=xe[de],!c.relative[Ne=Se.type]);)if((Ce=c.find[Ne])&&(ue=Ce(Se.matches[0].replace(mi,gi),Cr.test(xe[0].type)&&Nr(ie.parentNode)||ie))){if(xe.splice(de,1),Z=ue.length&&zn(xe),!Z)return L.apply(ae,ue),ae;break}}return(Ge||Lr(Z,qe))(ue,ie,!Q,ae,!ie||Cr.test(Z)&&Nr(ie.parentNode)||ie),ae}b.sortStable=pe.split("").sort(Nt).join("")===pe,Ci(),b.sortDetached=Ki(function(Z){return Z.compareDocumentPosition(j.createElement("fieldset"))&1}),l.find=dt,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,dt.compile=Lr,dt.select=Io,dt.setDocument=Ci,dt.tokenize=kn,dt.escape=l.escapeSelector,dt.getText=l.text,dt.isXML=l.isXMLDoc,dt.selectors=l.expr,dt.support=l.support,dt.uniqueSort=l.uniqueSort})();var V=function(r,c,x){for(var E=[],I=x!==void 0;(r=r[c])&&r.nodeType!==9;)if(r.nodeType===1){if(I&&l(r).is(x))break;E.push(r)}return E},U=function(r,c){for(var x=[];r;r=r.nextSibling)r.nodeType===1&&r!==c&&x.push(r);return x},q=l.expr.match.needsContext,z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function X(r,c,x){return y(c)?l.grep(r,function(E,I){return!!c.call(E,I,E)!==x}):c.nodeType?l.grep(r,function(E){return E===c!==x}):typeof c!="string"?l.grep(r,function(E){return p.call(c,E)>-1!==x}):l.filter(c,r,x)}l.filter=function(r,c,x){var E=c[0];return x&&(r=":not("+r+")"),c.length===1&&E.nodeType===1?l.find.matchesSelector(E,r)?[E]:[]:l.find.matches(r,l.grep(c,function(I){return I.nodeType===1}))},l.fn.extend({find:function(r){var c,x,E=this.length,I=this;if(typeof r!="string")return this.pushStack(l(r).filter(function(){for(c=0;c<E;c++)if(l.contains(I[c],this))return!0}));for(x=this.pushStack([]),c=0;c<E;c++)l.find(r,I[c],x);return E>1?l.uniqueSort(x):x},filter:function(r){return this.pushStack(X(this,r||[],!1))},not:function(r){return this.pushStack(X(this,r||[],!0))},is:function(r){return!!X(this,typeof r=="string"&&q.test(r)?l(r):r||[],!1).length}});var re,J=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,W=l.fn.init=function(r,c,x){var E,I;if(!r)return this;if(x=x||re,typeof r=="string")if(r[0]==="<"&&r[r.length-1]===">"&&r.length>=3?E=[null,r,null]:E=J.exec(r),E&&(E[1]||!c))if(E[1]){if(c=c instanceof l?c[0]:c,l.merge(this,l.parseHTML(E[1],c&&c.nodeType?c.ownerDocument||c:A,!0)),z.test(E[1])&&l.isPlainObject(c))for(E in c)y(this[E])?this[E](c[E]):this.attr(E,c[E]);return this}else return I=A.getElementById(E[2]),I&&(this[0]=I,this.length=1),this;else return!c||c.jquery?(c||x).find(r):this.constructor(c).find(r);else{if(r.nodeType)return this[0]=r,this.length=1,this;if(y(r))return x.ready!==void 0?x.ready(r):r(l)}return l.makeArray(r,this)};W.prototype=l.fn,re=l(A);var te=/^(?:parents|prev(?:Until|All))/,se={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(r){var c=l(r,this),x=c.length;return this.filter(function(){for(var E=0;E<x;E++)if(l.contains(this,c[E]))return!0})},closest:function(r,c){var x,E=0,I=this.length,L=[],j=typeof r!="string"&&l(r);if(!q.test(r)){for(;E<I;E++)for(x=this[E];x&&x!==c;x=x.parentNode)if(x.nodeType<11&&(j?j.index(x)>-1:x.nodeType===1&&l.find.matchesSelector(x,r))){L.push(x);break}}return this.pushStack(L.length>1?l.uniqueSort(L):L)},index:function(r){return r?typeof r=="string"?p.call(l(r),this[0]):p.call(this,r.jquery?r[0]:r):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(r,c){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(r,c))))},addBack:function(r){return this.add(r==null?this.prevObject:this.prevObject.filter(r))}});function oe(r,c){for(;(r=r[c])&&r.nodeType!==1;);return r}l.each({parent:function(r){var c=r.parentNode;return c&&c.nodeType!==11?c:null},parents:function(r){return V(r,"parentNode")},parentsUntil:function(r,c,x){return V(r,"parentNode",x)},next:function(r){return oe(r,"nextSibling")},prev:function(r){return oe(r,"previousSibling")},nextAll:function(r){return V(r,"nextSibling")},prevAll:function(r){return V(r,"previousSibling")},nextUntil:function(r,c,x){return V(r,"nextSibling",x)},prevUntil:function(r,c,x){return V(r,"previousSibling",x)},siblings:function(r){return U((r.parentNode||{}).firstChild,r)},children:function(r){return U(r.firstChild)},contents:function(r){return r.contentDocument!=null&&s(r.contentDocument)?r.contentDocument:(M(r,"template")&&(r=r.content||r),l.merge([],r.childNodes))}},function(r,c){l.fn[r]=function(x,E){var I=l.map(this,c,x);return r.slice(-5)!=="Until"&&(E=x),E&&typeof E=="string"&&(I=l.filter(E,I)),this.length>1&&(se[r]||l.uniqueSort(I),te.test(r)&&I.reverse()),this.pushStack(I)}});var fe=/[^\x20\t\r\n\f]+/g;function Ee(r){var c={};return l.each(r.match(fe)||[],function(x,E){c[E]=!0}),c}l.Callbacks=function(r){r=typeof r=="string"?Ee(r):l.extend({},r);var c,x,E,I,L=[],j=[],K=-1,Q=function(){for(I=I||r.once,E=c=!0;j.length;K=-1)for(x=j.shift();++K<L.length;)L[K].apply(x[0],x[1])===!1&&r.stopOnFalse&&(K=L.length,x=!1);r.memory||(x=!1),c=!1,I&&(x?L=[]:L="")},ne={add:function(){return L&&(x&&!c&&(K=L.length-1,j.push(x)),function ce(pe){l.each(pe,function(le,_e){y(_e)?(!r.unique||!ne.has(_e))&&L.push(_e):_e&&_e.length&&k(_e)!=="string"&&ce(_e)})}(arguments),x&&!c&&Q()),this},remove:function(){return l.each(arguments,function(ce,pe){for(var le;(le=l.inArray(pe,L,le))>-1;)L.splice(le,1),le<=K&&K--}),this},has:function(ce){return ce?l.inArray(ce,L)>-1:L.length>0},empty:function(){return L&&(L=[]),this},disable:function(){return I=j=[],L=x="",this},disabled:function(){return!L},lock:function(){return I=j=[],!x&&!c&&(L=x=""),this},locked:function(){return!!I},fireWith:function(ce,pe){return I||(pe=pe||[],pe=[ce,pe.slice?pe.slice():pe],j.push(pe),c||Q()),this},fire:function(){return ne.fireWith(this,arguments),this},fired:function(){return!!E}};return ne};function Pe(r){return r}function Le(r){throw r}function Ue(r,c,x,E){var I;try{r&&y(I=r.promise)?I.call(r).done(c).fail(x):r&&y(I=r.then)?I.call(r,c,x):c.apply(void 0,[r].slice(E))}catch(L){x.apply(void 0,[L])}}l.extend({Deferred:function(r){var c=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],x="pending",E={state:function(){return x},always:function(){return I.done(arguments).fail(arguments),this},catch:function(L){return E.then(null,L)},pipe:function(){var L=arguments;return l.Deferred(function(j){l.each(c,function(K,Q){var ne=y(L[Q[4]])&&L[Q[4]];I[Q[1]](function(){var ce=ne&&ne.apply(this,arguments);ce&&y(ce.promise)?ce.promise().progress(j.notify).done(j.resolve).fail(j.reject):j[Q[0]+"With"](this,ne?[ce]:arguments)})}),L=null}).promise()},then:function(L,j,K){var Q=0;function ne(ce,pe,le,_e){return function(){var je=this,st=arguments,Xe=function(){var Nt,ri;if(!(ce<Q)){if(Nt=le.apply(je,st),Nt===pe.promise())throw new TypeError("Thenable self-resolution");ri=Nt&&(typeof Nt=="object"||typeof Nt=="function")&&Nt.then,y(ri)?_e?ri.call(Nt,ne(Q,pe,Pe,_e),ne(Q,pe,Le,_e)):(Q++,ri.call(Nt,ne(Q,pe,Pe,_e),ne(Q,pe,Le,_e),ne(Q,pe,Pe,pe.notifyWith))):(le!==Pe&&(je=void 0,st=[Nt]),(_e||pe.resolveWith)(je,st))}},Lt=_e?Xe:function(){try{Xe()}catch(Nt){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(Nt,Lt.error),ce+1>=Q&&(le!==Le&&(je=void 0,st=[Nt]),pe.rejectWith(je,st))}};ce?Lt():(l.Deferred.getErrorHook?Lt.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(Lt.error=l.Deferred.getStackHook()),e.setTimeout(Lt))}}return l.Deferred(function(ce){c[0][3].add(ne(0,ce,y(K)?K:Pe,ce.notifyWith)),c[1][3].add(ne(0,ce,y(L)?L:Pe)),c[2][3].add(ne(0,ce,y(j)?j:Le))}).promise()},promise:function(L){return L!=null?l.extend(L,E):E}},I={};return l.each(c,function(L,j){var K=j[2],Q=j[5];E[j[1]]=K.add,Q&&K.add(function(){x=Q},c[3-L][2].disable,c[3-L][3].disable,c[0][2].lock,c[0][3].lock),K.add(j[3].fire),I[j[0]]=function(){return I[j[0]+"With"](this===I?void 0:this,arguments),this},I[j[0]+"With"]=K.fireWith}),E.promise(I),r&&r.call(I,I),I},when:function(r){var c=arguments.length,x=c,E=Array(x),I=a.call(arguments),L=l.Deferred(),j=function(K){return function(Q){E[K]=this,I[K]=arguments.length>1?a.call(arguments):Q,--c||L.resolveWith(E,I)}};if(c<=1&&(Ue(r,L.done(j(x)).resolve,L.reject,!c),L.state()==="pending"||y(I[x]&&I[x].then)))return L.then();for(;x--;)Ue(I[x],j(x),L.reject);return L.promise()}});var ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(r,c){e.console&&e.console.warn&&r&&ot.test(r.name)&&e.console.warn("jQuery.Deferred exception: "+r.message,r.stack,c)},l.readyException=function(r){e.setTimeout(function(){throw r})};var Tt=l.Deferred();l.fn.ready=function(r){return Tt.then(r).catch(function(c){l.readyException(c)}),this},l.extend({isReady:!1,readyWait:1,ready:function(r){(r===!0?--l.readyWait:l.isReady)||(l.isReady=!0,!(r!==!0&&--l.readyWait>0)&&Tt.resolveWith(A,[l]))}}),l.ready.then=Tt.then;function lt(){A.removeEventListener("DOMContentLoaded",lt),e.removeEventListener("load",lt),l.ready()}A.readyState==="complete"||A.readyState!=="loading"&&!A.documentElement.doScroll?e.setTimeout(l.ready):(A.addEventListener("DOMContentLoaded",lt),e.addEventListener("load",lt));var he=function(r,c,x,E,I,L,j){var K=0,Q=r.length,ne=x==null;if(k(x)==="object"){I=!0;for(K in x)he(r,c,K,x[K],!0,L,j)}else if(E!==void 0&&(I=!0,y(E)||(j=!0),ne&&(j?(c.call(r,E),c=null):(ne=c,c=function(ce,pe,le){return ne.call(l(ce),le)})),c))for(;K<Q;K++)c(r[K],x,j?E:E.call(r[K],K,c(r[K],x)));return I?r:ne?c.call(r):Q?c(r[0],x):L},me=/^-ms-/,Te=/-([a-z])/g;function Oe(r,c){return c.toUpperCase()}function ge(r){return r.replace(me,"ms-").replace(Te,Oe)}var Be=function(r){return r.nodeType===1||r.nodeType===9||!+r.nodeType};function Re(){this.expando=l.expando+Re.uid++}Re.uid=1,Re.prototype={cache:function(r){var c=r[this.expando];return c||(c={},Be(r)&&(r.nodeType?r[this.expando]=c:Object.defineProperty(r,this.expando,{value:c,configurable:!0}))),c},set:function(r,c,x){var E,I=this.cache(r);if(typeof c=="string")I[ge(c)]=x;else for(E in c)I[ge(E)]=c[E];return I},get:function(r,c){return c===void 0?this.cache(r):r[this.expando]&&r[this.expando][ge(c)]},access:function(r,c,x){return c===void 0||c&&typeof c=="string"&&x===void 0?this.get(r,c):(this.set(r,c,x),x!==void 0?x:c)},remove:function(r,c){var x,E=r[this.expando];if(E!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(ge):(c=ge(c),c=c in E?[c]:c.match(fe)||[]),x=c.length;x--;)delete E[c[x]];(c===void 0||l.isEmptyObject(E))&&(r.nodeType?r[this.expando]=void 0:delete r[this.expando])}},hasData:function(r){var c=r[this.expando];return c!==void 0&&!l.isEmptyObject(c)}};var Ae=new Re,ut=new Re,Ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,pt=/[A-Z]/g;function Zi(r){return r==="true"?!0:r==="false"?!1:r==="null"?null:r===+r+""?+r:Ht.test(r)?JSON.parse(r):r}function ht(r,c,x){var E;if(x===void 0&&r.nodeType===1)if(E="data-"+c.replace(pt,"-$&").toLowerCase(),x=r.getAttribute(E),typeof x=="string"){try{x=Zi(x)}catch{}ut.set(r,c,x)}else x=void 0;return x}l.extend({hasData:function(r){return ut.hasData(r)||Ae.hasData(r)},data:function(r,c,x){return ut.access(r,c,x)},removeData:function(r,c){ut.remove(r,c)},_data:function(r,c,x){return Ae.access(r,c,x)},_removeData:function(r,c){Ae.remove(r,c)}}),l.fn.extend({data:function(r,c){var x,E,I,L=this[0],j=L&&L.attributes;if(r===void 0){if(this.length&&(I=ut.get(L),L.nodeType===1&&!Ae.get(L,"hasDataAttrs"))){for(x=j.length;x--;)j[x]&&(E=j[x].name,E.indexOf("data-")===0&&(E=ge(E.slice(5)),ht(L,E,I[E])));Ae.set(L,"hasDataAttrs",!0)}return I}return typeof r=="object"?this.each(function(){ut.set(this,r)}):he(this,function(K){var Q;if(L&&K===void 0)return Q=ut.get(L,r),Q!==void 0||(Q=ht(L,r),Q!==void 0)?Q:void 0;this.each(function(){ut.set(this,r,K)})},null,c,arguments.length>1,null,!0)},removeData:function(r){return this.each(function(){ut.remove(this,r)})}}),l.extend({queue:function(r,c,x){var E;if(r)return c=(c||"fx")+"queue",E=Ae.get(r,c),x&&(!E||Array.isArray(x)?E=Ae.access(r,c,l.makeArray(x)):E.push(x)),E||[]},dequeue:function(r,c){c=c||"fx";var x=l.queue(r,c),E=x.length,I=x.shift(),L=l._queueHooks(r,c),j=function(){l.dequeue(r,c)};I==="inprogress"&&(I=x.shift(),E--),I&&(c==="fx"&&x.unshift("inprogress"),delete L.stop,I.call(r,j,L)),!E&&L&&L.empty.fire()},_queueHooks:function(r,c){var x=c+"queueHooks";return Ae.get(r,x)||Ae.access(r,x,{empty:l.Callbacks("once memory").add(function(){Ae.remove(r,[c+"queue",x])})})}}),l.fn.extend({queue:function(r,c){var x=2;return typeof r!="string"&&(c=r,r="fx",x--),arguments.length<x?l.queue(this[0],r):c===void 0?this:this.each(function(){var E=l.queue(this,r,c);l._queueHooks(this,r),r==="fx"&&E[0]!=="inprogress"&&l.dequeue(this,r)})},dequeue:function(r){return this.each(function(){l.dequeue(this,r)})},clearQueue:function(r){return this.queue(r||"fx",[])},promise:function(r,c){var x,E=1,I=l.Deferred(),L=this,j=this.length,K=function(){--E||I.resolveWith(L,[L])};for(typeof r!="string"&&(c=r,r=void 0),r=r||"fx";j--;)x=Ae.get(L[j],r+"queueHooks"),x&&x.empty&&(E++,x.empty.add(K));return K(),I.promise(c)}});var be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$e=new RegExp("^(?:([+-])=|)("+be+")([a-z%]*)$","i"),ct=["Top","Right","Bottom","Left"],et=A.documentElement,Ye=function(r){return l.contains(r.ownerDocument,r)},At={composed:!0};et.getRootNode&&(Ye=function(r){return l.contains(r.ownerDocument,r)||r.getRootNode(At)===r.ownerDocument});var $t=function(r,c){return r=c||r,r.style.display==="none"||r.style.display===""&&Ye(r)&&l.css(r,"display")==="none"};function di(r,c,x,E){var I,L,j=20,K=E?function(){return E.cur()}:function(){return l.css(r,c,"")},Q=K(),ne=x&&x[3]||(l.cssNumber[c]?"":"px"),ce=r.nodeType&&(l.cssNumber[c]||ne!=="px"&&+Q)&&$e.exec(l.css(r,c));if(ce&&ce[3]!==ne){for(Q=Q/2,ne=ne||ce[3],ce=+Q||1;j--;)l.style(r,c,ce+ne),(1-L)*(1-(L=K()/Q||.5))<=0&&(j=0),ce=ce/L;ce=ce*2,l.style(r,c,ce+ne),x=x||[]}return x&&(ce=+ce||+Q||0,I=x[1]?ce+(x[1]+1)*x[2]:+x[2],E&&(E.unit=ne,E.start=ce,E.end=I)),I}var Kt={};function It(r){var c,x=r.ownerDocument,E=r.nodeName,I=Kt[E];return I||(c=x.body.appendChild(x.createElement(E)),I=l.css(c,"display"),c.parentNode.removeChild(c),I==="none"&&(I="block"),Kt[E]=I,I)}function tt(r,c){for(var x,E,I=[],L=0,j=r.length;L<j;L++)E=r[L],E.style&&(x=E.style.display,c?(x==="none"&&(I[L]=Ae.get(E,"display")||null,I[L]||(E.style.display="")),E.style.display===""&&$t(E)&&(I[L]=It(E))):x!=="none"&&(I[L]="none",Ae.set(E,"display",x)));for(L=0;L<j;L++)I[L]!=null&&(r[L].style.display=I[L]);return r}l.fn.extend({show:function(){return tt(this,!0)},hide:function(){return tt(this)},toggle:function(r){return typeof r=="boolean"?r?this.show():this.hide():this.each(function(){$t(this)?l(this).show():l(this).hide()})}});var Rt=/^(?:checkbox|radio)$/i,xi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Xt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var r=A.createDocumentFragment(),c=r.appendChild(A.createElement("div")),x=A.createElement("input");x.setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),c.appendChild(x),b.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",b.option=!!c.lastChild})();var mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td,b.option||(mt.optgroup=mt.option=[1,"<select multiple='multiple'>","</select>"]);function Ct(r,c){var x;return typeof r.getElementsByTagName<"u"?x=r.getElementsByTagName(c||"*"):typeof r.querySelectorAll<"u"?x=r.querySelectorAll(c||"*"):x=[],c===void 0||c&&M(r,c)?l.merge([r],x):x}function Ri(r,c){for(var x=0,E=r.length;x<E;x++)Ae.set(r[x],"globalEval",!c||Ae.get(c[x],"globalEval"))}var gn=/<|&#?\w+;/;function qn(r,c,x,E,I){for(var L,j,K,Q,ne,ce,pe=c.createDocumentFragment(),le=[],_e=0,je=r.length;_e<je;_e++)if(L=r[_e],L||L===0)if(k(L)==="object")l.merge(le,L.nodeType?[L]:L);else if(!gn.test(L))le.push(c.createTextNode(L));else{for(j=j||pe.appendChild(c.createElement("div")),K=(xi.exec(L)||["",""])[1].toLowerCase(),Q=mt[K]||mt._default,j.innerHTML=Q[1]+l.htmlPrefilter(L)+Q[2],ce=Q[0];ce--;)j=j.lastChild;l.merge(le,j.childNodes),j=pe.firstChild,j.textContent=""}for(pe.textContent="",_e=0;L=le[_e++];){if(E&&l.inArray(L,E)>-1){I&&I.push(L);continue}if(ne=Ye(L),j=Ct(pe.appendChild(L),"script"),ne&&Ri(j),x)for(ce=0;L=j[ce++];)Xt.test(L.type||"")&&x.push(L)}return pe}var Bn=/^([^.]*)(?:\.(.+)|)/;function Ti(){return!0}function qt(){return!1}function Ei(r,c,x,E,I,L){var j,K;if(typeof c=="object"){typeof x!="string"&&(E=E||x,x=void 0);for(K in c)Ei(r,K,x,E,c[K],L);return r}if(E==null&&I==null?(I=x,E=x=void 0):I==null&&(typeof x=="string"?(I=E,E=void 0):(I=E,E=x,x=void 0)),I===!1)I=qt;else if(!I)return r;return L===1&&(j=I,I=function(Q){return l().off(Q),j.apply(this,arguments)},I.guid=j.guid||(j.guid=l.guid++)),r.each(function(){l.event.add(this,c,I,E,x)})}l.event={global:{},add:function(r,c,x,E,I){var L,j,K,Q,ne,ce,pe,le,_e,je,st,Xe=Ae.get(r);if(Be(r))for(x.handler&&(L=x,x=L.handler,I=L.selector),I&&l.find.matchesSelector(et,I),x.guid||(x.guid=l.guid++),(Q=Xe.events)||(Q=Xe.events=Object.create(null)),(j=Xe.handle)||(j=Xe.handle=function(Lt){return typeof l<"u"&&l.event.triggered!==Lt.type?l.event.dispatch.apply(r,arguments):void 0}),c=(c||"").match(fe)||[""],ne=c.length;ne--;)K=Bn.exec(c[ne])||[],_e=st=K[1],je=(K[2]||"").split(".").sort(),_e&&(pe=l.event.special[_e]||{},_e=(I?pe.delegateType:pe.bindType)||_e,pe=l.event.special[_e]||{},ce=l.extend({type:_e,origType:st,data:E,handler:x,guid:x.guid,selector:I,needsContext:I&&l.expr.match.needsContext.test(I),namespace:je.join(".")},L),(le=Q[_e])||(le=Q[_e]=[],le.delegateCount=0,(!pe.setup||pe.setup.call(r,E,je,j)===!1)&&r.addEventListener&&r.addEventListener(_e,j)),pe.add&&(pe.add.call(r,ce),ce.handler.guid||(ce.handler.guid=x.guid)),I?le.splice(le.delegateCount++,0,ce):le.push(ce),l.event.global[_e]=!0)},remove:function(r,c,x,E,I){var L,j,K,Q,ne,ce,pe,le,_e,je,st,Xe=Ae.hasData(r)&&Ae.get(r);if(!(!Xe||!(Q=Xe.events))){for(c=(c||"").match(fe)||[""],ne=c.length;ne--;){if(K=Bn.exec(c[ne])||[],_e=st=K[1],je=(K[2]||"").split(".").sort(),!_e){for(_e in Q)l.event.remove(r,_e+c[ne],x,E,!0);continue}for(pe=l.event.special[_e]||{},_e=(E?pe.delegateType:pe.bindType)||_e,le=Q[_e]||[],K=K[2]&&new RegExp("(^|\\.)"+je.join("\\.(?:.*\\.|)")+"(\\.|$)"),j=L=le.length;L--;)ce=le[L],(I||st===ce.origType)&&(!x||x.guid===ce.guid)&&(!K||K.test(ce.namespace))&&(!E||E===ce.selector||E==="**"&&ce.selector)&&(le.splice(L,1),ce.selector&&le.delegateCount--,pe.remove&&pe.remove.call(r,ce));j&&!le.length&&((!pe.teardown||pe.teardown.call(r,je,Xe.handle)===!1)&&l.removeEvent(r,_e,Xe.handle),delete Q[_e])}l.isEmptyObject(Q)&&Ae.remove(r,"handle events")}},dispatch:function(r){var c,x,E,I,L,j,K=new Array(arguments.length),Q=l.event.fix(r),ne=(Ae.get(this,"events")||Object.create(null))[Q.type]||[],ce=l.event.special[Q.type]||{};for(K[0]=Q,c=1;c<arguments.length;c++)K[c]=arguments[c];if(Q.delegateTarget=this,!(ce.preDispatch&&ce.preDispatch.call(this,Q)===!1)){for(j=l.event.handlers.call(this,Q,ne),c=0;(I=j[c++])&&!Q.isPropagationStopped();)for(Q.currentTarget=I.elem,x=0;(L=I.handlers[x++])&&!Q.isImmediatePropagationStopped();)(!Q.rnamespace||L.namespace===!1||Q.rnamespace.test(L.namespace))&&(Q.handleObj=L,Q.data=L.data,E=((l.event.special[L.origType]||{}).handle||L.handler).apply(I.elem,K),E!==void 0&&(Q.result=E)===!1&&(Q.preventDefault(),Q.stopPropagation()));return ce.postDispatch&&ce.postDispatch.call(this,Q),Q.result}},handlers:function(r,c){var x,E,I,L,j,K=[],Q=c.delegateCount,ne=r.target;if(Q&&ne.nodeType&&!(r.type==="click"&&r.button>=1)){for(;ne!==this;ne=ne.parentNode||this)if(ne.nodeType===1&&!(r.type==="click"&&ne.disabled===!0)){for(L=[],j={},x=0;x<Q;x++)E=c[x],I=E.selector+" ",j[I]===void 0&&(j[I]=E.needsContext?l(I,this).index(ne)>-1:l.find(I,this,null,[ne]).length),j[I]&&L.push(E);L.length&&K.push({elem:ne,handlers:L})}}return ne=this,Q<c.length&&K.push({elem:ne,handlers:c.slice(Q)}),K},addProp:function(r,c){Object.defineProperty(l.Event.prototype,r,{enumerable:!0,configurable:!0,get:y(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[r]},set:function(x){Object.defineProperty(this,r,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(r){return r[l.expando]?r:new l.Event(r)},special:{load:{noBubble:!0},click:{setup:function(r){var c=this||r;return Rt.test(c.type)&&c.click&&M(c,"input")&&pi(c,"click",!0),!1},trigger:function(r){var c=this||r;return Rt.test(c.type)&&c.click&&M(c,"input")&&pi(c,"click"),!0},_default:function(r){var c=r.target;return Rt.test(c.type)&&c.click&&M(c,"input")&&Ae.get(c,"click")||M(c,"a")}},beforeunload:{postDispatch:function(r){r.result!==void 0&&r.originalEvent&&(r.originalEvent.returnValue=r.result)}}}};function pi(r,c,x){if(!x){Ae.get(r,c)===void 0&&l.event.add(r,c,Ti);return}Ae.set(r,c,!1),l.event.add(r,c,{namespace:!1,handler:function(E){var I,L=Ae.get(this,c);if(E.isTrigger&1&&this[c]){if(L)(l.event.special[c]||{}).delegateType&&E.stopPropagation();else if(L=a.call(arguments),Ae.set(this,c,L),this[c](),I=Ae.get(this,c),Ae.set(this,c,!1),L!==I)return E.stopImmediatePropagation(),E.preventDefault(),I}else L&&(Ae.set(this,c,l.event.trigger(L[0],L.slice(1),this)),E.stopPropagation(),E.isImmediatePropagationStopped=Ti)}})}l.removeEvent=function(r,c,x){r.removeEventListener&&r.removeEventListener(c,x)},l.Event=function(r,c){if(!(this instanceof l.Event))return new l.Event(r,c);r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented||r.defaultPrevented===void 0&&r.returnValue===!1?Ti:qt,this.target=r.target&&r.target.nodeType===3?r.target.parentNode:r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget):this.type=r,c&&l.extend(this,c),this.timeStamp=r&&r.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:qt,isPropagationStopped:qt,isImmediatePropagationStopped:qt,isSimulated:!1,preventDefault:function(){var r=this.originalEvent;this.isDefaultPrevented=Ti,r&&!this.isSimulated&&r.preventDefault()},stopPropagation:function(){var r=this.originalEvent;this.isPropagationStopped=Ti,r&&!this.isSimulated&&r.stopPropagation()},stopImmediatePropagation:function(){var r=this.originalEvent;this.isImmediatePropagationStopped=Ti,r&&!this.isSimulated&&r.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(r,c){function x(E){if(A.documentMode){var I=Ae.get(this,"handle"),L=l.event.fix(E);L.type=E.type==="focusin"?"focus":"blur",L.isSimulated=!0,I(E),L.target===L.currentTarget&&I(L)}else l.event.simulate(c,E.target,l.event.fix(E))}l.event.special[r]={setup:function(){var E;if(pi(this,r,!0),A.documentMode)E=Ae.get(this,c),E||this.addEventListener(c,x),Ae.set(this,c,(E||0)+1);else return!1},trigger:function(){return pi(this,r),!0},teardown:function(){var E;if(A.documentMode)E=Ae.get(this,c)-1,E?Ae.set(this,c,E):(this.removeEventListener(c,x),Ae.remove(this,c));else return!1},_default:function(E){return Ae.get(E.target,r)},delegateType:c},l.event.special[c]={setup:function(){var E=this.ownerDocument||this.document||this,I=A.documentMode?this:E,L=Ae.get(I,c);L||(A.documentMode?this.addEventListener(c,x):E.addEventListener(r,x,!0)),Ae.set(I,c,(L||0)+1)},teardown:function(){var E=this.ownerDocument||this.document||this,I=A.documentMode?this:E,L=Ae.get(I,c)-1;L?Ae.set(I,c,L):(A.documentMode?this.removeEventListener(c,x):E.removeEventListener(r,x,!0),Ae.remove(I,c))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(r,c){l.event.special[r]={delegateType:c,bindType:c,handle:function(x){var E,I=this,L=x.relatedTarget,j=x.handleObj;return(!L||L!==I&&!l.contains(I,L))&&(x.type=j.origType,E=j.handler.apply(this,arguments),x.type=c),E}}}),l.fn.extend({on:function(r,c,x,E){return Ei(this,r,c,x,E)},one:function(r,c,x,E){return Ei(this,r,c,x,E,1)},off:function(r,c,x){var E,I;if(r&&r.preventDefault&&r.handleObj)return E=r.handleObj,l(r.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this;if(typeof r=="object"){for(I in r)this.off(I,c,r[I]);return this}return(c===!1||typeof c=="function")&&(x=c,c=void 0),x===!1&&(x=qt),this.each(function(){l.event.remove(this,r,x,c)})}});var Gs=/<script|<style|<link/i,Zs=/checked\s*(?:[^=]|=\s*.checked.)/i,Qs=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ao(r,c){return M(r,"table")&&M(c.nodeType!==11?c:c.firstChild,"tr")&&l(r).children("tbody")[0]||r}function Ys(r){return r.type=(r.getAttribute("type")!==null)+"/"+r.type,r}function Ks(r){return(r.type||"").slice(0,5)==="true/"?r.type=r.type.slice(5):r.removeAttribute("type"),r}function lo(r,c){var x,E,I,L,j,K,Q;if(c.nodeType===1){if(Ae.hasData(r)&&(L=Ae.get(r),Q=L.events,Q)){Ae.remove(c,"handle events");for(I in Q)for(x=0,E=Q[I].length;x<E;x++)l.event.add(c,I,Q[I][x])}ut.hasData(r)&&(j=ut.access(r),K=l.extend({},j),ut.set(c,K))}}function Js(r,c){var x=c.nodeName.toLowerCase();x==="input"&&Rt.test(r.type)?c.checked=r.checked:(x==="input"||x==="textarea")&&(c.defaultValue=r.defaultValue)}function Qi(r,c,x,E){c=h(c);var I,L,j,K,Q,ne,ce=0,pe=r.length,le=pe-1,_e=c[0],je=y(_e);if(je||pe>1&&typeof _e=="string"&&!b.checkClone&&Zs.test(_e))return r.each(function(st){var Xe=r.eq(st);je&&(c[0]=_e.call(this,st,Xe.html())),Qi(Xe,c,x,E)});if(pe&&(I=qn(c,r[0].ownerDocument,!1,r,E),L=I.firstChild,I.childNodes.length===1&&(I=L),L||E)){for(j=l.map(Ct(I,"script"),Ys),K=j.length;ce<pe;ce++)Q=I,ce!==le&&(Q=l.clone(Q,!0,!0),K&&l.merge(j,Ct(Q,"script"))),x.call(r[ce],Q,ce);if(K)for(ne=j[j.length-1].ownerDocument,l.map(j,Ks),ce=0;ce<K;ce++)Q=j[ce],Xt.test(Q.type||"")&&!Ae.access(Q,"globalEval")&&l.contains(ne,Q)&&(Q.src&&(Q.type||"").toLowerCase()!=="module"?l._evalUrl&&!Q.noModule&&l._evalUrl(Q.src,{nonce:Q.nonce||Q.getAttribute("nonce")},ne):O(Q.textContent.replace(Qs,""),Q,ne))}return r}function uo(r,c,x){for(var E,I=c?l.filter(c,r):r,L=0;(E=I[L])!=null;L++)!x&&E.nodeType===1&&l.cleanData(Ct(E)),E.parentNode&&(x&&Ye(E)&&Ri(Ct(E,"script")),E.parentNode.removeChild(E));return r}l.extend({htmlPrefilter:function(r){return r},clone:function(r,c,x){var E,I,L,j,K=r.cloneNode(!0),Q=Ye(r);if(!b.noCloneChecked&&(r.nodeType===1||r.nodeType===11)&&!l.isXMLDoc(r))for(j=Ct(K),L=Ct(r),E=0,I=L.length;E<I;E++)Js(L[E],j[E]);if(c)if(x)for(L=L||Ct(r),j=j||Ct(K),E=0,I=L.length;E<I;E++)lo(L[E],j[E]);else lo(r,K);return j=Ct(K,"script"),j.length>0&&Ri(j,!Q&&Ct(r,"script")),K},cleanData:function(r){for(var c,x,E,I=l.event.special,L=0;(x=r[L])!==void 0;L++)if(Be(x)){if(c=x[Ae.expando]){if(c.events)for(E in c.events)I[E]?l.event.remove(x,E):l.removeEvent(x,E,c.handle);x[Ae.expando]=void 0}x[ut.expando]&&(x[ut.expando]=void 0)}}}),l.fn.extend({detach:function(r){return uo(this,r,!0)},remove:function(r){return uo(this,r)},text:function(r){return he(this,function(c){return c===void 0?l.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,r,arguments.length)},append:function(){return Qi(this,arguments,function(r){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=ao(this,r);c.appendChild(r)}})},prepend:function(){return Qi(this,arguments,function(r){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=ao(this,r);c.insertBefore(r,c.firstChild)}})},before:function(){return Qi(this,arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this)})},after:function(){return Qi(this,arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling)})},empty:function(){for(var r,c=0;(r=this[c])!=null;c++)r.nodeType===1&&(l.cleanData(Ct(r,!1)),r.textContent="");return this},clone:function(r,c){return r=r??!1,c=c??r,this.map(function(){return l.clone(this,r,c)})},html:function(r){return he(this,function(c){var x=this[0]||{},E=0,I=this.length;if(c===void 0&&x.nodeType===1)return x.innerHTML;if(typeof c=="string"&&!Gs.test(c)&&!mt[(xi.exec(c)||["",""])[1].toLowerCase()]){c=l.htmlPrefilter(c);try{for(;E<I;E++)x=this[E]||{},x.nodeType===1&&(l.cleanData(Ct(x,!1)),x.innerHTML=c);x=0}catch{}}x&&this.empty().append(c)},null,r,arguments.length)},replaceWith:function(){var r=[];return Qi(this,arguments,function(c){var x=this.parentNode;l.inArray(this,r)<0&&(l.cleanData(Ct(this)),x&&x.replaceChild(c,this))},r)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(r,c){l.fn[r]=function(x){for(var E,I=[],L=l(x),j=L.length-1,K=0;K<=j;K++)E=K===j?this:this.clone(!0),l(L[K])[c](E),u.apply(I,E.get());return this.pushStack(I)}});var gr=new RegExp("^("+be+")(?!px)[a-z%]+$","i"),vr=/^--/,jn=function(r){var c=r.ownerDocument.defaultView;return(!c||!c.opener)&&(c=e),c.getComputedStyle(r)},co=function(r,c,x){var E,I,L={};for(I in c)L[I]=r.style[I],r.style[I]=c[I];E=x.call(r);for(I in c)r.style[I]=L[I];return E},ea=new RegExp(ct.join("|"),"i");(function(){function r(){if(ne){Q.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ne.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",et.appendChild(Q).appendChild(ne);var ce=e.getComputedStyle(ne);x=ce.top!=="1%",K=c(ce.marginLeft)===12,ne.style.right="60%",L=c(ce.right)===36,E=c(ce.width)===36,ne.style.position="absolute",I=c(ne.offsetWidth/3)===12,et.removeChild(Q),ne=null}}function c(ce){return Math.round(parseFloat(ce))}var x,E,I,L,j,K,Q=A.createElement("div"),ne=A.createElement("div");ne.style&&(ne.style.backgroundClip="content-box",ne.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle=ne.style.backgroundClip==="content-box",l.extend(b,{boxSizingReliable:function(){return r(),E},pixelBoxStyles:function(){return r(),L},pixelPosition:function(){return r(),x},reliableMarginLeft:function(){return r(),K},scrollboxSize:function(){return r(),I},reliableTrDimensions:function(){var ce,pe,le,_e;return j==null&&(ce=A.createElement("table"),pe=A.createElement("tr"),le=A.createElement("div"),ce.style.cssText="position:absolute;left:-11111px;border-collapse:separate",pe.style.cssText="box-sizing:content-box;border:1px solid",pe.style.height="1px",le.style.height="9px",le.style.display="block",et.appendChild(ce).appendChild(pe).appendChild(le),_e=e.getComputedStyle(pe),j=parseInt(_e.height,10)+parseInt(_e.borderTopWidth,10)+parseInt(_e.borderBottomWidth,10)===pe.offsetHeight,et.removeChild(ce)),j}}))})();function vn(r,c,x){var E,I,L,j,K=vr.test(c),Q=r.style;return x=x||jn(r),x&&(j=x.getPropertyValue(c)||x[c],K&&j&&(j=j.replace(F,"$1")||void 0),j===""&&!Ye(r)&&(j=l.style(r,c)),!b.pixelBoxStyles()&&gr.test(j)&&ea.test(c)&&(E=Q.width,I=Q.minWidth,L=Q.maxWidth,Q.minWidth=Q.maxWidth=Q.width=j,j=x.width,Q.width=E,Q.minWidth=I,Q.maxWidth=L)),j!==void 0?j+"":j}function fo(r,c){return{get:function(){if(r()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var ho=["Webkit","Moz","ms"],po=A.createElement("div").style,mo={};function ta(r){for(var c=r[0].toUpperCase()+r.slice(1),x=ho.length;x--;)if(r=ho[x]+c,r in po)return r}function yr(r){var c=l.cssProps[r]||mo[r];return c||(r in po?r:mo[r]=ta(r)||r)}var ia=/^(none|table(?!-c[ea]).+)/,na={position:"absolute",visibility:"hidden",display:"block"},go={letterSpacing:"0",fontWeight:"400"};function vo(r,c,x){var E=$e.exec(c);return E?Math.max(0,E[2]-(x||0))+(E[3]||"px"):c}function Ar(r,c,x,E,I,L){var j=c==="width"?1:0,K=0,Q=0,ne=0;if(x===(E?"border":"content"))return 0;for(;j<4;j+=2)x==="margin"&&(ne+=l.css(r,x+ct[j],!0,I)),E?(x==="content"&&(Q-=l.css(r,"padding"+ct[j],!0,I)),x!=="margin"&&(Q-=l.css(r,"border"+ct[j]+"Width",!0,I))):(Q+=l.css(r,"padding"+ct[j],!0,I),x!=="padding"?Q+=l.css(r,"border"+ct[j]+"Width",!0,I):K+=l.css(r,"border"+ct[j]+"Width",!0,I));return!E&&L>=0&&(Q+=Math.max(0,Math.ceil(r["offset"+c[0].toUpperCase()+c.slice(1)]-L-Q-K-.5))||0),Q+ne}function yo(r,c,x){var E=jn(r),I=!b.boxSizingReliable()||x,L=I&&l.css(r,"boxSizing",!1,E)==="border-box",j=L,K=vn(r,c,E),Q="offset"+c[0].toUpperCase()+c.slice(1);if(gr.test(K)){if(!x)return K;K="auto"}return(!b.boxSizingReliable()&&L||!b.reliableTrDimensions()&&M(r,"tr")||K==="auto"||!parseFloat(K)&&l.css(r,"display",!1,E)==="inline")&&r.getClientRects().length&&(L=l.css(r,"boxSizing",!1,E)==="border-box",j=Q in r,j&&(K=r[Q])),K=parseFloat(K)||0,K+Ar(r,c,x||(L?"border":"content"),j,E,K)+"px"}l.extend({cssHooks:{opacity:{get:function(r,c){if(c){var x=vn(r,"opacity");return x===""?"1":x}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(r,c,x,E){if(!(!r||r.nodeType===3||r.nodeType===8||!r.style)){var I,L,j,K=ge(c),Q=vr.test(c),ne=r.style;if(Q||(c=yr(K)),j=l.cssHooks[c]||l.cssHooks[K],x!==void 0){if(L=typeof x,L==="string"&&(I=$e.exec(x))&&I[1]&&(x=di(r,c,I),L="number"),x==null||x!==x)return;L==="number"&&!Q&&(x+=I&&I[3]||(l.cssNumber[K]?"":"px")),!b.clearCloneStyle&&x===""&&c.indexOf("background")===0&&(ne[c]="inherit"),(!j||!("set"in j)||(x=j.set(r,x,E))!==void 0)&&(Q?ne.setProperty(c,x):ne[c]=x)}else return j&&"get"in j&&(I=j.get(r,!1,E))!==void 0?I:ne[c]}},css:function(r,c,x,E){var I,L,j,K=ge(c),Q=vr.test(c);return Q||(c=yr(K)),j=l.cssHooks[c]||l.cssHooks[K],j&&"get"in j&&(I=j.get(r,!0,x)),I===void 0&&(I=vn(r,c,E)),I==="normal"&&c in go&&(I=go[c]),x===""||x?(L=parseFloat(I),x===!0||isFinite(L)?L||0:I):I}}),l.each(["height","width"],function(r,c){l.cssHooks[c]={get:function(x,E,I){if(E)return ia.test(l.css(x,"display"))&&(!x.getClientRects().length||!x.getBoundingClientRect().width)?co(x,na,function(){return yo(x,c,I)}):yo(x,c,I)},set:function(x,E,I){var L,j=jn(x),K=!b.scrollboxSize()&&j.position==="absolute",Q=K||I,ne=Q&&l.css(x,"boxSizing",!1,j)==="border-box",ce=I?Ar(x,c,I,ne,j):0;return ne&&K&&(ce-=Math.ceil(x["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(j[c])-Ar(x,c,"border",!1,j)-.5)),ce&&(L=$e.exec(E))&&(L[3]||"px")!=="px"&&(x.style[c]=E,E=l.css(x,c)),vo(x,E,ce)}}}),l.cssHooks.marginLeft=fo(b.reliableMarginLeft,function(r,c){if(c)return(parseFloat(vn(r,"marginLeft"))||r.getBoundingClientRect().left-co(r,{marginLeft:0},function(){return r.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(r,c){l.cssHooks[r+c]={expand:function(x){for(var E=0,I={},L=typeof x=="string"?x.split(" "):[x];E<4;E++)I[r+ct[E]+c]=L[E]||L[E-2]||L[0];return I}},r!=="margin"&&(l.cssHooks[r+c].set=vo)}),l.fn.extend({css:function(r,c){return he(this,function(x,E,I){var L,j,K={},Q=0;if(Array.isArray(E)){for(L=jn(x),j=E.length;Q<j;Q++)K[E[Q]]=l.css(x,E[Q],!1,L);return K}return I!==void 0?l.style(x,E,I):l.css(x,E)},r,c,arguments.length>1)}});function Ut(r,c,x,E,I){return new Ut.prototype.init(r,c,x,E,I)}l.Tween=Ut,Ut.prototype={constructor:Ut,init:function(r,c,x,E,I,L){this.elem=r,this.prop=x,this.easing=I||l.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=E,this.unit=L||(l.cssNumber[x]?"":"px")},cur:function(){var r=Ut.propHooks[this.prop];return r&&r.get?r.get(this):Ut.propHooks._default.get(this)},run:function(r){var c,x=Ut.propHooks[this.prop];return this.options.duration?this.pos=c=l.easing[this.easing](r,this.options.duration*r,0,1,this.options.duration):this.pos=c=r,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):Ut.propHooks._default.set(this),this}},Ut.prototype.init.prototype=Ut.prototype,Ut.propHooks={_default:{get:function(r){var c;return r.elem.nodeType!==1||r.elem[r.prop]!=null&&r.elem.style[r.prop]==null?r.elem[r.prop]:(c=l.css(r.elem,r.prop,""),!c||c==="auto"?0:c)},set:function(r){l.fx.step[r.prop]?l.fx.step[r.prop](r):r.elem.nodeType===1&&(l.cssHooks[r.prop]||r.elem.style[yr(r.prop)]!=null)?l.style(r.elem,r.prop,r.now+r.unit):r.elem[r.prop]=r.now}}},Ut.propHooks.scrollTop=Ut.propHooks.scrollLeft={set:function(r){r.elem.nodeType&&r.elem.parentNode&&(r.elem[r.prop]=r.now)}},l.easing={linear:function(r){return r},swing:function(r){return .5-Math.cos(r*Math.PI)/2},_default:"swing"},l.fx=Ut.prototype.init,l.fx.step={};var Yi,Fn,ra=/^(?:toggle|show|hide)$/,oa=/queueHooks$/;function br(){Fn&&(A.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(br):e.setTimeout(br,l.fx.interval),l.fx.tick())}function Ao(){return e.setTimeout(function(){Yi=void 0}),Yi=Date.now()}function Hn(r,c){var x,E=0,I={height:r};for(c=c?1:0;E<4;E+=2-c)x=ct[E],I["margin"+x]=I["padding"+x]=r;return c&&(I.opacity=I.width=r),I}function bo(r,c,x){for(var E,I=(Jt.tweeners[c]||[]).concat(Jt.tweeners["*"]),L=0,j=I.length;L<j;L++)if(E=I[L].call(x,c,r))return E}function sa(r,c,x){var E,I,L,j,K,Q,ne,ce,pe="width"in c||"height"in c,le=this,_e={},je=r.style,st=r.nodeType&&$t(r),Xe=Ae.get(r,"fxshow");x.queue||(j=l._queueHooks(r,"fx"),j.unqueued==null&&(j.unqueued=0,K=j.empty.fire,j.empty.fire=function(){j.unqueued||K()}),j.unqueued++,le.always(function(){le.always(function(){j.unqueued--,l.queue(r,"fx").length||j.empty.fire()})}));for(E in c)if(I=c[E],ra.test(I)){if(delete c[E],L=L||I==="toggle",I===(st?"hide":"show"))if(I==="show"&&Xe&&Xe[E]!==void 0)st=!0;else continue;_e[E]=Xe&&Xe[E]||l.style(r,E)}if(Q=!l.isEmptyObject(c),!(!Q&&l.isEmptyObject(_e))){pe&&r.nodeType===1&&(x.overflow=[je.overflow,je.overflowX,je.overflowY],ne=Xe&&Xe.display,ne==null&&(ne=Ae.get(r,"display")),ce=l.css(r,"display"),ce==="none"&&(ne?ce=ne:(tt([r],!0),ne=r.style.display||ne,ce=l.css(r,"display"),tt([r]))),(ce==="inline"||ce==="inline-block"&&ne!=null)&&l.css(r,"float")==="none"&&(Q||(le.done(function(){je.display=ne}),ne==null&&(ce=je.display,ne=ce==="none"?"":ce)),je.display="inline-block")),x.overflow&&(je.overflow="hidden",le.always(function(){je.overflow=x.overflow[0],je.overflowX=x.overflow[1],je.overflowY=x.overflow[2]})),Q=!1;for(E in _e)Q||(Xe?"hidden"in Xe&&(st=Xe.hidden):Xe=Ae.access(r,"fxshow",{display:ne}),L&&(Xe.hidden=!st),st&&tt([r],!0),le.done(function(){st||tt([r]),Ae.remove(r,"fxshow");for(E in _e)l.style(r,E,_e[E])})),Q=bo(st?Xe[E]:0,E,le),E in Xe||(Xe[E]=Q.start,st&&(Q.end=Q.start,Q.start=0))}}function aa(r,c){var x,E,I,L,j;for(x in r)if(E=ge(x),I=c[E],L=r[x],Array.isArray(L)&&(I=L[1],L=r[x]=L[0]),x!==E&&(r[E]=L,delete r[x]),j=l.cssHooks[E],j&&"expand"in j){L=j.expand(L),delete r[E];for(x in L)x in r||(r[x]=L[x],c[x]=I)}else c[E]=I}function Jt(r,c,x){var E,I,L=0,j=Jt.prefilters.length,K=l.Deferred().always(function(){delete Q.elem}),Q=function(){if(I)return!1;for(var pe=Yi||Ao(),le=Math.max(0,ne.startTime+ne.duration-pe),_e=le/ne.duration||0,je=1-_e,st=0,Xe=ne.tweens.length;st<Xe;st++)ne.tweens[st].run(je);return K.notifyWith(r,[ne,je,le]),je<1&&Xe?le:(Xe||K.notifyWith(r,[ne,1,0]),K.resolveWith(r,[ne]),!1)},ne=K.promise({elem:r,props:l.extend({},c),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},x),originalProperties:c,originalOptions:x,startTime:Yi||Ao(),duration:x.duration,tweens:[],createTween:function(pe,le){var _e=l.Tween(r,ne.opts,pe,le,ne.opts.specialEasing[pe]||ne.opts.easing);return ne.tweens.push(_e),_e},stop:function(pe){var le=0,_e=pe?ne.tweens.length:0;if(I)return this;for(I=!0;le<_e;le++)ne.tweens[le].run(1);return pe?(K.notifyWith(r,[ne,1,0]),K.resolveWith(r,[ne,pe])):K.rejectWith(r,[ne,pe]),this}}),ce=ne.props;for(aa(ce,ne.opts.specialEasing);L<j;L++)if(E=Jt.prefilters[L].call(ne,r,ce,ne.opts),E)return y(E.stop)&&(l._queueHooks(ne.elem,ne.opts.queue).stop=E.stop.bind(E)),E;return l.map(ce,bo,ne),y(ne.opts.start)&&ne.opts.start.call(r,ne),ne.progress(ne.opts.progress).done(ne.opts.done,ne.opts.complete).fail(ne.opts.fail).always(ne.opts.always),l.fx.timer(l.extend(Q,{elem:r,anim:ne,queue:ne.opts.queue})),ne}l.Animation=l.extend(Jt,{tweeners:{"*":[function(r,c){var x=this.createTween(r,c);return di(x.elem,r,$e.exec(c),x),x}]},tweener:function(r,c){y(r)?(c=r,r=["*"]):r=r.match(fe);for(var x,E=0,I=r.length;E<I;E++)x=r[E],Jt.tweeners[x]=Jt.tweeners[x]||[],Jt.tweeners[x].unshift(c)},prefilters:[sa],prefilter:function(r,c){c?Jt.prefilters.unshift(r):Jt.prefilters.push(r)}}),l.speed=function(r,c,x){var E=r&&typeof r=="object"?l.extend({},r):{complete:x||!x&&c||y(r)&&r,duration:r,easing:x&&c||c&&!y(c)&&c};return l.fx.off?E.duration=0:typeof E.duration!="number"&&(E.duration in l.fx.speeds?E.duration=l.fx.speeds[E.duration]:E.duration=l.fx.speeds._default),(E.queue==null||E.queue===!0)&&(E.queue="fx"),E.old=E.complete,E.complete=function(){y(E.old)&&E.old.call(this),E.queue&&l.dequeue(this,E.queue)},E},l.fn.extend({fadeTo:function(r,c,x,E){return this.filter($t).css("opacity",0).show().end().animate({opacity:c},r,x,E)},animate:function(r,c,x,E){var I=l.isEmptyObject(r),L=l.speed(c,x,E),j=function(){var K=Jt(this,l.extend({},r),L);(I||Ae.get(this,"finish"))&&K.stop(!0)};return j.finish=j,I||L.queue===!1?this.each(j):this.queue(L.queue,j)},stop:function(r,c,x){var E=function(I){var L=I.stop;delete I.stop,L(x)};return typeof r!="string"&&(x=c,c=r,r=void 0),c&&this.queue(r||"fx",[]),this.each(function(){var I=!0,L=r!=null&&r+"queueHooks",j=l.timers,K=Ae.get(this);if(L)K[L]&&K[L].stop&&E(K[L]);else for(L in K)K[L]&&K[L].stop&&oa.test(L)&&E(K[L]);for(L=j.length;L--;)j[L].elem===this&&(r==null||j[L].queue===r)&&(j[L].anim.stop(x),I=!1,j.splice(L,1));(I||!x)&&l.dequeue(this,r)})},finish:function(r){return r!==!1&&(r=r||"fx"),this.each(function(){var c,x=Ae.get(this),E=x[r+"queue"],I=x[r+"queueHooks"],L=l.timers,j=E?E.length:0;for(x.finish=!0,l.queue(this,r,[]),I&&I.stop&&I.stop.call(this,!0),c=L.length;c--;)L[c].elem===this&&L[c].queue===r&&(L[c].anim.stop(!0),L.splice(c,1));for(c=0;c<j;c++)E[c]&&E[c].finish&&E[c].finish.call(this);delete x.finish})}}),l.each(["toggle","show","hide"],function(r,c){var x=l.fn[c];l.fn[c]=function(E,I,L){return E==null||typeof E=="boolean"?x.apply(this,arguments):this.animate(Hn(c,!0),E,I,L)}}),l.each({slideDown:Hn("show"),slideUp:Hn("hide"),slideToggle:Hn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(r,c){l.fn[r]=function(x,E,I){return this.animate(c,x,E,I)}}),l.timers=[],l.fx.tick=function(){var r,c=0,x=l.timers;for(Yi=Date.now();c<x.length;c++)r=x[c],!r()&&x[c]===r&&x.splice(c--,1);x.length||l.fx.stop(),Yi=void 0},l.fx.timer=function(r){l.timers.push(r),l.fx.start()},l.fx.interval=13,l.fx.start=function(){Fn||(Fn=!0,br())},l.fx.stop=function(){Fn=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(r,c){return r=l.fx&&l.fx.speeds[r]||r,c=c||"fx",this.queue(c,function(x,E){var I=e.setTimeout(x,r);E.stop=function(){e.clearTimeout(I)}})},function(){var r=A.createElement("input"),c=A.createElement("select"),x=c.appendChild(A.createElement("option"));r.type="checkbox",b.checkOn=r.value!=="",b.optSelected=x.selected,r=A.createElement("input"),r.value="t",r.type="radio",b.radioValue=r.value==="t"}();var _o,yn=l.expr.attrHandle;l.fn.extend({attr:function(r,c){return he(this,l.attr,r,c,arguments.length>1)},removeAttr:function(r){return this.each(function(){l.removeAttr(this,r)})}}),l.extend({attr:function(r,c,x){var E,I,L=r.nodeType;if(!(L===3||L===8||L===2)){if(typeof r.getAttribute>"u")return l.prop(r,c,x);if((L!==1||!l.isXMLDoc(r))&&(I=l.attrHooks[c.toLowerCase()]||(l.expr.match.bool.test(c)?_o:void 0)),x!==void 0){if(x===null){l.removeAttr(r,c);return}return I&&"set"in I&&(E=I.set(r,x,c))!==void 0?E:(r.setAttribute(c,x+""),x)}return I&&"get"in I&&(E=I.get(r,c))!==null?E:(E=l.find.attr(r,c),E??void 0)}},attrHooks:{type:{set:function(r,c){if(!b.radioValue&&c==="radio"&&M(r,"input")){var x=r.value;return r.setAttribute("type",c),x&&(r.value=x),c}}}},removeAttr:function(r,c){var x,E=0,I=c&&c.match(fe);if(I&&r.nodeType===1)for(;x=I[E++];)r.removeAttribute(x)}}),_o={set:function(r,c,x){return c===!1?l.removeAttr(r,x):r.setAttribute(x,x),x}},l.each(l.expr.match.bool.source.match(/\w+/g),function(r,c){var x=yn[c]||l.find.attr;yn[c]=function(E,I,L){var j,K,Q=I.toLowerCase();return L||(K=yn[Q],yn[Q]=j,j=x(E,I,L)!=null?Q:null,yn[Q]=K),j}});var la=/^(?:input|select|textarea|button)$/i,ua=/^(?:a|area)$/i;l.fn.extend({prop:function(r,c){return he(this,l.prop,r,c,arguments.length>1)},removeProp:function(r){return this.each(function(){delete this[l.propFix[r]||r]})}}),l.extend({prop:function(r,c,x){var E,I,L=r.nodeType;if(!(L===3||L===8||L===2))return(L!==1||!l.isXMLDoc(r))&&(c=l.propFix[c]||c,I=l.propHooks[c]),x!==void 0?I&&"set"in I&&(E=I.set(r,x,c))!==void 0?E:r[c]=x:I&&"get"in I&&(E=I.get(r,c))!==null?E:r[c]},propHooks:{tabIndex:{get:function(r){var c=l.find.attr(r,"tabindex");return c?parseInt(c,10):la.test(r.nodeName)||ua.test(r.nodeName)&&r.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(l.propHooks.selected={get:function(r){var c=r.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(r){var c=r.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this});function qi(r){var c=r.match(fe)||[];return c.join(" ")}function Bi(r){return r.getAttribute&&r.getAttribute("class")||""}function _r(r){return Array.isArray(r)?r:typeof r=="string"?r.match(fe)||[]:[]}l.fn.extend({addClass:function(r){var c,x,E,I,L,j;return y(r)?this.each(function(K){l(this).addClass(r.call(this,K,Bi(this)))}):(c=_r(r),c.length?this.each(function(){if(E=Bi(this),x=this.nodeType===1&&" "+qi(E)+" ",x){for(L=0;L<c.length;L++)I=c[L],x.indexOf(" "+I+" ")<0&&(x+=I+" ");j=qi(x),E!==j&&this.setAttribute("class",j)}}):this)},removeClass:function(r){var c,x,E,I,L,j;return y(r)?this.each(function(K){l(this).removeClass(r.call(this,K,Bi(this)))}):arguments.length?(c=_r(r),c.length?this.each(function(){if(E=Bi(this),x=this.nodeType===1&&" "+qi(E)+" ",x){for(L=0;L<c.length;L++)for(I=c[L];x.indexOf(" "+I+" ")>-1;)x=x.replace(" "+I+" "," ");j=qi(x),E!==j&&this.setAttribute("class",j)}}):this):this.attr("class","")},toggleClass:function(r,c){var x,E,I,L,j=typeof r,K=j==="string"||Array.isArray(r);return y(r)?this.each(function(Q){l(this).toggleClass(r.call(this,Q,Bi(this),c),c)}):typeof c=="boolean"&&K?c?this.addClass(r):this.removeClass(r):(x=_r(r),this.each(function(){if(K)for(L=l(this),I=0;I<x.length;I++)E=x[I],L.hasClass(E)?L.removeClass(E):L.addClass(E);else(r===void 0||j==="boolean")&&(E=Bi(this),E&&Ae.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||r===!1?"":Ae.get(this,"__className__")||""))}))},hasClass:function(r){var c,x,E=0;for(c=" "+r+" ";x=this[E++];)if(x.nodeType===1&&(" "+qi(Bi(x))+" ").indexOf(c)>-1)return!0;return!1}});var ca=/\r/g;l.fn.extend({val:function(r){var c,x,E,I=this[0];return arguments.length?(E=y(r),this.each(function(L){var j;this.nodeType===1&&(E?j=r.call(this,L,l(this).val()):j=r,j==null?j="":typeof j=="number"?j+="":Array.isArray(j)&&(j=l.map(j,function(K){return K==null?"":K+""})),c=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,j,"value")===void 0)&&(this.value=j))})):I?(c=l.valHooks[I.type]||l.valHooks[I.nodeName.toLowerCase()],c&&"get"in c&&(x=c.get(I,"value"))!==void 0?x:(x=I.value,typeof x=="string"?x.replace(ca,""):x??"")):void 0}}),l.extend({valHooks:{option:{get:function(r){var c=l.find.attr(r,"value");return c??qi(l.text(r))}},select:{get:function(r){var c,x,E,I=r.options,L=r.selectedIndex,j=r.type==="select-one",K=j?null:[],Q=j?L+1:I.length;for(L<0?E=Q:E=j?L:0;E<Q;E++)if(x=I[E],(x.selected||E===L)&&!x.disabled&&(!x.parentNode.disabled||!M(x.parentNode,"optgroup"))){if(c=l(x).val(),j)return c;K.push(c)}return K},set:function(r,c){for(var x,E,I=r.options,L=l.makeArray(c),j=I.length;j--;)E=I[j],(E.selected=l.inArray(l.valHooks.option.get(E),L)>-1)&&(x=!0);return x||(r.selectedIndex=-1),L}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(r,c){if(Array.isArray(c))return r.checked=l.inArray(l(r).val(),c)>-1}},b.checkOn||(l.valHooks[this].get=function(r){return r.getAttribute("value")===null?"on":r.value})});var An=e.location,wo={guid:Date.now()},wr=/\?/;l.parseXML=function(r){var c,x;if(!r||typeof r!="string")return null;try{c=new e.DOMParser().parseFromString(r,"text/xml")}catch{}return x=c&&c.getElementsByTagName("parsererror")[0],(!c||x)&&l.error("Invalid XML: "+(x?l.map(x.childNodes,function(E){return E.textContent}).join(`
`):r)),c};var ko=/^(?:focusinfocus|focusoutblur)$/,xo=function(r){r.stopPropagation()};l.extend(l.event,{trigger:function(r,c,x,E){var I,L,j,K,Q,ne,ce,pe,le=[x||A],_e=m.call(r,"type")?r.type:r,je=m.call(r,"namespace")?r.namespace.split("."):[];if(L=pe=j=x=x||A,!(x.nodeType===3||x.nodeType===8)&&!ko.test(_e+l.event.triggered)&&(_e.indexOf(".")>-1&&(je=_e.split("."),_e=je.shift(),je.sort()),Q=_e.indexOf(":")<0&&"on"+_e,r=r[l.expando]?r:new l.Event(_e,typeof r=="object"&&r),r.isTrigger=E?2:3,r.namespace=je.join("."),r.rnamespace=r.namespace?new RegExp("(^|\\.)"+je.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=void 0,r.target||(r.target=x),c=c==null?[r]:l.makeArray(c,[r]),ce=l.event.special[_e]||{},!(!E&&ce.trigger&&ce.trigger.apply(x,c)===!1))){if(!E&&!ce.noBubble&&!_(x)){for(K=ce.delegateType||_e,ko.test(K+_e)||(L=L.parentNode);L;L=L.parentNode)le.push(L),j=L;j===(x.ownerDocument||A)&&le.push(j.defaultView||j.parentWindow||e)}for(I=0;(L=le[I++])&&!r.isPropagationStopped();)pe=L,r.type=I>1?K:ce.bindType||_e,ne=(Ae.get(L,"events")||Object.create(null))[r.type]&&Ae.get(L,"handle"),ne&&ne.apply(L,c),ne=Q&&L[Q],ne&&ne.apply&&Be(L)&&(r.result=ne.apply(L,c),r.result===!1&&r.preventDefault());return r.type=_e,!E&&!r.isDefaultPrevented()&&(!ce._default||ce._default.apply(le.pop(),c)===!1)&&Be(x)&&Q&&y(x[_e])&&!_(x)&&(j=x[Q],j&&(x[Q]=null),l.event.triggered=_e,r.isPropagationStopped()&&pe.addEventListener(_e,xo),x[_e](),r.isPropagationStopped()&&pe.removeEventListener(_e,xo),l.event.triggered=void 0,j&&(x[Q]=j)),r.result}},simulate:function(r,c,x){var E=l.extend(new l.Event,x,{type:r,isSimulated:!0});l.event.trigger(E,null,c)}}),l.fn.extend({trigger:function(r,c){return this.each(function(){l.event.trigger(r,c,this)})},triggerHandler:function(r,c){var x=this[0];if(x)return l.event.trigger(r,c,x,!0)}});var fa=/\[\]$/,To=/\r?\n/g,ha=/^(?:submit|button|image|reset|file)$/i,da=/^(?:input|select|textarea|keygen)/i;function kr(r,c,x,E){var I;if(Array.isArray(c))l.each(c,function(L,j){x||fa.test(r)?E(r,j):kr(r+"["+(typeof j=="object"&&j!=null?L:"")+"]",j,x,E)});else if(!x&&k(c)==="object")for(I in c)kr(r+"["+I+"]",c[I],x,E);else E(r,c)}l.param=function(r,c){var x,E=[],I=function(L,j){var K=y(j)?j():j;E[E.length]=encodeURIComponent(L)+"="+encodeURIComponent(K??"")};if(r==null)return"";if(Array.isArray(r)||r.jquery&&!l.isPlainObject(r))l.each(r,function(){I(this.name,this.value)});else for(x in r)kr(x,r[x],c,I);return E.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var r=l.prop(this,"elements");return r?l.makeArray(r):this}).filter(function(){var r=this.type;return this.name&&!l(this).is(":disabled")&&da.test(this.nodeName)&&!ha.test(r)&&(this.checked||!Rt.test(r))}).map(function(r,c){var x=l(this).val();return x==null?null:Array.isArray(x)?l.map(x,function(E){return{name:c.name,value:E.replace(To,`\r
`)}}):{name:c.name,value:x.replace(To,`\r
`)}}).get()}});var pa=/%20/g,ma=/#.*$/,ga=/([?&])_=[^&]*/,va=/^(.*?):[ \t]*([^\r\n]*)$/mg,ya=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Aa=/^(?:GET|HEAD)$/,ba=/^\/\//,Eo={},xr={},Oo="*/".concat("*"),Tr=A.createElement("a");Tr.href=An.href;function So(r){return function(c,x){typeof c!="string"&&(x=c,c="*");var E,I=0,L=c.toLowerCase().match(fe)||[];if(y(x))for(;E=L[I++];)E[0]==="+"?(E=E.slice(1)||"*",(r[E]=r[E]||[]).unshift(x)):(r[E]=r[E]||[]).push(x)}}function Co(r,c,x,E){var I={},L=r===xr;function j(K){var Q;return I[K]=!0,l.each(r[K]||[],function(ne,ce){var pe=ce(c,x,E);if(typeof pe=="string"&&!L&&!I[pe])return c.dataTypes.unshift(pe),j(pe),!1;if(L)return!(Q=pe)}),Q}return j(c.dataTypes[0])||!I["*"]&&j("*")}function Er(r,c){var x,E,I=l.ajaxSettings.flatOptions||{};for(x in c)c[x]!==void 0&&((I[x]?r:E||(E={}))[x]=c[x]);return E&&l.extend(!0,r,E),r}function _a(r,c,x){for(var E,I,L,j,K=r.contents,Q=r.dataTypes;Q[0]==="*";)Q.shift(),E===void 0&&(E=r.mimeType||c.getResponseHeader("Content-Type"));if(E){for(I in K)if(K[I]&&K[I].test(E)){Q.unshift(I);break}}if(Q[0]in x)L=Q[0];else{for(I in x){if(!Q[0]||r.converters[I+" "+Q[0]]){L=I;break}j||(j=I)}L=L||j}if(L)return L!==Q[0]&&Q.unshift(L),x[L]}function wa(r,c,x,E){var I,L,j,K,Q,ne={},ce=r.dataTypes.slice();if(ce[1])for(j in r.converters)ne[j.toLowerCase()]=r.converters[j];for(L=ce.shift();L;)if(r.responseFields[L]&&(x[r.responseFields[L]]=c),!Q&&E&&r.dataFilter&&(c=r.dataFilter(c,r.dataType)),Q=L,L=ce.shift(),L){if(L==="*")L=Q;else if(Q!=="*"&&Q!==L){if(j=ne[Q+" "+L]||ne["* "+L],!j){for(I in ne)if(K=I.split(" "),K[1]===L&&(j=ne[Q+" "+K[0]]||ne["* "+K[0]],j)){j===!0?j=ne[I]:ne[I]!==!0&&(L=K[0],ce.unshift(K[1]));break}}if(j!==!0)if(j&&r.throws)c=j(c);else try{c=j(c)}catch(pe){return{state:"parsererror",error:j?pe:"No conversion from "+Q+" to "+L}}}}return{state:"success",data:c}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:An.href,type:"GET",isLocal:ya.test(An.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oo,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(r,c){return c?Er(Er(r,l.ajaxSettings),c):Er(l.ajaxSettings,r)},ajaxPrefilter:So(Eo),ajaxTransport:So(xr),ajax:function(r,c){typeof r=="object"&&(c=r,r=void 0),c=c||{};var x,E,I,L,j,K,Q,ne,ce,pe,le=l.ajaxSetup({},c),_e=le.context||le,je=le.context&&(_e.nodeType||_e.jquery)?l(_e):l.event,st=l.Deferred(),Xe=l.Callbacks("once memory"),Lt=le.statusCode||{},Nt={},ri={},oi="canceled",Ke={readyState:0,getResponseHeader:function(at){var kt;if(Q){if(!L)for(L={};kt=va.exec(I);)L[kt[1].toLowerCase()+" "]=(L[kt[1].toLowerCase()+" "]||[]).concat(kt[2]);kt=L[at.toLowerCase()+" "]}return kt==null?null:kt.join(", ")},getAllResponseHeaders:function(){return Q?I:null},setRequestHeader:function(at,kt){return Q==null&&(at=ri[at.toLowerCase()]=ri[at.toLowerCase()]||at,Nt[at]=kt),this},overrideMimeType:function(at){return Q==null&&(le.mimeType=at),this},statusCode:function(at){var kt;if(at)if(Q)Ke.always(at[Ke.status]);else for(kt in at)Lt[kt]=[Lt[kt],at[kt]];return this},abort:function(at){var kt=at||oi;return x&&x.abort(kt),ji(0,kt),this}};if(st.promise(Ke),le.url=((r||le.url||An.href)+"").replace(ba,An.protocol+"//"),le.type=c.method||c.type||le.method||le.type,le.dataTypes=(le.dataType||"*").toLowerCase().match(fe)||[""],le.crossDomain==null){K=A.createElement("a");try{K.href=le.url,K.href=K.href,le.crossDomain=Tr.protocol+"//"+Tr.host!=K.protocol+"//"+K.host}catch{le.crossDomain=!0}}if(le.data&&le.processData&&typeof le.data!="string"&&(le.data=l.param(le.data,le.traditional)),Co(Eo,le,c,Ke),Q)return Ke;ne=l.event&&le.global,ne&&l.active++===0&&l.event.trigger("ajaxStart"),le.type=le.type.toUpperCase(),le.hasContent=!Aa.test(le.type),E=le.url.replace(ma,""),le.hasContent?le.data&&le.processData&&(le.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(le.data=le.data.replace(pa,"+")):(pe=le.url.slice(E.length),le.data&&(le.processData||typeof le.data=="string")&&(E+=(wr.test(E)?"&":"?")+le.data,delete le.data),le.cache===!1&&(E=E.replace(ga,"$1"),pe=(wr.test(E)?"&":"?")+"_="+wo.guid+++pe),le.url=E+pe),le.ifModified&&(l.lastModified[E]&&Ke.setRequestHeader("If-Modified-Since",l.lastModified[E]),l.etag[E]&&Ke.setRequestHeader("If-None-Match",l.etag[E])),(le.data&&le.hasContent&&le.contentType!==!1||c.contentType)&&Ke.setRequestHeader("Content-Type",le.contentType),Ke.setRequestHeader("Accept",le.dataTypes[0]&&le.accepts[le.dataTypes[0]]?le.accepts[le.dataTypes[0]]+(le.dataTypes[0]!=="*"?", "+Oo+"; q=0.01":""):le.accepts["*"]);for(ce in le.headers)Ke.setRequestHeader(ce,le.headers[ce]);if(le.beforeSend&&(le.beforeSend.call(_e,Ke,le)===!1||Q))return Ke.abort();if(oi="abort",Xe.add(le.complete),Ke.done(le.success),Ke.fail(le.error),x=Co(xr,le,c,Ke),!x)ji(-1,"No Transport");else{if(Ke.readyState=1,ne&&je.trigger("ajaxSend",[Ke,le]),Q)return Ke;le.async&&le.timeout>0&&(j=e.setTimeout(function(){Ke.abort("timeout")},le.timeout));try{Q=!1,x.send(Nt,ji)}catch(at){if(Q)throw at;ji(-1,at)}}function ji(at,kt,_n,Sr){var si,wn,ai,Oi,Si,Zt=kt;Q||(Q=!0,j&&e.clearTimeout(j),x=void 0,I=Sr||"",Ke.readyState=at>0?4:0,si=at>=200&&at<300||at===304,_n&&(Oi=_a(le,Ke,_n)),!si&&l.inArray("script",le.dataTypes)>-1&&l.inArray("json",le.dataTypes)<0&&(le.converters["text script"]=function(){}),Oi=wa(le,Oi,Ke,si),si?(le.ifModified&&(Si=Ke.getResponseHeader("Last-Modified"),Si&&(l.lastModified[E]=Si),Si=Ke.getResponseHeader("etag"),Si&&(l.etag[E]=Si)),at===204||le.type==="HEAD"?Zt="nocontent":at===304?Zt="notmodified":(Zt=Oi.state,wn=Oi.data,ai=Oi.error,si=!ai)):(ai=Zt,(at||!Zt)&&(Zt="error",at<0&&(at=0))),Ke.status=at,Ke.statusText=(kt||Zt)+"",si?st.resolveWith(_e,[wn,Zt,Ke]):st.rejectWith(_e,[Ke,Zt,ai]),Ke.statusCode(Lt),Lt=void 0,ne&&je.trigger(si?"ajaxSuccess":"ajaxError",[Ke,le,si?wn:ai]),Xe.fireWith(_e,[Ke,Zt]),ne&&(je.trigger("ajaxComplete",[Ke,le]),--l.active||l.event.trigger("ajaxStop")))}return Ke},getJSON:function(r,c,x){return l.get(r,c,x,"json")},getScript:function(r,c){return l.get(r,void 0,c,"script")}}),l.each(["get","post"],function(r,c){l[c]=function(x,E,I,L){return y(E)&&(L=L||I,I=E,E=void 0),l.ajax(l.extend({url:x,type:c,dataType:L,data:E,success:I},l.isPlainObject(x)&&x))}}),l.ajaxPrefilter(function(r){var c;for(c in r.headers)c.toLowerCase()==="content-type"&&(r.contentType=r.headers[c]||"")}),l._evalUrl=function(r,c,x){return l.ajax({url:r,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(E){l.globalEval(E,c,x)}})},l.fn.extend({wrapAll:function(r){var c;return this[0]&&(y(r)&&(r=r.call(this[0])),c=l(r,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(r){return y(r)?this.each(function(c){l(this).wrapInner(r.call(this,c))}):this.each(function(){var c=l(this),x=c.contents();x.length?x.wrapAll(r):c.append(r)})},wrap:function(r){var c=y(r);return this.each(function(x){l(this).wrapAll(c?r.call(this,x):r)})},unwrap:function(r){return this.parent(r).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(r){return!l.expr.pseudos.visible(r)},l.expr.pseudos.visible=function(r){return!!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var ka={0:200,1223:204},bn=l.ajaxSettings.xhr();b.cors=!!bn&&"withCredentials"in bn,b.ajax=bn=!!bn,l.ajaxTransport(function(r){var c,x;if(b.cors||bn&&!r.crossDomain)return{send:function(E,I){var L,j=r.xhr();if(j.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(L in r.xhrFields)j[L]=r.xhrFields[L];r.mimeType&&j.overrideMimeType&&j.overrideMimeType(r.mimeType),!r.crossDomain&&!E["X-Requested-With"]&&(E["X-Requested-With"]="XMLHttpRequest");for(L in E)j.setRequestHeader(L,E[L]);c=function(K){return function(){c&&(c=x=j.onload=j.onerror=j.onabort=j.ontimeout=j.onreadystatechange=null,K==="abort"?j.abort():K==="error"?typeof j.status!="number"?I(0,"error"):I(j.status,j.statusText):I(ka[j.status]||j.status,j.statusText,(j.responseType||"text")!=="text"||typeof j.responseText!="string"?{binary:j.response}:{text:j.responseText},j.getAllResponseHeaders()))}},j.onload=c(),x=j.onerror=j.ontimeout=c("error"),j.onabort!==void 0?j.onabort=x:j.onreadystatechange=function(){j.readyState===4&&e.setTimeout(function(){c&&x()})},c=c("abort");try{j.send(r.hasContent&&r.data||null)}catch(K){if(c)throw K}},abort:function(){c&&c()}}}),l.ajaxPrefilter(function(r){r.crossDomain&&(r.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(r){return l.globalEval(r),r}}}),l.ajaxPrefilter("script",function(r){r.cache===void 0&&(r.cache=!1),r.crossDomain&&(r.type="GET")}),l.ajaxTransport("script",function(r){if(r.crossDomain||r.scriptAttrs){var c,x;return{send:function(E,I){c=l("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",x=function(L){c.remove(),x=null,L&&I(L.type==="error"?404:200,L.type)}),A.head.appendChild(c[0])},abort:function(){x&&x()}}}});var No=[],Or=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var r=No.pop()||l.expando+"_"+wo.guid++;return this[r]=!0,r}}),l.ajaxPrefilter("json jsonp",function(r,c,x){var E,I,L,j=r.jsonp!==!1&&(Or.test(r.url)?"url":typeof r.data=="string"&&(r.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Or.test(r.data)&&"data");if(j||r.dataTypes[0]==="jsonp")return E=r.jsonpCallback=y(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,j?r[j]=r[j].replace(Or,"$1"+E):r.jsonp!==!1&&(r.url+=(wr.test(r.url)?"&":"?")+r.jsonp+"="+E),r.converters["script json"]=function(){return L||l.error(E+" was not called"),L[0]},r.dataTypes[0]="json",I=e[E],e[E]=function(){L=arguments},x.always(function(){I===void 0?l(e).removeProp(E):e[E]=I,r[E]&&(r.jsonpCallback=c.jsonpCallback,No.push(E)),L&&y(I)&&I(L[0]),L=I=void 0}),"script"}),b.createHTMLDocument=function(){var r=A.implementation.createHTMLDocument("").body;return r.innerHTML="<form></form><form></form>",r.childNodes.length===2}(),l.parseHTML=function(r,c,x){if(typeof r!="string")return[];typeof c=="boolean"&&(x=c,c=!1);var E,I,L;return c||(b.createHTMLDocument?(c=A.implementation.createHTMLDocument(""),E=c.createElement("base"),E.href=A.location.href,c.head.appendChild(E)):c=A),I=z.exec(r),L=!x&&[],I?[c.createElement(I[1])]:(I=qn([r],c,L),L&&L.length&&l(L).remove(),l.merge([],I.childNodes))},l.fn.load=function(r,c,x){var E,I,L,j=this,K=r.indexOf(" ");return K>-1&&(E=qi(r.slice(K)),r=r.slice(0,K)),y(c)?(x=c,c=void 0):c&&typeof c=="object"&&(I="POST"),j.length>0&&l.ajax({url:r,type:I||"GET",dataType:"html",data:c}).done(function(Q){L=arguments,j.html(E?l("<div>").append(l.parseHTML(Q)).find(E):Q)}).always(x&&function(Q,ne){j.each(function(){x.apply(this,L||[Q.responseText,ne,Q])})}),this},l.expr.pseudos.animated=function(r){return l.grep(l.timers,function(c){return r===c.elem}).length},l.offset={setOffset:function(r,c,x){var E,I,L,j,K,Q,ne,ce=l.css(r,"position"),pe=l(r),le={};ce==="static"&&(r.style.position="relative"),K=pe.offset(),L=l.css(r,"top"),Q=l.css(r,"left"),ne=(ce==="absolute"||ce==="fixed")&&(L+Q).indexOf("auto")>-1,ne?(E=pe.position(),j=E.top,I=E.left):(j=parseFloat(L)||0,I=parseFloat(Q)||0),y(c)&&(c=c.call(r,x,l.extend({},K))),c.top!=null&&(le.top=c.top-K.top+j),c.left!=null&&(le.left=c.left-K.left+I),"using"in c?c.using.call(r,le):pe.css(le)}},l.fn.extend({offset:function(r){if(arguments.length)return r===void 0?this:this.each(function(I){l.offset.setOffset(this,r,I)});var c,x,E=this[0];if(E)return E.getClientRects().length?(c=E.getBoundingClientRect(),x=E.ownerDocument.defaultView,{top:c.top+x.pageYOffset,left:c.left+x.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var r,c,x,E=this[0],I={top:0,left:0};if(l.css(E,"position")==="fixed")c=E.getBoundingClientRect();else{for(c=this.offset(),x=E.ownerDocument,r=E.offsetParent||x.documentElement;r&&(r===x.body||r===x.documentElement)&&l.css(r,"position")==="static";)r=r.parentNode;r&&r!==E&&r.nodeType===1&&(I=l(r).offset(),I.top+=l.css(r,"borderTopWidth",!0),I.left+=l.css(r,"borderLeftWidth",!0))}return{top:c.top-I.top-l.css(E,"marginTop",!0),left:c.left-I.left-l.css(E,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent;r&&l.css(r,"position")==="static";)r=r.offsetParent;return r||et})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,c){var x=c==="pageYOffset";l.fn[r]=function(E){return he(this,function(I,L,j){var K;if(_(I)?K=I:I.nodeType===9&&(K=I.defaultView),j===void 0)return K?K[c]:I[L];K?K.scrollTo(x?K.pageXOffset:j,x?j:K.pageYOffset):I[L]=j},r,E,arguments.length)}}),l.each(["top","left"],function(r,c){l.cssHooks[c]=fo(b.pixelPosition,function(x,E){if(E)return E=vn(x,c),gr.test(E)?l(x).position()[c]+"px":E})}),l.each({Height:"height",Width:"width"},function(r,c){l.each({padding:"inner"+r,content:c,"":"outer"+r},function(x,E){l.fn[E]=function(I,L){var j=arguments.length&&(x||typeof I!="boolean"),K=x||(I===!0||L===!0?"margin":"border");return he(this,function(Q,ne,ce){var pe;return _(Q)?E.indexOf("outer")===0?Q["inner"+r]:Q.document.documentElement["client"+r]:Q.nodeType===9?(pe=Q.documentElement,Math.max(Q.body["scroll"+r],pe["scroll"+r],Q.body["offset"+r],pe["offset"+r],pe["client"+r])):ce===void 0?l.css(Q,ne,K):l.style(Q,ne,ce,K)},c,j?I:void 0,j)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(r,c){l.fn[c]=function(x){return this.on(c,x)}}),l.fn.extend({bind:function(r,c,x){return this.on(r,null,c,x)},unbind:function(r,c){return this.off(r,null,c)},delegate:function(r,c,x,E){return this.on(c,r,x,E)},undelegate:function(r,c,x){return arguments.length===1?this.off(r,"**"):this.off(c,r||"**",x)},hover:function(r,c){return this.on("mouseenter",r).on("mouseleave",c||r)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(r,c){l.fn[c]=function(x,E){return arguments.length>0?this.on(c,null,x,E):this.trigger(c)}});var xa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(r,c){var x,E,I;if(typeof c=="string"&&(x=r[c],c=r,r=x),!!y(r))return E=a.call(arguments,2),I=function(){return r.apply(c||this,E.concat(a.call(arguments)))},I.guid=r.guid=r.guid||l.guid++,I},l.holdReady=function(r){r?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=M,l.isFunction=y,l.isWindow=_,l.camelCase=ge,l.type=k,l.now=Date.now,l.isNumeric=function(r){var c=l.type(r);return(c==="number"||c==="string")&&!isNaN(r-parseFloat(r))},l.trim=function(r){return r==null?"":(r+"").replace(xa,"$1")};var Ta=e.jQuery,Ea=e.$;return l.noConflict=function(r){return e.$===l&&(e.$=Ea),r&&e.jQuery===l&&(e.jQuery=Ta),l},typeof o>"u"&&(e.jQuery=e.$=l),l})}(xn)),xn.exports}var Ho=Fo();const g=Rr(Ho),pr=class pr extends URL{constructor(o,n,s){super(o,n);it(this,sn,!0);Me(this,sn,!!s)}getParam(o){return this.searchParams.get(o)??""}paramsAsObject(){const o=this.searchParams,n=Object.fromEntries(o);for(const s in n)n[s]===""&&(n[s]=null);return n}replaceParam(o,n){let s=this;return ve(this,sn)&&(s=new pr(this.toString())),s.setParam(o,n),s}};sn=new WeakMap;let Gn=pr;class Zn extends Gn{constructor(e,o){super(e,o,!0)}}const we=function(){const t={};return{get:function(e,o){return we.has(e)?t[e]:o},set:function(e,o){return t[e]=o},has:function(e){return typeof t[e]<"u"},req:function(e){return we.has(e)||alert(e+" must be set, but it isn't."),we.get(e)},add:function(e,o){return we.has(e)||we.set(e,[]),t[e].push(o)},merge:function(e){for(var o in e)e.hasOwnProperty(o)&&we.set(o,e[o])}}}();(t=>{const e=a=>{const h={};return t.each(a,(u,p)=>{h[u]=p}),h},o=(a,h,u)=>{const p=e(a);return p[h]=u,p};t.fn.down=function(a){return typeof a>"u"?this.children(":eq(0)"):this.find(`${a}:first`)},t.fn.up=t.fn.closest,t.fn.Each=function(a){this.each(function(){a(this)})},t.Each=(a,h)=>t.each(a,(u,p)=>{h(p,u)}),t.method=(a,h)=>(...u)=>{a[h].apply(a,u)},t.invoke=(a,h,u)=>{let p;return u!=null&&u.length?p=T=>T[h].apply(T,u):p=T=>T[h](),t.map(a,p)},t.endsWith=(a,h)=>a.substr(a.length-h.length)===h,t.beginsWith=(a,h)=>a.substr(0,h.length)===h,t.fn.serialize=function(a){return a?this.serializeArray():t.param(this.serializeArray())},t.fn.isLoaded=function(){let a=!0;return this.find("img").each(function(){this.fail||this.tagName==="IMG"&&(typeof this.naturalWidth<"u"?a=a&&this.complete:typeof this.complete=="boolean"?a=a&&this.naturalWidth:a=a&&this.width)}),a},t.fn.loaded=function(a,h){let u=0;const p=h||{};p.period===void 0&&(p.period=100),p.timeout===void 0&&(p.timeout=5e3);const T=()=>{t(this).isLoaded()||u>p.timeout?(a(this),this._loaded_timer&&clearTimeout(this._loaded_timer)):(u+=p.period,this._loaded_timer=setTimeout(T,p.period))};T()},t.fn.enable=function(){const a=t(this);return a.is("form")?a.find("input, textarea, select, button").enable():a.is("a")?a.css({cursor:a.data("cursor")||"pointer","pointer-events":a.data("pointer_events")||"auto"}):a.each(()=>{a.prop("disabled",!1)}),this},t.fn.disable=function(){const a=t(this);return a.is("form")?a.find("input, textarea, select, button").disable():a.is("a")?(a.data("cursor",a.css("cursor")),a.data("pointer_events",a.css("pointer-events")),a.css({"pointer-events":"none",cursor:"default"})):a.prop("disabled",!0),this},t.fn.enableClickOutside=function(a){const h=a!==!1;return this.__click_outside_enabled=h,this.__document_ref||(this.__document_ref=t(document)),this.__clickOutside_function||(this.__clickOutside_function=u=>{t(u.target).closest(this).length||this.trigger("clickOutside")}),h?this.__document_ref.on("click",this.__clickOutside_function):this.__document_ref.off("click",this.__clickOutside_function),this},t.fn.disableClickOutside=function(){return this.enableClickOutside(!1)},t.fn.clickOutside=function(a){return this.__click_outside_enabled||this.enableClickOutside(!0),this.on("clickOutside",a)},t.fn.setUploadVal=function(a){let h=a;return typeof h>"u"&&(h=this.val()),this.is('input[type="file"]')&&this.next().next().val(this.val()),this},t.fn.validate=function(a){return this.is("form")&&this.bindValidator(new NgFormValidator(this,a)),this},t.fn.focusToEnd=function(){return this.each(function(){const a=t(this).val();t(this).focus().val("").val(a)})},(()=>{const a=h=>t(h).find('button[type!="reset"][type!="button"], input[type="submit"]');t.fn.disableSubmit=function(){a(this).disable()},t.fn.enableSubmit=function(){a(this).enable()}})(),t.fn.preventDoubleSubmit=function(){this.submit(this.disableSubmit)},t.fn.allowDoubleSubmit=function(){this.off("submit",this.disableSubmit)},(()=>{const a="validation",h=u=>{if(u)return p=>{if(u.validate(),!u.isValid())return u.inform(),p.stopImmediatePropagation(),!1}};t.fn.bindValidator=function(u){const p=h(u);return this.data(a,p),this.data("validator",u),this.trigger("submit",p)},t.fn.unbindValidator=function(){return this.off("submit",this.data(a))}})(),t.fn.exists=function(){return this.length>0},t.fn.Text=()=>t.map(function(){return t(this).text()}).get();const n=(a,h)=>typeof a=="function"?[a,h]:typeof a=="object"?a.concat([h]):h;t.fn.ajaxSubmit=function(a,h){let u=h||{},p,T,v="post";if(this.is("form")||this.is("button")&&this.attr("type")==="submit"){if(this.is("form"))p="form",T=this.attr("action");else{if(!this.attr("formaction")||!this.attr("formmethod"))throw"Must get form action and method";p="button",T=this.attr("formaction"),v=this.attr("formmethod")}return u=o(u,p,this),t.ajaxWait(v,T,null,a,u)}},t.fn.ajaxify=function(a,h){if(this.is("form")){const u=this,p=h||{};return p.form=(p==null?void 0:p.form)||this,this.on("click","button",function(){return p.data=u.serializeArray(),p.data.push({name:this.name,value:this.value}),t(u).ajaxSubmit(a,p),!1}),this.submit(function(){return t(this).ajaxSubmit(a,p),!1})}},t.fn.ajaxifyConfirmation=function(a,h){let u=h;if(t(this).is("a"))return u===void 0&&(u=!0),t(this).ajaxifyLink({success_func:u},a);throw"Not sure what to do here yet."},t.fn.ajaxifyLink=function(a,h){let u=a,p=h;if(typeof u=="string"&&typeof p=="function"){const T=u;u={success_func:p},p=T}else((typeof u=="string"||typeof u=="function")&&typeof p>"u"||typeof u=="function")&&(p=u,u=!0);u=u||{},p=p||!1,u===!0&&(u={},u.success_func=!0),typeof u.data>"u"&&(u.data={}),typeof u.data.userkey>"u"&&(u.data.userkey=we.get("uek")),p===!1&&u.confirmation&&(p=u.confirmation),t(this).off().on("click",function(T){if(T.preventDefault(),u.onclick!==void 0&&u.onclick(this),p){if(typeof p=="string"){if(!confirm(p))return!1}else if(typeof p=="function"){const m=p(this);if(m===!1)return!1;m===!0?u.success_func=!0:m.success_func!==void 0&&(u.success_func=m.success_func),m.error!==void 0&&(u.error=m.error)}}let v;if(t(this).is("a"))v=this.href;else if(t(this).is("button")&&t(this).attr("formaction"))v=t(this).attr("formaction");else throw"Don't know how to get URL from this?";return t.ajaxWait("post",v,null,null,u),!1})},t.fn.ajaxClick=function(a,h,u){const p=t(this),T=d=>{const b=p.attr(d).split("_"),y=b.pop();return[b.join("_"),y]},v=p.attr("name")||T("rel")[0]||T("id")[0],m=p.attr("value")||T("rel")[1]||T("id")[1],f=[{name:v,value:m}];return t.ajaxWait("post",a,f,h,u),!1},t.fn.ajaxKeyup=function(a,h,u){const p=[{name:t(this).attr("name"),value:t(this).attr("value")}];return t.ajaxWait("get",a,p,h,u),!1},t.fn.formifyLink=function(a){if(!this.is("a"))return console.error("formifyLink can only be used on <a> tags."),!1;let h=a;typeof h=="function"?h=h(t(this)):typeof h!="object"&&(h={}),h.userkey||(h.userkey=we.get("uek"));const u=t(this).attr("href"),p=t("<form>").attr("action",u).attr("method","post");t("body").prepend(p);for(const T in h){const v=typeof h[T]=="function"?h[T](t(this)):h[T],m=t("<input>");m.attr("type","hidden").attr("name",T).val(v),p.append(m)}return this.attr("href","#"),this.on("click",()=>(p.trigger("submit"),!1)),p},t.fn.getSelected=function(){if(this.is("select")){const a=this.get(0);return a?(a.selectedIndex||(a.selectedIndex=0),t(a.options[a.selectedIndex])):t()}},t.fn.scrollTo=function(a){const h=this.offset().top,u=a||{};u.duration=u.duration||500,t("html:not(:animated), body:not(:animated)").animate({scrollTop:h-20},u)},(()=>{const u=function(){t(this).animate({opacity:1},600)},p=function(){t(this).slideUp(600)};t.fn.appear=function(){return this.css("opacity",0).slideDown(600,u)},t.fn.disappear=function(){return this.animate({opacity:0},{duration:600,complete:p})},t.fn.animatedSwitch=function(){return this.is(":visible")?this.disappear():this.appear()}})(),(()=>{const a=[];let h=0;const u=p=>{for(let T=0;T<a.length;++T)T!==p&&a[T].is(":visible")&&a[T].fadeOut(),--h};t.fn.fadeable=function(){a.length||t(document.body).click(()=>{h&&u()}),this.each(function(){let p,T;const v=t(this);p=v.is("div.select")?v:v.up("div.select"),T=p.down("ul.filtermenu"),T.length&&t.inArray(T,a)<0&&(a.push(T),T.data("fading_index",a.length-1).hide().css("overflow","visible"),p.click(m=>{if(m.target.tagName.toLowerCase()!=="a")return T.is(":hidden")?(++h,T.fadeIn(300,function(){t(this).show()}),u(T.data("fading_index"))):(T.fadeOut(),--h),!1}))})}})(),t.isString=a=>typeof a=="string"||a instanceof String,t.reverseString=a=>a.split("").reverse().join(""),t.unparam=a=>{const h={};return a.split("&").Each(u=>{const p=u.split("=");h[p[0]]=p[1]}),h},t.isInteger=a=>typeof a=="number"&&Number.parseInt(a,10)===a,t.range=(a,h,u)=>{let p=a,T=h,v,m=1;const f=[];let d;if(!t.isInteger(p)&&!t.isString(p)||typeof p!=typeof T)return f;for(typeof u<"u"&&t.isInteger(u)&&t.isInteger(p)&&(m=u),t.isString(p)&&(p=Number.parseInt(p.charCodeAt(0),10),T=Number.parseInt(T.charCodeAt(0),10)),p>T&&(v=p,p=T,T=v),d=p;d<=T;d+=m)f.push(d);return f},t.strip_text=(a,h)=>{let u=a,p=h;return typeof p>"u"&&(p=!0),p&&(u=u.toLowerCase()),u.replace(/[^a-z0-9]/gi," ").replace(/\s+/g,"-").replace(/(^-+|-+$)/,"")},t.rInArray=(a,h)=>t.inArray(a,h)!==-1,t.any=(a,h)=>{const u=a.length;for(let p=0;p<u;p++)if(h(a[p]))return!0;return!1},t.all=(a,h)=>!t.any(a,u=>!h(u)),t.nub=a=>{const h=[],u=a.length;let p,T;for(let v=0;v<u;++v){for(T=!1,p=v+1;p<u&&!T;++p)T=a[p]===a[v];T||h.unshift(a[v])}return h},t.$=a=>t.isString(a)?t(`#${a}`):t(a),t.windowHeight=()=>window.innerHeight?window.innerHeight:t(window).height(),t._ngScriptsLoadedCache=[];const s=function(){this.uid&&t.ajax.stopWaiting(this.uid),window.QUnit&&(window.QUnit.ajaxing=!1),enableSelectFacades(),t("a").each(function(){t(this).data("clicked",!1)}),typeof ngutils<"u"&&ngutils.event.dispatch(ngutils.event.ajaxComplete,{url:window.location.href})};t.showAjaxError=a=>{if(typeof we<"u"&&we.get("silence_ajax_errors")){console.warn("Error received, but ignoring due to config.");return}const h=()=>{var u;if(a!=null&&a.error){if(typeof ngutils<"u"&&typeof ngutils.blackout=="function"){new ngutils.blackout({remove_on_hide:!0}).show(t(a.error));return}a.errors=[a.error]}if((u=a==null?void 0:a.errors)!=null&&u.join){const p=a.errors.join(`
`);a.selector?t(a.selector).html(p):alert(p)}else alert("Server error.  Please wait a moment and try again.")};if(a!=null&&a.scripts&&a.scripts.length>0){const u=[];for(const T of a.scripts){if(t._ngScriptsLoadedCache.indexOf(T)>=0||(t._ngScriptsLoadedCache.push(T),t(`script[src='${T}']`).length>0))return;u.push(T)}let p=u.length;if(p>0){for(const T of u)t.getScriptXD(T,()=>{p--,p<1&&h()});return}}h()},t.checkAjaxErrorOld=a=>{const h="Server error.  Please wait a moment and try again.";if(!a)return alert(h),!1;const u=t(a).find("errormsg");return u.length?(alert(u.text()),!1):!0},(()=>{const a=window.XMLHttpRequest.prototype.open,h=window.XMLHttpRequest.prototype.send,u=function(){if(this.readyState,this.readyState===4){s.call(this);const p=this.getResponseHeader("Ng-Request-Status")==="error",T=typeof we<"u"&&we.get("silence_ajax_errors");if(p&&!T){console.table(this);let v;try{v=JSON.parse(this.responseText)}catch(m){v={error:"Unknown problem!"},console.warn(m)}t.showAjaxError(v);return}}};window.XMLHttpRequest.prototype.open=function(...p){this.addEventListener("readystatechange",u),a.apply(this,p)},window.XMLHttpRequest.prototype.send=function(...p){this.addEventListener("readystatechange",u),h.apply(this,p)}})(),(()=>{const a={},h={};t.ajax.startWaiting=(u,p,T)=>{if(u.uid=t.now(),p&&(a[u.uid]=t(p).find(".waiter").removeClass("waiter").addClass("waiter_on")),T){const v=t(T);a[u.uid]=v,v.addClass("waithere")}},t.ajax.stopWaiting=u=>{a[u]&&(a[u].removeClass("waiter_on").addClass("waiter"),delete a[u]),h[u]&&(h[u].removeClass("waithere"),delete h[u])}})(),t.ajaxWait=(a,h,u,p,T)=>{let v=u,m=p;const f=T||{};let d=!1;f.form||f.button?(f.preventDouble!==!1&&(f.error=n(f.error,()=>{f.form?f.form.enableSubmit():f.button.enable()}),f.form?f.form.disableSubmit():f.button.disable()),v||(f.data?v=f.data:f.form&&(v=f.form.serializeArray()))):!v&&f.data&&(v=f.data),f.additional_data&&f.form&&(t.isArray(f.additional_data)?t.merge(v,f.additional_data):v.push(f.additional_data)),f.XD&&(f.xhrFields={withCredentials:!0}),f.xhrFields&&f.xhrFields.withCredentials===!0&&(d=!0),v===null&&(v={}),we!==void 0&&we.get("ng_design",null)&&(Array.isArray(v)?t.merge(v,[{name:"___ng_design",value:we.get("ng_design")}]):v.___ng_design=we.get("ng_design")),!m&&f.success_func&&(m=f.success_func),m===!0&&(m=y=>{if(y!=null&&y.success&&alert(y.success),y!=null&&y.url)return window.location.href=y.url,!0;window.location.reload(!0)}),d&&(v||(v=[]),v.push({name:"isAjaxRequest",value:1}));const b=t.extend({type:a,url:h,data:v,success:m},f);return t.ajax.startWaiting(t.ajax(b),f.form,f.element)},t.ajax.replace=(a,h)=>{for(let u=0;u<h.length;u++)t(h[u]).replaceWith(t(h[u],a))},t.Event.prototype.closest=function(a){let h=this.target;for(;h&&!t(h).is(a);){if(h===this.currentTarget)return;h=h.parentNode}return h},t.fn.insertRoundCaret=function(a){let h,u,p,T,v,m,f,d,b,y,_,A,w;return scrollTop,this.each(function(){h=`[${a}]`,u=`[/${a}]`,document.selection?(p=this.value,this.focus(),v=document.selection.createRange(),m=v.text,f=h+v.text+u,v.text=f,document.selection.empty(),this.focus(),T=this.value,y=T.lastIndexOf(f),d=this.createTextRange(),b=p.substring(0,y).split(`
`).length,y=y+3-b+a.length,_=m.length,d.move("character",y),d.moveEnd("character",_),d.select()):this.selectionStart||Number.parseInt(this.selectionStart)===0?(A=this.selectionStart,w=this.selectionEnd,scrollTop=this.scrollTop,this.value=this.value.substring(0,A)+h+this.value.substring(A,w)+u+this.value.substring(w,this.value.length),this.focus(),this.selectionStart=A+h.length,this.selectionEnd=w+h.length,this.scrollTop=scrollTop):(this.value+=h+u,this.focus())})},t.fn.watchLinks=function(a){const u={parentNode:".podcontent",trustedDomains:[],spamDomains:[],...a||{}},p=new LinkWatcher;return p.setParentNode(u.parentNode),p.setTrustedDomains(u.trustedDomains),p.setSpamDomains(u.spamDomains),p.pushElements(t(this)),p.watch(),this},t.fn.watchEmbeds=function(){let u,p,T;const v={youtube:[/^https?:\/\/(www\.)?((youtube\.com\/(.*?v=|embed\/))|youtu\.be\/)([a-zA-Z0-9_\-]+).*$/,5,"video"],vimeo:[/^https?:\/\/(www\.)?vimeo\.com\/([0-9]+)\/?$/,2,"video"],soundcloud:[/^https?:\/\/(www\.)?(soundcloud\.com\/[^\/]+\/?([^\/]+\/?)?).*$/,2,"audio"]},m=A=>{A.off("click").on("click",function(){return t(this).next().toggle(),!1})},f=(A,w)=>{let O=A;const S=(l=>{let C;return C=l.match(/(\?|#)t=((\d+)m(\d+)s)/),C!==null?Number.parseInt(C[3],10)*60+Number.parseInt(C[4],10):(C=l.match(/t=(\d+)/),C!==null?C[1]:null)})(w);S!==null&&(O=`${O}?start=${S.toString()}`);const R=`width="590" height="332" src="${O}" frameborder="0" allowfullscreen`;return t(`<div style="display:none; margin-top: 10px; width: 100%; height: auto;"><iframe ${R}></iframe></div>`)},d=A=>{const w=t('<div style="display:none; margin-top: 10px; width: 100%; height: auto;"></div>');return w[0].innerHTML=A,w},b=(A,w,O)=>{O.css("cursor","wait");const k=()=>{O.css("cursor","pointer")},S=()=>{O.off("click"),k(),window.open(O.attr("href"))},R=(l,C,M)=>{typeof M<"u"?p=l(C,M):p=l(C.html),O.after(p),p.slideDown(()=>{m(O),k()})};switch(p=null,A){case"youtube":R(f,`https://www.youtube.com/embed/${w}`,O.attr("href"));break;case"vimeo":{const l=`https://vimeo.com/${w}`;t.get("https://vimeo.com/api/oembed.json",{url:l,maxwidth:590,maxheight:332},C=>{R(d,C)},"json").fail(S);break}case"soundcloud":t.get("https://soundcloud.com/oembed",{url:`https://${w}`,format:"json",maxwidth:590,maxheight:332,iframe:!0},l=>{R(d,l)},"json").fail(S);break;default:console.log("Bad site");return}return p},y={};t(this).each(function(A){if(u=t(this),T=u.attr("href"),typeof T>"u"||T===!1)return this;for(const w in v)if(vi(v,w)){const O=T.match(v[w][0]);O&&(y[A]=[w.toString(),O[v[w][1]],u,O,A])}});const _=t(this);return t(_).click(function(){const A=_.index(this);if(vi(y,A))return b.apply(this,y[A]),delete y[A],!1;t(this).off("click")}),this},(()=>{const a=(()=>{const h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,u=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,p=/[^-+\dA-Z]/g,T=(v,m)=>{let f=String(v);const d=m||2;for(;f.length<d;)f=`0${f}`;return f};return(...v)=>{let m=v==null?void 0:v[0],f=v==null?void 0:v[1],d=v==null?void 0:v[2];const b=a;if(v.length===1&&Object.prototype.toString.call(m)==="[object String]"&&!/\d/.test(m)&&(f=m,m=void 0),m=m?new Date(m):new Date,Number.isNaN(m))throw SyntaxError("invalid date");f=String(b.masks[f]||f||b.masks.default),f.slice(0,4)==="UTC:"&&(f=f.slice(4),d=!0);const y=d?"getUTC":"get",_=m[`${y}Date`](),A=m[`${y}Day`](),w=m[`${y}Month`](),O=m[`${y}FullYear`](),k=m[`${y}Hours`](),S=m[`${y}Minutes`](),R=m[`${y}Seconds`](),l=m[`${y}Milliseconds`](),C=d?0:m.getTimezoneOffset(),M={d:_,dd:T(_),ddd:b.i18n.dayNames[A],dddd:b.i18n.dayNames[A+7],m:w+1,mm:T(w+1),mmm:b.i18n.monthNames[w],mmmm:b.i18n.monthNames[w+12],yy:String(O).slice(2),yyyy:O,h:k%12||12,hh:T(k%12||12),H:k,HH:T(k),M:S,MM:T(S),s:R,ss:T(R),l:T(l,3),L:T(l>99?Math.round(l/10):l),t:k<12?"a":"p",tt:k<12?"am":"pm",T:k<12?"A":"P",TT:k<12?"AM":"PM",Z:d?"UTC":(String(m).match(u)||[""]).pop().replace(p,""),o:(C>0?"-":"+")+T(Math.floor(Math.abs(C)/60)*100+Math.abs(C)%60,4),S:["th","st","nd","rd"][_%10>3?0:(_%100-_%10!==10)*_%10]};return f.replace(h,P=>P in M?M[P]:P.slice(1,P.length-1))}})();a.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(h,u){return a(this,h,u)}})(),(()=>{const a=u=>{const p=t.map(u.split(/[^0-9]/),T=>Number.parseInt(T,10));return new Date(p[0],p[1]-1||0,p[2]||1,p[3]||0,p[4]||0,p[5]||0,p[6]||0)},h=function(u,p,T){const v="down",m="up",f=T||{},d=a(u),b=a(p);let y=null;const _=t.extend({format:"fullDate",html_element:null,interval:10,direction:v,timeup_message:null,timeup_callback:null,writing_output:!0,writing_output_method:null,verbose:!1,ucfirst:!1},f),A=(S,R,l)=>{let C,M,P;return P=_.format==="shortDate",R?(C=Math.round(S/3600),C===1?P?M="1 hr":M="an hour":P?M=`${C} hr`:M=`${C} hours`,P||(M=`about ${M}`)):l?(C=l,P?M=`${C} min`:C===1?M="a minute":M=`${C} minutes`):P?M="&lt; 1 min":M="a few seconds",P||(_.direction===v?M=`${M} ago`:M=`${M} left`),_.ucfirst&&(M=M.charAt(0).toUpperCase()+M.substr(1)),M},w=(S,R,l)=>{const C=[],M=Number.parseInt(S,10),P=Number.parseInt(R,10),N=Number.parseInt(l,10);let D=!1;const B=(G,Y)=>{let H=Y;return G!==1&&(H=`${H}s`),`${G} ${H}`};if(M>24)return"";(M>0||_.verbose)&&(D=!0,C.push(B(M,"hour"))),(P>0||_.verbose||D)&&(D=!0,C.push(B(P,"minute"))),(N>0||_.verbose||D)&&C.push(B(N,"second"));const F=C.pop();return C.length?`${C.join(", ")} and ${F}`:F},O=S=>{const R=Math.floor(S/3600),l=Math.floor((S-R*3600)/60),C=S-R*3600-l*60;if(_.writing_output_method!==null)if(_.writing_output_method===!0)_.html_element.html(w(R,l,C));else{if(typeof _.writing_output_method=="string")throw"Did you forget something?";_.html_element.html(_.writing_output_method(S,R,l,C))}else _.html_element.html(A(S,R,l))},k=()=>{const S=Math.round(b-d)/1e3;_.direction===m&&d>b||S<=0&&_.direction===m||_.direction===v&&d>b||S>=86400&&_.direction===v?(_.timeup_callback!==null?_.timeup_callback():_.timeup_message!==null&&_.writing_output?_.html_element.html(_.timeup_message):_.writing_output&&_.html_element.html(d.format(_.format)),y&&window.clearTimeout(y)):(_.writing_output&&O(S),y=window.setTimeout(()=>{_.direction===v?b.setSeconds(b.getSeconds()+_.interval):d.setSeconds(d.getSeconds()+_.interval),k()},1e3*_.interval))};return{setOurInterval:S=>{_.interval=S},begin:S=>(_.html_element=t(S),_.html_element&&k(),this),setFormat:S=>{_.format=S},setDateAtTimeFormat:()=>{_.format="mm/dd/yy @ hh:MM TT"},setDirection:S=>{if(!t.rInArray(S,[m,v]))throw"Invalid direction.";_.direction=S},setTimeupMessage:S=>{_.timeup_message=S},setTimeupCallback:S=>{_.timeup_callback=S},setWritingOutput:S=>{_.writing_output=S},setWritingOutputMethod:S=>{_.writing_output_method=S}}};t.couNtinGDate=h,t.fn.couNtinGDate=function(u,p,T){let v=u,m=p,f=T;return(typeof v>"u"||typeof v=="object")&&(typeof v=="object"&&(f=v),v=t(this).html().trim()),typeof m>"u"&&(m=we.get("datetime",!1)),f=f||{},new t.couNtinGDate(v,m,f).begin(t(this))},t.couNtinGManyDatesFromNow=(u,p)=>{const T=we.get("datetime",!1);if(!T)return!1;const v=t(u);return v&&v.each(function(){const m=t(this).html().trim();m.match(/^\d+-\d+-\d+ \d+:\d+:\d+$/)&&t(this).couNtinGDate(m,T,p)}),v}})(),(()=>{const a=p=>p.replace(/[\[\]]/g,"\\$&"),h=(p,T)=>{const v=T||window.location.href;return new Zn(v).getParam(a(p))},u=(p,T,v)=>new Zn(T).replaceParam(p,v).toString();t.getUrlParameterByName=(p,T)=>h(p,T),t.fn.getUrlParameterByName=function(p){const T=t(this);if(T.is("a"))return h(p,T.attr("href"));if(T.is("form"))return h(p,T.attr("action"));throw"Not sure how to getUrlParameterByName for this."},t.replaceUrlParameterByName=(p,T,v)=>u(p,T,v),t.fn.replaceUrlParameterByName=function(p,T){const v=t(this);let m;if(v.is("a")){if(!v.attr("href"))return;m=u(p,v.attr("href"),T),v.attr("href",m);return}if(v.is("form")){m=u(p,v.attr("action"),T),v.attr("action",m);return}throw"Don't know how to replace this."}})(),t.fn.scrollWithPage=function(a){const h={duration:200,easing:"swing",...a||{}},u=t(this),p=u.offset().top,T=u.css("position");let v=u.outerHeight(),m,f=0,d=null,b;const y=t(document).height();t(window).resize(()=>{d=null}),t(document).on("scroll",function(){v=u.outerHeight(),t(this).scrollTop()>t(window).height()-v?(m=t(this).scrollTop()-p,t(window).height()<v&&f<t(this).scrollTop()&&(m-=v-t(window).height())):m=0,f=t(this).scrollTop(),h.animate===void 0||h.animate!==!1?(t(document).scrollTop()+v>y&&(m-=v),u.animate({marginTop:m},h.duration,h.easing)):(d===null&&t(window).height()>v&&(d=!0),t(this).scrollTop()>p&&(d===!0||t(window).height()>v)?(t(window).height()<v?b=t(window).height()-v:b=0,u.css({position:"fixed",top:b})):u.css({position:T})),d===null&&(d=!1)})},t(document).ready(()=>{t("a").on("click",function(){const a=t(this),h=a.data("clicked"),u=a.hasClass("mod")||a.hasClass("dim");if(h&&Number.parseInt(t.now()-h,10)<1e3&&!u)return!1;u||a.data("clicked",null),a.attr("target")||a.data("clicked",t.now())})})})(g),((t,e,o,n)=>{const s="textareaAutoSize",a=`plugin_${s}`,h=T=>T.replace(/\s/g,"").length>0;class u{constructor(v,m){this.element=v,this.$element=t(v),this.init()}init(){const v=Number.parseInt(this.$element.css("paddingBottom"))+Number.parseInt(this.$element.css("paddingTop"))+Number.parseInt(this.$element.css("borderTopWidth"))+Number.parseInt(this.$element.css("borderBottomWidth"))||0;h(this.element.value)&&this.$element.height(this.element.scrollHeight-v),this.$element.on("input keyup",function(){const m=t(e),f=m.scrollTop();t(this).height(0).height(this.scrollHeight-v),m.scrollTop(f)})}}t.fn[s]=function(T){return this.each(function(){t.data(this,a)||t.data(this,a,new u(this,T))}),this};const p=(T,v)=>{if(v.toUpperCase()==="DELETE")return null;let m=T||{};return typeof m=="string"&&!m.includes("isAjaxRequest")?m+="&isAjaxRequest=1":typeof m=="object"&&m.isAjaxRequest===void 0&&(m.isAjaxRequest=1),m};t.each(["delete","get","post","put"],(T,v)=>{t[`${v}XD`]=(m,f,d,b)=>{let y=f,_=d,A=b;return t.isFunction(y)&&(A=A||_,_=y,y={}),A!=="json"&&(y=p(y,v)),t.ajax(t.extend({url:m,type:v,dataType:A,data:y,success:_,xhrFields:{withCredentials:!0}},t.isPlainObject(m)&&m))}}),t.getJSONXD=(T,v,m)=>t.getXD(T,v,m,"json"),t.getScriptXD=(T,v)=>t.getXD(T,void 0,v,"script")})(g,window),g.fx.interval=1/45*1e3,g.noConflict(),((t,e,o)=>{if(!("onprogress"in t.ajaxSettings.xhr()))return;const s=t.ajaxSettings.xhr;t.ajaxSettings.xhr=function(...a){const h=s.apply(this,a);return h instanceof e.XMLHttpRequest&&h.addEventListener("progress",this.progress,!1),h.upload&&h.upload.addEventListener("progress",this.progress,!1),h}})(g,window),window.jQuery=g,window.$=g;const ke={ajaxComplete:"ajax-completed",resize:"resize",closeall:"closeall",closeMenus:"closeMenus",newNotifications:"newNotifications",topMenuOpen:"topMenuOpen",userBlockUpdated:"user-block-updated",userBlocksUpdated:"user-blocks-updated",emoteSetChanged:"emote-set-changed",emoteSelectLoaded:"emote-select-loaded",tagsUpdated:"tag-collection-updated",taskStarted:"task-started",taskCompleted:"task-completed",blackoutClosed:"blackout-closed",listeners:[],addListener:(t,e,o)=>{typeof ke.listeners[t]>"u"&&(ke.listeners[t]=[]);let n=e;if(o){const s=n;n=()=>{s(),ke.removeListener(t,n)}}ke.listeners[t].unshift(n)},removeListener:(t,e)=>{if(typeof ke.listeners[t]>"u")return;const o=ke.listeners[t].indexOf(e);o>=0&&ke.listeners[t].splice(o,1)},removeAll:t=>{typeof ke.listeners[t]>"u"||(ke.listeners[t]=[])},dispatch:(t,e)=>{let o;if(typeof ke.listeners[t]>"u")return;const n=ke.listeners[t].slice(0);for(o=0;o<n.length;o++)if(n[o](e)===!1)return!1;return!0}},Uo=t=>{const e=["KB","MB","GB","TB","PB","EB"];let o=t;if(o===0)return o+e[0];let n=-1;do o=o/1e3,n++;while(o>999);return Math.max(o,.1).toFixed(1)+e[n]},zo=512,Qn=(t,e,o)=>{const n=e||"",s=o||zo,a=atob(t),h=[];for(let u=0;u<a.length;u+=s){const p=a.slice(u,u+s),T=new Array(p.length),v=p.length;for(let f=0;f<v;f++)T[f]=p.charCodeAt(f);const m=new Uint8Array(T);h.push(m)}return new Blob(h,{type:n})},en=t=>{if(t instanceof XPathResult){let e;const o=[];for(;e=t.iterateNext(),e!==null;)o.push(e);return o}return[...t]},Wo=t=>{if(!navigator.clipboard){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const n=document.execCommand("copy")?"successful":"unsuccessful";console.log(`Fallback: Copying text command was ${n}`)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e);return}navigator.clipboard.writeText(t).then(()=>{},e=>{console.error("Async: Could not copy text: ",e)})},Yn=(t,e,o)=>{let n=o;n===void 0&&(n=null);const s=e.split(".");if(s.length===1)return t[e]===void 0?n:t[e];const a=s.reduce((h,u)=>h==null?void 0:h[u],t);return a===void 0?n:a},Pt={blacked_out:!1,scrollBarWidth:0,initFollowButton:null,initFavoriteButton:null,initReactionLink:null,initReactionTotals:null,reactionBlackout:null};Pt.b64toBlob=Qn,Pt.textToClipboard=Wo,Pt.val_from_object=Yn,Pt.camelize=t=>{const e=t.toLowerCase().replace(/[-_\s.]+(.)?/g,(o,n)=>n?n.toUpperCase():"");return e.substring(0,1).toLowerCase()+e.substring(1)},Pt.slugify=t=>{let e=t.replace(/^\s+|\s+$/g,"");e=e.toLowerCase();const o="ÃÃÃÃÃÃÄÃÄÄÃÄÃÃÃáº¼ÄÈÃÃÃÃÅÃÃÃÃÃÃÃÅÅÅ Å¤ÃÅ®ÃÃÃÃÅ¸Å½Ã¡Ã¤Ã¢Ã Ã£Ã¥ÄÃ§ÄÄÃ©ÄÃ«Ã¨Ãªáº½ÄÈÃ­Ã¬Ã®Ã¯ÅÃ±Ã³Ã¶Ã²Ã´ÃµÃ¸Ã°ÅÅÅ¡Å¥ÃºÅ¯Ã¼Ã¹Ã»Ã½Ã¿Å¾Ã¾ÃÄÄÃÃaÂ·/_,:;",n="AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------";for(let s=0,a=o.length;s<a;s++)e=e.replace(new RegExp(o.charAt(s),"g"),n.charAt(s));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e},Pt.logOut=t=>{const e=g(t).attr("data-url"),o=g("<form>").attr("action",e).attr("method","post"),n=g("<input>").attr({type:"hidden",name:"userkey",value:we.get("uek")});return o.append(n),g("body").prepend(o),o.submit(),!1},Pt.textToClipboard=t=>{if(!navigator.clipboard){const e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const n=document.execCommand("copy")?"successful":"unsuccessful";console.log(`Fallback: Copying text command was ${n}`)}catch(o){console.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(e);return}navigator.clipboard.writeText(t).then(()=>{},e=>{console.error("Async: Could not copy text: ",e)})};const tn={};tn.lock=t=>{if(!!!we.get("ismobile")&&!Pt.scrollBarWidth){const n=g("body").first(),s=n.outerWidth();n.css("overflow","hidden");const a=n.outerWidth();n.css("overflow",""),Pt.scrollBarWidth=a-s}if(!t||t.length<1||t.is("[data-locked-layer]"))return;t.attr("data-locked-layer",1),t.css("overflow","hidden");const o=n=>{n.css("width",`calc(100% - ${Pt.scrollBarWidth}px)`),n.css("margin-right",`${Pt.scrollBarWidth}px`)};Pt.scrollBarWidth&&(t.is("body")?(o(g("#outer-skin")),o(g("#notification-bar")),g("div.skin-wrapper.fixed").css("left",`-${Pt.scrollBarWidth/2}px`)):o(t))},tn.unlock=t=>{if(!t||t.length<1||!t.is("[data-locked-layer]"))return;t.removeAttr("data-locked-layer"),t.css("overflow","");const e=o=>{o.css("width",""),o.css("margin-right","")};Pt.scrollBarWidth&&(t.is("body")?(e(g("#outer-skin")),e(g("#notification-bar")),g("div.skin-wrapper.fixed").css("left","")):e(t))};const ye=function(t){if(ye.autoID++,this.id=ye.autoID,this.remove_on_hide=!1,this.remove_on_click_outside=!0,this.fade_in=!0,this.fade_out=!0,this.loaded=!1,this.visible=!1,this.$elements={},this._onfail=null,this._onfail_context=this,this._onload=null,this._onload_context=this,this._onshow=null,this._onshow_context=this,this._onhide=null,this._onhide_context=this,this._onremove=null,this._onremove_context=this,this.$container=null,typeof t=="object")for(const e in t)this[e]=t[e];g(document).on("keyup",e=>{this.visible&&e.key==="Escape"&&!this.locked&&this.hide()})};ye.zIndex=11e3,ye.layers=[],ye.$background=null,ye.spinner='<em class="fa fa-spinner fa-spin" style="font-size: 2em"></em>',ye.prototype={onLoad:function(t,e){this._onload=typeof t=="function"?t:null,this._onload_context=e||this},onShow:function(t,e){this._onshow=typeof t=="function"?t:null,this._onshow_context=e||this},onHide:function(t,e){this._onhide=typeof t=="function"?t:null,this._onhide_context=e||this},onRemove:function(t,e){this._onremove=typeof t=="function"?t:null,this._onremove_context=e||this},_load:function(t,e,o,n){let s=o,a=n;const h=this;this.loaded=!1,this.show(ye.spinner),typeof s=="function"&&(a=s,s={}),g[t](e,s,function(u,p,T){h.loaded=!0,h.show(u),ngutils.onAjaxComplete(),typeof a=="function"&&a.call(this,u,p,T),h._onload&&h._onload.call(h._onload_context)}).fail((u,p,T)=>{h._onfail&&h._onfail.call(h._onfail_context,u,p,T)})},load:function(t,e,o){return this._load("getXD",t,e,o)},post:function(t,e,o){return this._load("postXD",t,e,o)},createElements:function(){const t=g("body").first(),e=g("<div>");e.addClass("blackout-hover"),e.attr("data-id",this.id);const o=g("<div>").addClass("page-dimmer");e.append(o);const n=T=>{T===this.id&&this.initButtons()};ke.addListener("blackout-refresh",n),e.on("remove",()=>{e.off("remove"),ke.removeListener("blackout-refresh",n)});const s=g("<div>");s.addClass("blackout-inner");const a=g("<div>");a.addClass("blackout-bookend");const h=g("<div>");h.addClass("blackout-bookshelf");const u=g("<div>");u.addClass("blackout-center"),h.append(a.clone().addClass("shimmed")),h.append(u),h.append(a.clone().addClass("shimmed")),s.append(a.clone()),s.append(h),s.append(a.clone()),e.append(s),t.append(e),this.$elements.hover=e,this.$elements.inner=s,this.$elements.centered=u;let p=!1;e.click(()=>{if(p){p=!1;return}!this.locked&&this.remove_on_click_outside&&this.hide()}),u.click(T=>{T.stopPropagation(),p=!1}),u.mousedown(T=>{p=!0})},removeLayer:function(){const t=ye.layers.indexOf(this);t>-1&&ye.layers.splice(t,1)},getZIndex:()=>ye.layers.length*2+ye.zIndex,initButtons:function(){const t=g('[data-action="blackout-close"]',this.$elements.inner);if(t.off("click"),t.show(),!(t.parents(".blackout-hover").length>0)){t.remove();return}t.click(o=>{this.locked||(o.preventDefault(),this.hide(),ke.dispatch("blackout-close",{instance:this}))}),t.removeAttr("data-action")},hiding:!1,timeout:null,showTemplate:function(t){const e=g(t).html();this.show(e)},show:function(t){let e=t;this.hiding=!1,this.removeLayer(),ye.lockLastLayer(),ye.layers.push(this);const o=g("body").first();this.$elements.centered||this.createElements(),this.$elements.centered.hide(),!e&&!g.trim(this.$elements.centered.html())&&(e=ye.spinner),e&&this.setBody(e),ye.$background||(ye.$background=g("<div>"),ye.$background.addClass("blackout"),o.append(ye.$background));for(const a in this.$elements)a!=="centered"&&this.$elements[a].show();const n=this.$elements.inner;n.css("height","");const s=this.getZIndex();ye.$background.css("z-index",s),this.fade_in&&!ye.$background.__visible?(ye.$background.hide(),ye.$background.fadeIn(200)):ye.$background.show(),ye.$background.__visible=!0,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const a=this.$elements.centered,h=this.$elements.hover;!a||!h||(a.outerHeight()<=h.outerHeight()&&n.css("height","100%"),h.css("z-index",s+1),a.show(),this.visible=!0,this._onshow&&this._onshow.call(this._onshow_context))},1)},setBody:function(t){this.$elements.centered||this.createElements(),t instanceof g?(this.$elements.centered.html(""),this.$elements.centered.append(t)):this.$elements.centered.html(t),this.initButtons()},unlinkTask:function(){for(const t in ze.tasks)ze.tasks[t].blackout===this&&(ze.tasks[t].blackout=null)},locked:!1,lock_timeout:null,lock:function(t){this.lock_timeout&&clearTimeout(this.lock_timeout),this.locked=!0;let e=t;return e===!0&&(e=500),typeof e=="number"&&(this.lock_timeout=setTimeout(()=>{this.unlock()},e)),this},unlock:function(){return this.lock_timeout&&clearTimeout(this.lock_timeout),this.locked=!1,this},ignore_active_tasks:!1,hide:function(t){if(this.locked)return!1;ke.dispatch("blackout-hide",{instance:this});let e=null,o=!1;if(!this.ignore_active_tasks)for(const n in ze.tasks)ze.tasks[n].blackout===this&&(ze.tasks[n].saving&&(o=!0),e=!0);if(!(e&&!e.complete&&(message=o?`Your changes are still saving.

Are you sure you want to close this?`:`You have unsaved changes.

Are you sure you want to close this?`,!confirm(message)))&&(this.removeLayer(),ye.unlockLastLayer(),!this.hiding)){this.hiding=!1,ye.$background&&(ye.$background.css("z-index",this.getZIndex()),ye.layers.length<1&&(!this.fade_out||!ye.$background.__visible?ye.$background.hide():(this.hiding=!0,ye.$background.fadeOut(200,()=>{this.hiding=!1})),ye.$background.__visible=!1)),this.$elements.hover&&this.$elements.hover.scrollTop(0);for(const n in this.$elements)this.$elements[n].hide();if(this.visible=!1,ke.dispatch(ke.blackoutClosed,this),this.remove_on_hide)return this.remove();this._onhide&&this._onhide.call(this._onhide_context),t!==void 0&&t(this._onhide_context)}},toggle:function(){if(this.locked)return!1;this.visible?this.hide():this.show()},remove:function(){if(this.locked)return!1;for(const t in this.$elements)this.$elements[t].remove();this.$elements={},this.loaded=!1,this.visible=!1,this._onremove&&this._onremove.call(this._onremove_context)},getLayerElement:function(){var t;if((t=this.$elements)!=null&&t.hover)return this.$elements.hover}},ye.prototype.constructor=ye,ye.templateFromOnClick=(t,e,o)=>{t.preventDefault();let n=o;return n||(n={remove_on_hide:!0}),new ye(n).showTemplate(e),!1},ye.fromOnClick=(t,e,o,n)=>{t.preventDefault();const s=g(e);let a=o,h=n;if(!s.attr("href")){console.error("onClick element requires href attribute");return}typeof a=="function"&&(h=a,a=null),a||(a={remove_on_hide:!0});const u=new ye(a);typeof h=="function"&&h(u),u.show(ye.spinner);const p={userkey:PHP.get("uek")};return PHP.get("ng_design")&&(p.___ng_design=PHP.get("ng_design")),u.load(s.attr("href"),p),!1},ye.getTop=()=>ye.layers.length<1?null:ye.layers[ye.layers.length-1],ye.getByChild=t=>{const e=t.closest(".blackout-hover");if(!e||e.length<1)return null;const o=Number.parseInt(e.attr("data-id"));if(!o||Number.isNaN(o))return null;for(let n=0,s=ye.layers.length;n<s;n++)if(ye.layers[n]&&ye.layers[n].id===o)return ye.layers[n];return null},ye.getLastLayer=()=>{if(ye.layers.length<1)return g("body").first();const t=ye.layers[ye.layers.length-1];if(t)return t.getLayerElement()},ye.lockLastLayer=()=>{tn.lock(ye.getLastLayer())},ye.unlockLastLayer=()=>{tn.unlock(ye.getLastLayer())},ye.autoID=0,ye.refresh=t=>{const e=Number.parseInt(t);Number.isNaN(e)||ke.dispatch("blackout-refresh",e)},ye._currentDim=null,ye.dim=()=>{ye._currentDim&&ye.undim(),ye._currentDim=ye.getLastLayer(),ye._currentDim.addClass("dimmed")},ye.undim=()=>{ye._currentDim&&ye._currentDim.removeClass("dimmed"),ye._currentDim=null};const ze={increment:0,tasks:{},$saving:null,activeTaskInterrupt:t=>{for(const e in ze.tasks){const o=ze.tasks[e].saving?`Your changes are still saving.

Are you sure you want to leave?`:`You have unsaved changes.

Are you sure you want to leave the page?`;return t.returnValue=o,o}},fadeInSaving:()=>{ze.$saving||(ze.$saving=g("#activetask-saving-msg")||!0),typeof ze.$saving!="boolean"&&ze.$saving.fadeIn()},fadeOutSaving:()=>{if(!(typeof ze.$saving>"u"||ze.$saving===null)){if(ze.$saving===!0){ze.$saving=!1;return}ze.$saving.length!==0&&ze.$saving.fadeOut()}},findActive:()=>{let t=null,e=!1;for(const o in ze.tasks)t=ze.tasks[o],t.saving&&(e=!0);return[t,e]},initiateUnloadInterrupt:()=>{window.addEventListener("beforeunload",ze.activeTaskInterrupt)},removeUnloadInterrupt:()=>{window.removeEventListener("beforeunload",ze.activeTaskInterrupt)},checkTasks:()=>{ze.removeUnloadInterrupt();const[t,e]=ze.findActive();t&&ze.initiateUnloadInterrupt(),e?ze.fadeInSaving():ze.$saving&&ze.fadeOutSaving()},addTask:(t,e)=>new ze.task(t,e),task:function(t,e){const o=this;ze.increment++,this.name=`task${ze.increment}`,this.complete=!1,this._saving=!!t,ze.tasks[this.name]=this,e?this.blackout=ye.getByChild(e):this.blackout=ye.getTop(),this.completed=function(){return delete ze.tasks[this.name],ze.checkTasks(),o.completed=()=>!1,o.complete=!0,ke.dispatch(ke.taskCompleted,o),!0},ze.checkTasks(),ke.dispatch(ke.taskStarted,this)},endTask:t=>{ze.tasks[t]&&(console.dir(ze.tasks[t]),ze.tasks[t].endTask())}};ze.task.prototype={_saving:!1,get saving(){return this._saving},set saving(t){this._saving=!!t,ze.checkTasks()}};const Vo=(t,e)=>{if(!e.title){t.find('[data-elem="header"]').remove();return}t.find('[data-elem="title"]').text(e.title),e.icon&&t.find('[data-elem="title"]').addClass(e.icon)},Br=function(t){var p;const n={...{message:"something happened",title:null,icon:"info",buttonText:"OK",callback:null,callbackThisArg:this},...typeof t=="string"?{message:t}:t},s=(p=g("#_ng_alert_template").html())==null?void 0:p.trim();if((!s||s.length<1)&&(window.alert(n.message),n.callback)){n.callback.call(n.callbackThisArg);return}const a=g(s);Vo(a,n),a.find('[data-elem="message"]').text(n.message);const h=new ye({remove_on_hide:!0}),u=a.find('[data-elem="button"]');n.buttonText&&u.text(n.buttonText),u.click(()=>{n.callback&&n.callback.call(n.callbackThisArg),h.unlock(),h.hide()}),h.lock(),h.show(a)},Xo=t=>{const e={message:"something happened",title:null,icon:"info",buttonText:"OK"},o=typeof t=="string"?{message:t}:t;return new Promise(n=>{Br({...e,...o,callback:()=>{n()}})})};class yi{constructor(e){const o=e||{};if(!vi(o,"domain"))throw"config must contain domain!";this.domain=o.domain,this.internal=o.internal||null,this.allowed_params=o.allowed_params||null,this.banned_params=o.banned_params||null,this.default_params=o.default_params||null,this.required_params=o.required_params||null,this.uris=o.uris||null}getDomain(){return this.domain}getAllowedParams(){return this.allowed_params}getBannedParams(){return this.banned_params}getDefaultParams(){return this.default_params}getRequiredParams(){return this.required_params}appendLocationTo(){}getUris(){return this.uris}getCleanUrl(e){const o=new URL(e),n=o.searchParams,s=new URLSearchParams(n.toString());if(this.getAllowedParams()!==null)for(const[h]of s.entries())this.getAllowedParams().includes(h)||s.delete(h);if(this.getAllowedParams()===null&&this.getBannedParams()!==null)for(const[h]of s.entries())this.getBannedParams().includes(h)&&s.delete(h);if(this.getDefaultParams()!==null)for(const h of this.getDefaultParams()){const[u,p]=h.split("=");s.has(u)&&s.delete(u),s.append(u,p)}let a=`${o.origin}${o.pathname}`;return[...s.values()].length&&(a=`${a}?${s.toString()}`),a}hasRequiredParams(e){const o=e instanceof URL?e:new URL(e),n=this.getRequiredParams();if(n===null)return!0;const s=o.searchParams;for(let a=0,h=n.length;a<h;++a)if(!s.has(n[a]))return!1;return!0}hasValidUri(e){const o=e instanceof URL?e:new URL(e),n=this.getUris();if(n===null||n.length===0)return!0;for(let s=0,a=n.length;s<a;++s){const h=Mr(n[s]);let u=Mr(o.pathname);const p=o.searchParams.toString();if(p.length&&(u=`${u}?${p}`),qo(u,h))return!0}return!1}validate(e){const o=e instanceof URL?e:new URL(e);if(!this.hasValidUri(o))throw`You must include a valid URI (path) here for '${o.hostname}'.`;if(!this.hasRequiredParams(o))throw`Invalid query parameters passed - this URL needs certain parameters to work properly, and you haven't provided them. Missing one of: ${`"${this.getRequiredParams().join('", "')}"`}`;return this}validateAndClean(e){const o=e instanceof URL?e:new URL(e);return this.validate(o).getCleanUrl(o)}static applyTo(e,o,n,s,a){const h=n||"iframe",u=s||"src",p=typeof a=="boolean"?a:!1,T=[...e.getElementByTagName(h)],v=T.length;if(!v)return;const m=f=>{p&&(console.log(`Must remove node ${f}, couldn't get URL from ${u}`),T[f].remove())};for(let f=0;f<v;++f){const d=T[f],b=d[u]?d[u]:null;if(b===null){m(f);continue}const y=yi.restrict(b,o);if(y===null){m(f);continue}const _=d.clone();_[u]=y,d.parentNode.replaceChild(_,d)}}static fromUrlAndAllowlists(e,o,n){const s=e instanceof URL?e:new URL(e);for(const a in o){const h=o[a].domain;if(Bo(s.hostname,h)&&(n===void 0||(o[a].internal?o[a].internal:!1)===n))return new yi(o[a])}return null}static restrict(e,o){const n=yi.fromUrlAndAllowlists(e,o);return n==null?null:n.getCleanUrl(e,n)}}yi.to_modify=[];const Kn=class{constructor(t,e){ui(this,"slug",null);ui(this,"$element",null);let o=t,n=e;if(n||(n=Et.slideshows[Et.active]?Et.slideshows[Et.active]:null),!n)throw console.error("Missing or invalid slideshow object: ",n),new Error("Couldn't find a slideshow to add this slide to.");this.slideShow=n,this.slideShow&&this.slideShow.slides.push(this);const s=this;if(this.$element=o,this.slug=null,!o.attr("data-art-slide")){const h=o.find("[data-art-slide]").first();h.length&&(o=h)}o.attr("data-art-slide")?this.slug=o.data("art-slide"):o.attr("href")?this.slug=o.attr("href").split("art/view/").pop():o("a").each(function(){!s.slug&&$(this).attr("href").indexOf("art/view/")>-1&&(s.slug=$(this).attr("href").split("art/view/").pop())}),o.data("endpoint")?this.endpoint=o.data("endpoint"):this.endpoint=this.url,this.$handle=null;let a=$("[data-item='icon']",o);a.length===0&&(a=this.$element),this.setHandle(a)}setHandle(t){return this.clearHandle(),this.$handle=t,this.$handle.on("click",e=>{e.preventDefault(),e.stopPropagation(),this.view(e)}),this}clearHandle(){return this.$handle&&this.$handle.off("click"),this}view(){return this.slideShow.activeSlide=this.slideShow.slides.indexOf(this),this.slideShow.load(this.endpoint),this}get url(){return`${we.get("www_root")}/preview/art/${this.slug}`}},Et=(an=class{static create(t,e){if(Et.slideshows[t]===void 0)return Et.slideshows[t]=new Et(t,e),Et.slideshows[t];const o=`${t}-${Et.id+1}`;return Et.create(o,e)}static get(t){return Et.slideshows[t]}static getActive(){return Et.slideshows[Et.active]}static clearActive(){return Et.active="global",Et.slideshows[Et.active]}constructor(t,e){const o=this;this.id=Et.id++,this.name=t,this.slides=[],this.activeSlide=0,this.blackout=null,this._on_close=[],Et.active=t,e&&e.find("[data-art-slide]").each(function(){new Kn(g(this),o)})}hasSlides(){return this.slides.length>0}addContainer(t){const e=this;return t.find("[data-art-slide]").each(function(){new Kn(g(this),e)}),this}addElement(t){return this.slides.push(new Kn(t,this)),this}getSlide(t){let e=t;return typeof e>"u"?e=this.activeSlide:this.activeSlide=e,this.slides[e]&&this.slides[e].view(),this.slides[e]}nextSlide(){return this.activeSlide++,this.activeSlide>=this.slides.length&&(this.activeSlide=0),this.getSlide()}prevSlide(){return this.activeSlide--,this.activeSlide<0&&(this.activeSlide=this.slides.length-1),this.getSlide()}load(t){return this.blackout||(this.blackout=new ye({remove_on_hide:!0}),this.blackout.onHide=()=>{this.blackout=null}),this.blackout.load(t),this}onClose(t){return this._on_close.includes(t)||this._on_close.push(t),this}offClose(t){return t?this._on_close.includes(t)&&this._on_close.splice(this._on_close.indexOf(t),1):this._on_close=[],this}},ui(an,"id",0),ui(an,"slideshows",{}),ui(an,"active",null),an);Et.create("global");const _t={};_t.fancyAdd=(t,e,o)=>{const n=t.height();let s=e,a=o;t.show(),t.height(0),t.hide(),typeof s=="number"&&(a=s,s=null);const h=()=>{t.show().css("visibility","hidden"),t.animate({height:n},150,()=>{t.hide().css("height","").css("visibility","").fadeIn(300,()=>{s&&s()})})};a?setTimeout(h,a):h()},_t.fancyHide=(t,e,o)=>{let n=e,s=o;if(typeof n=="number"&&(s=n,n=null),s){setTimeout(()=>{_t.fancyRemove(t,n)},s);return}t.fadeOut(300,()=>{t.show(),t.css("visibility","hidden"),t.animate({height:0},150,()=>{t.css("visibility","").css("height","").hide(),n&&n()})})},_t.fancyRemove=(t,e,o)=>{let n=e,s=o;if(typeof n=="number"&&(s=n,n=null),s){setTimeout(()=>{_t.fancyRemove(t,n)},s);return}t.fadeOut(300,()=>{t.show(),t.css("visibility","hidden"),t.animate({height:0},150,()=>{t.remove(),n&&n()})})},_t.isOnScreen=(t,e,o)=>{let n=e;const s=o;n||(n=0);const a=g(t);let h;s?h=a.position().top:h=a.offset().top;const u=h+a.outerHeight(),p=s?0:g(window).scrollTop(),T=p+g(window).height();return h-n<T&&u+n>p},_t.loadWhenOnscreen=function(t,e,o,n){const s=g(t);this.onReady=()=>{},this.onScrolledTo=()=>{},this.onLoaded=()=>{},this.onComplete=()=>{},this.onFailed=()=>{};const a=_t.whenOnscreen(s,()=>{if(this.onScrolledTo()===!1){this.onComplete();return}e&&g.get(e,h=>{if(this.onLoaded(h)===!1){this.onComplete();return}s.replaceWith(h),g("body").hide().show(0),this.onComplete()}).fail(h=>{this.onFailed(h)})},o,n);return setTimeout(()=>{a.onReady=this.onReady},3),this},_t.whenOnscreen=function(t,e,o,n){const s=g(t);let a=n;this.onReady=()=>{},a||(a=s.closest(".blackout-hover"),a.length<1&&(a=g(window)));const h=a[0]!==window,u=v=>{a.off("scroll",p),a.off("simulate-scroll-onscreen",u),ke.removeListener("ngutils-dom-change",T),ke.dispatch("ngutils.element.whenOnscreen",s),e&&e()},p=v=>{_t.isOnScreen(s,o,h)&&u()},T=v=>{v.parentNode.contains(s.get(0))&&_t.isOnScreen(s,o,h)&&u()};return setTimeout(()=>{if(s.length===1){if(this.onReady()===!1)return;ke.addListener("ngutils-dom-change",T),a.on("scroll",p),a.on("simulate-scroll-onscreen",u),p()}else console.warn("Invalid element",s)},5),this},_t.autoCondense=()=>{g(".condensed").each(function(){_t.condense(g(this))})},_t.condense=(t,e)=>{const o=g(t);if(!o||o.length<1)return;let n=e;const s=o.parent(),a=s.css("position").toLowerCase();a!=="fixed"&&a!=="absolute"&&a!=="relative"&&s.css("position","relative");const h=Number.parseInt(o.css("max-height").replace(/[^-\d\.]/g,""));if(o.removeClass("condensed"),o.css("max-height","100%"),Number.isNaN(h)||h<1||o.height()-140<=h)return;o.addClass("condensed-processed"),o.css("max-height",h),n||(n=o.attr("data-expand-text")||"Read More...");const T=g("<div>",{class:"expand-condensed",html:n});T.on("click",function(){o.css("max-height","100%"),o.trigger("expanded"),g(this).remove()}),o.after(T)},_t.editable=function(t,e){const o=g(t),n=this,s=[null,null];let a=null;this._editing=!!e,this.setEditing=function(h){if(o.removeClass("edit-on").removeClass("edit-off"),h?o.addClass("edit-on"):o.addClass("edit-off"),n._editing=!!h,a&&a.length>0){const u=n._editing?1:0;a.html(s[u])}return this},this.toggle=function(){return n._editing?this.setEditing(!1):this.setEditing(!0),this},this.setToggleButton=function(h,u,p,T,v){a=g(h);let m=u,f=p;return m||(m=f),f||(f=a.html()),s[0]=f,s[1]=m,s[2]=typeof T=="function"?T:null,s[3]=v||a,this.setEditing(this._editing),a.on("click",d=>(n.toggle(),s[2]?s[2].call(s[3],d):!1)),this},e?this.setEditing(n._editing):o.hasClass("edit-on")?this.setEditing(!0):this.setEditing(!1)},_t.editable.prototype={get editing(){return this._editing},set editing(t){this.setEditing(t)}};const Ot={getItem:(t,e)=>{let o=localStorage.getItem(t);return o?o=JSON.parse(o):e?o=e:o=null,o},setItem:(t,e)=>localStorage.setItem(t,JSON.stringify(e))},Go=()=>!!we.get("ismobile"),Je={lastX:null,lastY:null,getMouse:function(t){let e=t;return e?(typeof t.originalEvent<"u"&&typeof t.originalEvent.touches<"u"?e=t.originalEvent.touches[0]:typeof t.changedPointers<"u"?e=t.changedPointers[0]:typeof t.pointers<"u"&&(e=t.pointers[0]),this.lastX=e.pageX,this.lastY=e.pageY,{x:e.pageX,y:e.pageY}):{x:this.lastX,y:this.lastY}}};Go()?(Je.mouseDown="touchstart",Je.mouseUp="touchend",Je.mouseMove="touchmove"):(Je.mouseDown="mousedown",Je.mouseUp="mouseup",Je.mouseMove="mousemove");const nn={};nn.slider=function(t){const e=!!we.get("ismobile");this._dragging=!1,this.onStartDrag=m=>{},this.onStopDrag=m=>{},this.onPositionChanged=m=>{};function o(m){console.error(`Could not initialize slider with missing/invalid '${m}' value.`)}function n(m){let f=typeof m=="string"?g(`#${m}`):m;return(!f||!(f instanceof jQuery)||f.length<1)&&(f=null),f}this.$bar=n(t.bar),this.$button=n(t.button),this.$bar||o("bar"),this.$button||o("button"),this.$fill=n(t.fill),this.$add=n(t.add),this.$subtract=n(t.subtract),this.$toggle=n(t.toggle),this.$select=n(t.select),this.$bar.css("position","relative"),this.$button.css("position","absolute"),this.$fill&&this.$fill.css("position","absolute"),this._position=Number.parseFloat(t.position);const s=this;(this.$add||this.$subtract)&&(this._increment=Number.parseFloat(t.increment),(Number.isNaN(this._increment)||!this._increment||this._increment<=0)&&(this._increment=.05)),this.$add&&this.$add.click(()=>(s.setPosition(s._position+s._increment),!1)),this.$subtract&&this.$subtract.click(()=>(s.setPosition(s._position-s._increment),!1));const a=g(document);this.$toggle&&this.$select&&(this.$toggle.on(Je.mouseUp,()=>(s.updateBarBounds(),s.$select.toggle(),s.$toggle.blur(),s.$select.focus(),!1)),a.on(Je.mouseUp,()=>{s.$select.hide()})),this._left=0,this._width=0,this._offset=0,this._lock_bar=!!t.lock_bar;const h=["up","down","left","right"];if(t.direction?this._direction=typeof t.direction=="string"&&h.indexOf(t.direction.toLowerCase())>=0?t.direction.toLowerCase():"right":this._direction="right",this.$fill)switch(this._direction){case"up":this.$fill.css("bottom","0px");break;case"down":this.$fill.css("top","0px");break;case"left":this.$fill.css("right","0px");break;case"right":this.$fill.css("left","0px");break}function u(m){let f,d,b,y;return y=y.getMouse(m),s._direction==="down"||s._direction==="up"?(f=y.y,start=s._top,d=s._height):(f=y.x,start=s._left,d=s._width),b=f-(s._offset+start),b<0?b=0:b>d&&(b=d),b=b/d,(s._direction==="up"||s._direction==="left")&&(b=1-b),b}e&&g(window).resize(()=>{s.updateBarBounds(),s.updateFill(),s.updateButton()}),this.updateBarBounds(),this.updateFill(),this.updateButton();function p(m){m.preventDefault(),s._lock_bar?s.setPosition(u(m)):s.updateButton(u(m))}function T(m){m.preventDefault(),s._dragging=!0,s.onStartDrag(s._position),p(m),a.off(Je.mouseUp,v),a.on(Je.mouseUp,v),a.off(Je.mouseMove,p),a.on(Je.mouseMove,p),s.$bar.blur()}function v(m){m.preventDefault(),s._dragging=!1,a.off(Je.mouseMove,p),a.off(Je.mouseUp,v),s.setPosition(u(m)),s.onStopDrag(s._position)}this.$bar.on(Je.mouseDown,m=>(T(m),!1))},nn.slider.prototype={updateBarBounds:function(){var n;const t=(n=this.$select)==null?void 0:n.is(":hidden");t&&this.$select.show();const e=this.$button.outerWidth(),o=this.$button.outerHeight();this._left=this.$bar.offset().left,this._top=this.$bar.offset().top,this._width=this.$bar.innerWidth()-e,this._height=this.$bar.innerHeight()-o,this._direction==="down"||this._direction==="up"?this._offset=Math.round(o/2):this._offset=Math.round(e/2),t&&this.$select.hide()},setPosition:function(t){let e=Number.parseFloat(t);Number.isNaN(e)||e<0?e=0:e>1&&(e=1),e!==this._position&&(this._position=e,(!this._dragging||this._lock_bar)&&this.updateButton(),this.updateFill(),this.onPositionChanged(this._position))},updateButton:function(t){let e=t;typeof e>"u"&&(e=this._position);let o;this._direction==="down"||this._direction==="up"?(e=Math.round(this._height*e*10)/10,o=this._direction==="up"?"bottom":"top"):(e=Math.round(this._width*e*10)/10,o=this._direction==="left"?"right":"left"),this.$button.css(o,e)},updateFill:function(){if(this.$fill){let t;this._direction==="down"||this._direction==="up"?(t=Math.round(this._height*this._position*10)/10,t+=this._offset,this.$fill.css("height",t)):(t=Math.round(this._width*this._position*10)/10,t+=this._offset,this.$fill.css("width",t))}}};const Qe={};Qe.smartscale=function(t){const e=this,o=!!we.get("ismobile");if(!t.attr("data-smart-scale"))return;const n=t.attr("data-smart-scale").split(",");let s=n[0].indexOf("%")<0?Number.parseInt(n[0]):n[0],a=n[1].indexOf("%")<0?Number.parseInt(n[1]):n[1],h=null;t.width(0);let u=t.parent();const p=[".scale-to-this",".blog-embed-left","p",".blog-post-body",".ql-body",".pod-body",".pod",".column","body"],T=p.indexOf(".pod-body");let v=!1,m,f;for(m=0;m<p.length;m++){if(f=t.closest(p[m]),f&&f.length>0&&(f.width()>0||f.attr("data-scale-width"))){u=f;break}T>=m&&(v=!0)}if(!u.width()&&!u.attr("data-scale-width"))return t.css("width","100%"),!1;t.removeAttr("data-smart-scale"),this.onResized=(b,y)=>{};function d(b){if(t.closest("html").length<1){g(window).off("resize",d);return}let y;if(u.attr("data-scale-width"))y=Number.parseFloat(u.attr("data-scale-width"));else if(y=u.width(),v){const R=u;let l=t,C=0;for(;R[0]!==l[0];){const M=[];M.push(Number.parseInt(l.css("paddingLeft"))),M.push(Number.parseInt(l.css("paddingRight"))),M.push(Number.parseInt(l.css("marginLeft"))),M.push(Number.parseInt(l.css("marginRight"))),M.push(Number.parseInt(l.css("borderLeftWidth"))),M.push(Number.parseInt(l.css("borderRightWidth")));for(const P of M)Number.isNaN(P)||(C+=P);l=l.parent()}y-=C}if(u.removeAttr("data-scale-width"),y===h)return;let _=s,A=a;if(typeof _=="number"&&y<s&&(_=y,typeof A=="number")){const R=y/s;A=Math.round(a*R)}if(_===h)return;let w="media-block-center";const O={width:_,height:A};!o&&y>_&&_<y/2&&(w="media-inline-auto"),t.removeClass("media-inline-auto"),t.removeClass("media-block-center");let k=t;if(w==="media-block-center"){const R=t.parent(".ng-img-container").first();R.length>0&&(k=R)}const S=t.closest(".ng-img-container-sync");k.addClass(w),t.css(O),S.css(O),h=_,t[0].dispatchEvent(new Event("rescaled")),e.onResized(_,A)}return o&&g(window).resize(d),d(),this.refresh=()=>{d()},this.setNewDimensions=(b,y)=>{b===s&&y===a||(s=b,a=y,h=null,d())},this},Qe.smartscale.autodetect=()=>{g("[data-smart-scale]").each(function(){new Qe.smartscale(g(this))})};class Jn{constructor(e){if(this.$element=e,this.src=e.attr("data-smartload-src"),this.yBuffer=400,this.$container=e.closest("div[class^='condensed']"),(!this.$container||this.$container.length<1)&&(this.$container=null),this.$container){const o=this.$container.offset().top+this.$container.innerHeight();this.$element.offset().top<o&&(this.$container=null)}this.init()}init(){this.$element.removeAttr("data-smartload-src"),_t.whenOnscreen(this.$element,()=>{this.$element.attr("src",this.src),this.$element.attr("data-smartload-event")&&ke.dispatch(this.$element.attr("data-smartload-event"),this.$element)},this.yBuffer)}static autodetect(){g("[data-smartload-src]").each(function(){new Jn(g(this))})}}Qe.smartload=Jn,Qe.item=function(t){this.id=t||null,this.sources={}},Qe.item.prototype={qualities:[],addSource:function(t,e,o){let n=o;n||(n=this.qualities[0]),this.qualities.indexOf(n)<0&&console.error(`Invalid media quality: ${n}`),this.sources[n]||(this.sources[n]=[]),this.sources[n].push({src:t,type:e})},getAvailableQualities:function(){const t=[];for(let e=0;e<this.qualities.length;e++)this.sources[this.qualities[e]]&&t.push(this.qualities[e]);return t}},Qe.audio=function(...t){const e=!!we.get("ismobile");Qe.item.apply(this,t),this.qualities=["mp3"],this.type="audio",this.html="";const o=this,n="/audio/load/";this.load=function(s){const a={};e&&(a.isMobile=!0),g.ajax({dataType:"json",url:n+this.id,async:!0,data:a,success:h=>{if(h.error)console.error(h.error);else if(h.html&&h.sources){for(let u=0;u<h.sources.length;u++)o.addSource(h.sources[u].src,h.sources[u].type);o.html=h.html,typeof s=="function"&&s()}else console.error(`Unexpected Server Response from ${n}${o.id}`,h)}})}},Qe.audio.prototype=Object.create(Qe.item.prototype),Qe.audio.prototype.constructor=Qe.audio,Object.defineProperty(Qe.audio,"volume",{get:()=>{let t=Ot.getItem("ng-audio-vol",1);return t=Number.parseFloat(t),Number.isNaN(t)&&(t=1),t},set:t=>{let e=Number.parseFloat(t);Number.isNaN(e)&&(e=1),Ot.setItem("ng-audio-vol",e)}}),Qe.video=function(...t){Qe.item.apply(this,t),this.qualities=["1080p","720p","360p"],this.type="video"},Qe.video.prototype=Object.create(Qe.item.prototype),Qe.video.prototype.constructor=Qe.video,Qe.playlist=function(t){this._items=[],this._shuffled=[],this._shuffle=!1,this._current_index=0,this.type=t},Qe.playlist.prototype={addMedia:function(t,e){let o;switch(this.type){case"audio":o=new Qe.audio(t);break;case"video":o=new Qe.video(t);break;default:throw`Invalid media type: ${this.type}`}return typeof e=="function"&&e(o),this.add(o),this},add:function(t){this._items.push(t)},clear:function(){this._items=[],this._shuffled=[],this._shuffle=!1,this._current_index=0},_doshuffle:function(){this._shuffled=[];let t,e;for(e=0;e<this._items.length;e++)this._shuffled.length?(t=Math.floor(Math.random()*this._shuffled.length),this._shuffled.splice(t,0,e)):this._shuffled.push(e)},toggleShuffle:function(){this.shuffle(!this._shuffle),this._shuffle&&this._doshuffle()},shuffle:function(t){let e=t;return typeof e>"u"?this._shuffle:(e=!!e,e!==this._shuffle&&(this._current_index=0,this._shuffle=e,this._shuffle&&this._doshuffle()),this)},setCurrentItem:function(t){const e=this._current_index;for(this._current_index=0;this._current_index<this._items.length;this._current_index++)if(this.getCurrentItem()===t)return!0;return this._current_index=e,!1},getCurrentItem:function(){return this._current_index<0||this._current_index>=this._items.length?null:this._shuffle?this._items[this._shuffled[this._current_index]]:this._items[this._current_index]},forward:function(t){if(this._current_index>=0?this._current_index++:this._current_index=0,this._current_index>=this._items.length){if(!t)return null;this._current_index=0}return this.getCurrentItem()},reverse:function(t){if(this._current_index<this._items.length?this._current_index--:this._current_index=this._items.length-1,this._current_index<0){if(!t)return null;this._current_index=this._items.length-1}return this.getCurrentItem()}},Qe.getPlaylist=t=>{const e=new Qe.playlist;return e.type=t==="video"?"video":"audio",e},Qe.player=function(t,e,o){this.wait_for_async=!1,this.$player_element=null,this.$controls_element=null,this.$display_element=null,this.controls=null,this.type=null,this.autoplay=!1,this._loop=!1,this._shuffle=!1,this.active=!1,this.playing=!1,this.paused=!1,this.skip_forward_time=15,this.skip_back_time=15,this.media_playlist=null,this.current_media_item=null,this.quality="default";let n=t,s=e,a=o;if(!n)throw"Missing $player_element";typeof n=="string"&&(n=g(`#${n}`)),!s&&!n.is("audio")&&(s=n,n=g("audio",s).first()),a||(a=g(".media-player-display",s).first()),this.onPressPlay=()=>{},this.onPressStop=()=>{},this.onPressPause=()=>{},this.onPressSkipForward=()=>{},this.onPressSkipBack=()=>{},this.onPressPlayNext=()=>{},this.onPressPlayPrevious=()=>{},this.onPressLoop=()=>{},this.onPressFullscreen=()=>{},this.onPressShuffle=()=>{},this.onTimeChange=h=>{},this.onVolumeChange=h=>{},this.onPlaybackStarted=()=>{},this.onPlaybackEnded=()=>{},this.onLoopEnabled=()=>{},this.onLoopDisabled=()=>{},this.onShuffleEnabled=()=>{},this.onShuffleDisabled=()=>{},this.onMediaPaused=h=>{},this.onMediaUnpaused=h=>{},this.onMediaStarted=h=>{},this.onMediaEnded=h=>{},this.onMediaLoaded=h=>{},this.setCurrentTitle=()=>{},this.registerAudioElement(n),s&&this.registerControls(s),a&&this.registerDisplay(a)},Qe.player.prototype={activate:function(){this.active=!0,this.$controls_element.addClass("active")},deactivate:function(){this.active=!1,this.$controls_element.removeClass("active")},loop:function(t){return typeof t>"u"?this._loop:(this._loop=!!t,this._loop?this.onLoopEnabled():this.onLoopDisabled(),this.updateControls(),this)},shuffle:function(t){return typeof t>"u"?this._shuffle:(this._shuffle=!!t,this._shuffle?this.onShuffleEnabled():this.onShuffleDisabled(),this.media_playlist&&this.media_playlist.shuffle(this._shuffle),this.updateControls(),this)},endMedia:function(){(this.playing||this.paused)&&this.onMediaEnded(this.current_media_item),this.playing=!1,this.paused=!1},updateControls:function(){this.controls.play.removeClass("active"),this.controls.pause.removeClass("active"),this.controls.play_pause.removeClass("active"),this.controls.play_pause.removeClass("paused"),this.controls.shuffle.removeClass("active"),this.controls.loop.removeClass("active"),this.controls.fullscreen.removeClass("active"),this.playing?(this.controls.play.addClass("active"),this.controls.play_pause.addClass("active")):this.paused&&(this.controls.play_pause.addClass("active"),this.controls.play_pause.addClass("paused"),this.controls.pause.addClass("active")),this.media_playlist?(this.controls.play_next.show(),this.controls.play_previous.show(),this.controls.shuffle.show()):(this.controls.play_next.hide(),this.controls.play_previous.hide(),this.controls.shuffle.hide()),this.loop()&&this.controls.loop.addClass("active"),this.shuffle()&&this.controls.shuffle.addClass("active"),this.controls.position_bar&&this.controls.position_bar.updateBarBounds()},setDisplay:function(t){this.$display_element&&this.$display_element.html(t)},setStopped:function(){this.endMedia(),this.active&&this.onPlaybackEnded(),this.deactivate(),this.updateControls()},setPlaying:function(){this.active||this.onPlaybackStarted(),!this.playing&&this.paused?this.onMediaUnpaused(this.current_media_item):this.playing||this.onMediaStarted(this.current_media_item),this.activate(),this.playing=!0,this.paused=!1,this.updateControls()},setPaused:function(){this.playing&&!this.paused&&this.onMediaPaused(this.current_media_item),this.playing=!1,this.paused=!0,this.updateControls()},setMedia:function(t){const e=this.$player_element;if(!e||e.length<1||this.current_media_item===t)return!1;this.initForAsynch(()=>{t.load(()=>{this.onMediaLoaded(t),this.doSetMedia(t)})})},initForAsynch:function(t){const e=this.$player_element;if(g("source",e).length<1){const o=[];if(e.is("audio")&&o.push({src:`${we.get("www_root")}/content/micro.mp3`,type:"audio/mpeg"}),o.length>0){this.wait_for_async=!0,this.setCurrentSources(o),setTimeout(()=>{this.wait_for_async=!1,t()},150);return}}t()},setCurrentSources:function(t){const e=this.$player_element;e.html("");let o;for(i=0;i<t.length;i++)o=g("<source/>"),o.attr("src",t[i].src),o.attr("type",t[i].type),e.append(o);e[0].pause(),e[0].load(),e[0].currentTime=0},doSetMedia:function(t){this.current_media_item=t;let e,o=null;const n=t.getAvailableQualities();for(e=0;e<n.length;e++)if(o||(o=n[e]),n[e]===this.quality){o=n[e];break}const s=t.sources[o];return this.setCurrentSources(s),this.setCurrentTitle(t.title),(!this.playing&&self.autoplay||this.playing)&&setTimeout(()=>{this.play()},150),s.length>0},setPlaylist:function(t){this.media_playlist=t,t&&(t.shuffle(this.shuffle()),this.setMedia(t.getCurrentItem()))},canPlay:function(){const t=this.$player_element;if(!t||t.length<1)return!1;let e=!1;return g("source",t).each(function(){const o=g(this).attr("type"),n=t[0].canPlayType(o);(n==="probably"||n==="maybe")&&(e=n)}),e||!1},initVolume:function(){const t=Qe.audio.volume;this.$player_element[0].volume=t,this.controls.volume_bar.setPosition(t)},setVolume:function(t){let e=Number.parseFloat(t);e>1?e=1:e<0&&(e=0),this.$player_element[0].volume=e,Qe.audio.volume=e,this.onVolumeChange(e)},play:function(){return this.canPlay()?(this.$player_element[0].play(),this.setPlaying(),!0):!1},pause:function(){return this.canPlay()?(this.$player_element[0].pause(),this.setPaused(),!0):!1},stop:function(){return this.canPlay()?(this.$player_element[0].pause(),this.$player_element[0].currentTime=0,this.setStopped(),!0):!1},skip_forward:function(){if(!this.canPlay())return!1;let t=this.$player_element[0].currentTime+this.skip_forward_time;return t>this.$player_element[0].duration&&(t=this.$player_element[0].duration),this.$player_element[0].currentTime=t,!0},skip_back:function(){if(!this.canPlay())return!1;let t=this.$player_element[0].currentTime-this.skip_back_time;return t<0&&(t=0),this.$player_element[0].currentTime=t,!0},play_next:function(){let t=!1;return this.media_playlist&&(t=this.media_playlist.forward(this.loop())),t?(this.endMedia(),this.current_media_item=null,this.setMedia(t),t):(this.stop(),!1)},play_previous:function(){let t=!1;return this.media_playlist&&(t=this.media_playlist.reverse(this.loop())),t?(this.endMedia(),this.current_media_item=null,this.setMedia(t),t):(this.stop(),!1)},end:function(){this.setStopped()},getTimeFormat:(t,e)=>{let o=t;if(Number.isNaN(o))return[0,0,0,0];let n=Math.floor(o/60/60);o-=n*60*60;const s=Math.floor(o/60);o-=s*60;const a=[];return n>0?(n=`${n}`,a.push(n.length),a.push(2),a.push(2),a):(a.push(0),s>=10?a.push(2):a.push(1),a.push(2),a.push(e||0),a)},formatTime:function(t,e){let o=t,n=e;if(Number.isNaN(o))return"--:--:--";n||(n=this.getTimeFormat(o));let s=Math.floor(o/60/60);o-=s*60*60;let a=Math.floor(o/60);o-=a*60,o=Math.round(o*100);let h=o%100;if(o=(o-h)/100,time="",n[0]>0){for(s=`${s}`;s.length<n[0];)s=`0${s}`;time=`${time+s}:`}if(n[1]>0){for(a=`${a}`;a.length<n[1];)a=`0${a}`;time=`${time+a}:`}if(n[2]>0){for(o=`${o}`;o.length<n[2];)o=`0${o}`;time=time+o}if(n[3]>0){for(h=`${h}`;h.length<n[3];)h=`${h}0`;time=`${time}.${h}`}return time||"--:--:--"},handleMediaEnded:function(){this.wait_for_async||(this.media_playlist?this.play_next():this.loop()?this.play():this.end())},registerAudioElement:function(t){let e=t;if(typeof e=="string"&&(e=g(`#${e}`)),e.is("audio"))this.type="audio";else if(e.is("video"))this.type="video";else throw"Invalid $player_element";e.on("ended",()=>{this.handleMediaEnded()}),this.$player_element=e},refreshTime:function(){const t=this.$player_element[0].currentTime,e=this.$player_element[0].duration,o=this.getTimeFormat(e);this.controls.current_time.html(this.formatTime(t,o)),this.controls.duration.html(this.formatTime(e,o)),this.onTimeChange(t)},toggleFullScreen:function(){const t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;let e,o;t?(e=document,o=e.exitFullScreen||e.webkitExitFullscreen||e.mozCancelFullScreen):(e=this.$controls_element[0],o=e.requestFullScreen||e.webkitRequestFullscreen||e.mozRequestFullScreen),o&&o.call(e)},registerDisplay:function(t){let e=t;typeof e=="string"&&(e=g(`#${e}`)),this.$display_element=e},registerControls:function(t){let e=t;if(typeof e=="string"&&(e=g(`#${e}`)),this.$controls_element=e,this.controls)for(const p in this.controls)this.controls[p].off();const o={title:g(".media-player-title",e).first(),play:g(".media-player-play",e).first(),pause:g(".media-player-pause",e).first(),play_pause:g(".media-player-play-pause",e).first(),stop:g(".media-player-stop",e).first(),skip_forward:g(".media-player-skip-forward",e).first(),skip_back:g(".media-player-skip-back",e).first(),play_next:g(".media-player-play-next",e).first(),play_previous:g(".media-player-play-previous",e).first(),loop:g(".media-player-loop",e).first(),shuffle:g(".media-player-shuffle",e).first(),quality:g(".media-player-quality",e).first(),fullscreen:g(".media-player-fullscreen",e).first(),current_time:g(".media-player-current-time",e).first(),duration:g(".media-player-duration",e).first()};let n,s;n=g(".media-player-position-bar",e).first(),s=g(".media-player-position-button",e).first(),n&&s&&n.length>0&&s.length>0&&(o.position_bar=new nn.slider({bar:n,button:s,fill:g(".media-player-position-fill",e).first()})),n&&s&&n.length>0&&s.length>0&&(o.volume_bar=new nn.slider({direction:"up",bar:n,button:s,fill:g(".media-player-volume-fill",e).first(),add:g(".media-player-volume-up",e).first(),subtract:g(".media-player-volume-down",e).first(),toggle:g(".media-player-volume-toggle",e).first(),select:g(".media-player-volume-select",e).first(),lock_bar:!0}));const a=this.$player_element;this.setCurrentTitle=p=>{o.title.html(p)},o.loop.click(()=>(this.loop(!this._loop),this.onPressLoop(),!1)),o.shuffle.click(()=>(this.shuffle(!this._shuffle),this.onPressShuffle(),!1)),o.play.click(()=>(this.play(),this.onPressPlay(),!1)),o.pause.click(()=>(this.pause(),this.onPressPause(),!1)),o.play_pause.click(()=>(this.paused||!this.playing?(this.play(),this.onPressPlay()):(this.pause(),this.onPressPause()),!1)),o.stop.click(()=>(this.stop(),this.onPressStop(),!1)),o.skip_forward.click(()=>(this.skip_forward(),this.onPressSkipForward(),!1)),o.skip_back.click(()=>(this.skip_back(),this.onPressSkipBack(),!1)),o.play_next.click(()=>(this.play_next(),this.onPressPlayNext(),!1)),o.play_previous.click(()=>(this.play_previous(),this.onPressPlayPrevious(),!1)),o.fullscreen.click(()=>(this.toggleFullScreen(),this.onPressFullscreen(),!1));const h=()=>{const p=a[0].currentTime/a[0].duration;o.position_bar&&o.position_bar.setPosition(p),this.refreshTime()};a.on("timeupdate",h);function u(p){Number.isNaN(a[0].duration)||(a[0].currentTime=a[0].duration*p)}o.position_bar&&(o.position_bar.onStopDrag=p=>{u(p)}),o.volume_bar&&(o.volume_bar.onPositionChanged=p=>{self.setVolume(p)}),this.controls=o,o.volume_bar&&self.initVolume()}};const er={enableImageModeration:(t,e)=>{const o=g(t),n=o.closest("[data-body-params]").attr("data-body-params"),s=g(o).parent(),a=g('<div class="padded" data-image-deletion="1" style="position:absolute; top:0px; right: 0px"><a class="ngicon-25-trash" title="Delete Image" style="cursor: pointer;"></a></div>');s.append(a),n&&a.addClass("hidden");const h=u=>{if(!n)return;const p=JSON.parse(n);u.id!==p[1]||u.type!==p[0]||(u.visible?a.removeClass("hidden"):a.addClass("hidden"))};ke.addListener("moderation-toggle",h),g("a",a).click(u=>{u.preventDefault(),confirm("Are you sure you want to delete this image?")&&e(()=>{a.remove(),_t.fancyRemove(o,()=>{s.remove()}),ke.removeListener("moderation-toggle",h)})})}},jr={deleteImageUpload:(t,e,o,n)=>{const s={url:t,source_type:e,source_id:o,userkey:PHP.get("uek")};g.post("/image-delete",s,n,"json").fail(a=>{a.status!==403&&(alert("Unexpected error!"),console.error("Unexpected error",a.responseText))})}},rn={contentType:3002,form_id:0,unbanFromClick:(t,e)=>{t.preventDefault();const o=g(e).attr("id").split("_").pop(),n=we.get(`bbs_poster_${o}`,"this user");confirm(`Are you sure you want to clear
${n}'s ban?`)&&g.post(e.href,()=>{const s=g(e).closest("[data-ban-details-for]"),a=g('[id="ban-btn-text"]',s),h=g('[id="clear-ban-btn"]',s),u=g('[id="ban-details"]',s);h.hide(),u.hide(),a.html("ban")})},deleteFromClick:(t,e,o,n)=>{t.preventDefault();const s=g(e);confirm(`Are you sure you want to delete this ${n}?`)&&g.post(s.attr("href"),()=>{n==="pic"?(s.remove(),_t.fancyRemove(g(`[id="bbspost_img_${o}"]`).parent())):_t.fancyRemove(g(`[id="bbspost${o}_post_text"]`).parent())})},enableImageModeration:t=>{const e=g(t);er.enableImageModeration(e,o=>{const n=Number.parseInt(e.closest("[data-post-id]").attr("data-post-id"));jr.deleteImageUpload(e.attr("src"),rn.contentType,n,()=>{o()})})},loadFormOnClick:(t,e,o,n,s,a)=>{if(t.preventDefault(),a&&!confirm("This is not your post, are you sure you want to edit?"))return!1;if(!we.get("user_logged_in")){PassportHandler.open();return}const h=g(e);rn.loadForm(o,h.attr("href"),`${n}`,s)},loadForm:(t,e,o,n)=>{rn.form_id++;const s=rn.form_id,a=new ye({remove_on_click_outside:!1,remove_on_hide:!0}),h=n||"post",u=g(o);ke.addListener(`bbs-form-loaded-${s}`,p=>{if(!p.result||typeof p.result.url>"u"){p.posthandler.handled_by_event=!0,alert("There was an unexpected problem with your post.");return}if(u.length<1||typeof p.result.html>"u"){a.hide(),p.posthandler.handled_by_event=!1;return}if(h==="edit")console.log(s),p.posthandler.handled_by_event=!0,g(`[id="bbspost${t}_post_text"]`).up(".column").replaceWith(g(p.result.html)),a.setBody("<p><strong>Changes Saved!</strong></p>"),setTimeout(()=>{a.hide()},750);else{console.log(`No context was given here or it was post? ${h}`),p.posthandler.handled_by_event=!0,a.hide(),u.css("display","block");let T=u.closest(".blackout-hover"),v;T.length<1?(T=g("html,body"),v=u.offset().top):v=u.position().top,v+=u.outerHeight();let m=g("<div>");m.append(g(p.result.html)),m=g("div:first",m),p.result.noscroll||T.stop().animate({scrollTop:v},300),u.append(m),m.width()&&m.attr("data-scale-width",m.width()),m.hide(),setTimeout(()=>{g("[data-smart-scale]",m).each(()=>{new Qe.smartscale(g(void 0))})},1),m.css("visibility","hidden"),setTimeout(()=>{m.css("visibility","").hide(),m.fadeIn(800,()=>{})},250)}}),a.load(e,{form_id:s,container_id:u.attr("id"),from_page:we.get("bbs_topic_page",0)}),a._onfail=function(){this.hide()}}};ke.addListener("bbs-user-banned",t=>{const e=g(`[data-ban-details-for="${t.user.toLowerCase()}"]`),o=g(t.html);e.html(o.html())});const Zo=t=>t==="text"?"sig text":t==="pic"?"sig banner":"signature",Qo={deleteFromClick:(t,e,o,n)=>{t.preventDefault();const s=g(e),a=Zo(n);if(!confirm(`Are you sure you want to delete this ${a}?`))return;const h=g(`[id^="bbs_sig_"][id$="_${o}"]`);function u(T){g(".sig-text",T).remove(),g('[id^="delete_sig_text_"]',T).remove()}function p(T){g(".sig-image",T).remove(),g('[id^="delete_sig_pic_"]',T).remove()}g.post(s.attr("href"),()=>{g('[id^="delete_sig_both_"]',h).remove(),n==="both"?(u(h),p(h)):n==="pic"?p(h):u(h)})},onUpdated:(t,e)=>{const o=we.get("activeuser"),n=o!=null&&o.id?o.id===t:!1;g(`div.bbs-sig[id$="_${t}"]`).each(function(){const s=g("div.sig-text:first",g(this)),a=g("div.sig-image:first",g(this)),h=g("img:first",a),u=g("a:first",a);function p(){u.removeAttr("href")}function T(){h.removeAttr("src"),p()}let v,m;for(m in e)switch(v=g.trim(e[m]),m){case"image":v?h.attr("src",v).removeAttr("width").removeAttr("height"):T();break;case"link":v?u.attr("href",v):p();break;case"text":v?s.html(v):s.html("")}!g.trim(s.html())&&!h.attr("src")?n?g(".add-signature-link",g(this)).show():g(this).hide():n?g(".add-signature-link",g(this)).hide():g(this).show()})}},Fr={contentType:4001,enableImageModeration:t=>{const e=g(t);er.enableImageModeration(e,o=>{const n=Number.parseInt(e.closest("[data-post-id]").attr("data-post-id"));uploads.deleteImageUpload(e.attr("src"),Fr.contentType,n,()=>{o()}),e.closest("[data-image-deletion]").addClass("hidden")})}},Hr={handlers:{},addHandler:function(t,e){this.handlers[e]=t},execute:function(t,e){let o=null;const n=t.split(".");let s,a=window;function h(u){console.error(`data-exec-script='${t}' refers to undefined or unregistered object at '${u}'.`)}for(;n.length>0;){if(s=n.shift(),o){if(!o[s])return h(s),!1;o=o[s]}else{if(!this.handlers[s])return h(s),!1;o=this.handlers[s]}n.length>0&&(a=o)}return typeof o!="function"&&console.error(`data-exec-script='${t}' refers to ${typeof o}. Must be a function.`),e?Array.isArray(e)?o.apply(a,e):o(e):o()}},ti={};ti.picker=function(t){let e;const o=g(t);let n=!1;const s=g('input[type="text"]',o).first();ti.autoid++;let a=`__color_picker_swatch${ti.autoid}`;const h=g("<input />");h.attr("type","color"),ti.supportsColorInput()?h.attr("id",a):s.is("[id]")?a=s.attr("id"):s.attr("id",a);const u=g("<label />");u.attr("for",a);const p=g("<div />");p.attr("class","color-picker-swatch"),h.appendTo(p),u.appendTo(p),p.appendTo(o),h.outerHeight(s.outerHeight()),h.outerWidth(30),this.sync=T=>{n=!0,s.val(T),h.val(T),u.css("background-color",T),e=T,n=!1},this.onChange=T=>{},this.value=function(T){if(typeof T>"u")return s.val();T!==e&&(this.sync(T),this.onChange(this.value()))},s.on("change keyup paste",()=>{if(n)return;const T=s.val();if(s.removeClass("notation"),!ti.isValidHexCode(T)){s.addClass("notation");return}T!==e&&(this.sync(T),this.onChange(this.value()))}),h.on("change",()=>{if(n)return;const T=h.val();T!==e&&(this.sync(T),this.onChange(this.value()))}),e=s.val(),(!e||!ti.isValidHexCode(e))&&(e="#000000"),this.sync(e)},ti.autoid=0,ti.isValidHexCode=t=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t),ti.supportsColorInput=()=>{const t=g('<input type="color" value="!" />')[0];return t.type==="color"&&t.value!=="!"};const wt={};wt.playback_items={},wt.playlists={},wt.current_playlist=null,wt.global_player=null,wt.registerPlaybackItem=function(t){let e=t;return typeof e=="string"&&(e=g(`#${e}`)),e.attr("data-registered")?this:(new wt.playbackItem(e),this)},wt.registerPlaylistWrapper=function(t){let e=t;return typeof e=="string"&&(e=g(`#${e}`)),e.attr("data-registered")?this:(new Wt.audioList(e),this)},wt.registerGlobalPlayer=function(t,e,o){const n=this,s=new Qe.player(t,e,o);s.autoplay=!0,g("[data-audio-playback]").each(function(){n.registerPlaybackItem(g(this))}),Wt.audioList.global||g("[data-audio-playlist]").each(function(){n.registerPlaylistWrapper(g(this))});function a(d){s.setDisplay(d.html)}function h(d){var b;(b=d.playbackItem)!=null&&b.$element&&(d.playbackItem.$element.addClass("playing"),d.playbackItem.$element.removeClass("paused"))}function u(d){var b;(b=d.playbackItem)!=null&&b.$element&&(d.playbackItem.$element.removeClass("playing"),d.playbackItem.$element.removeClass("paused"))}function p(d){var b;(b=d.playbackItem)!=null&&b.$element&&(d.playbackItem.$element.removeClass("playing"),d.playbackItem.$element.addClass("paused"))}function T(d){var b;(b=d.playbackItem)!=null&&b.$element&&(d.playbackItem.$element.addClass("playing"),d.playbackItem.$element.removeClass("paused"))}const v=g("#global-audio-player-volume"),m=g(".media-player-volume-toggle a",v).first();function f(d){v&&v.length>0&&(m.removeClass("fa-volume-up"),m.removeClass("fa-volume-down"),m.removeClass("fa-volume-off"),d>.5?m.addClass("fa-volume-up"):d<=0?m.addClass("fa-volume-off"):m.addClass("fa-volume-down"))}s.onMediaLoaded=a,s.onMediaStarted=h,s.onMediaEnded=u,s.onMediaPaused=p,s.onMediaUnpaused=T,s.onVolumeChange=f,f(Qe.audio.volume),this.global_player=s},wt.playbackItem=function(t){let e=t;typeof e=="string"&&(e=g(`#${e}`)),this.$element=e,this.$element.attr("data-registered",1);let o=this.$element.attr("data-audio-playback");if(o=Number.parseInt(o),!o||Number.isNaN(o)){console.error("Invalid data-audio-playback value",this.$element.attr("data-audio-playback"));return}this.id=Wt.idFor(this.$element),this.media=new Qe.audio(o),this.media.playbackItem=this,this.valid=!0,this.$element.show(),this.$element.off("click"),this.$element.click(()=>(this.play(),!1)),wt.playback_items[this.id]=this,Wt.audioList.global!==null&&Wt.audioList.global.addPlaybackItem(this)},wt.playbackItem.prototype={valid:!1,media:null,id:null,getPlaylist:function(){const t=this.$element.attr("data-audio-playlist-id");return t?wt.playlists[t]:null},play:function(){if(wt.global_player.current_media_item===this.media){wt.global_player.playing?wt.global_player.pause():wt.global_player.play();return}const t=this.getPlaylist();t?(t.setCurrentItem(this.media),t.play()):wt.global_player&&(wt.global_player.stop(),wt.global_player.setPlaylist(null),wt.global_player.setMedia(this.media))}},wt.global_player=null;const Yo=`<div class="ng-video-player">
  <video style="visibility: hidden" preload="none" playsinline></video>
  <div class="ng-video-close-overlay">
    <a data-action="close"><em class="far fa-times-circle"></em></a>
  </div>
  <div class="ng-video-meta" style="display: none">
    <a class="ng-video-link">
      <h2 data-value="title">Movie Title</h2>
      <strong data-value="author">By author</strong>
    </a>
  </div>
  <div class="ng-video-postroll">
    <div class="inner">
      <div class="icons">
        <div class="grid"></div>
      </div>
    </div>
  </div>
  <div class="ng-video-ui">
    <div class="ng-video-ui-inner">
      <div class="ng-video-mobile-timeline"></div>
      <div class="flexbox align-center">
        <div class="ng-video-controls">
          <button data-action="previous" title="Previous Video">
            <em class="ngmedia-icon-skip-back"></em>
          </button>
          <button data-action="backward" title="Previous Frame">
            <em class="ngmedia-icon-fbf-back"></em>
          </button>
          <button data-action="play" title="Play">
            <em class="ngmedia-icon-play"></em>
          </button>
          <button data-action="pause" title="Pause">
            <em class="ngmedia-icon-pause"></em>
          </button>
          <button data-action="forward" title="Next Frame">
            <em class="ngmedia-icon-fbf-next"></em>
          </button>
          <button data-action="next" title="Next Video">
            <em class="ngmedia-icon-skip-forward"></em>
          </button>
          <button data-action="repeat" title="Repeat">
            <em class="ngmedia-icon-repeat"></em>
          </button>
        </div>
        <div class="ng-video-timeline flex-1">
          <div class="ng-video-timeline-outer">
            <div class="ng-video-timeline-inner">
              <div class="ng-video-timeline-bar"></div>
              <div class="ng-video-pointer">
                <span data-value="current-time-pointer">00:00</span>
              </div>
              <div class="ng-video-cursor">
                <span data-value="current-time-cursor">00:00</span>
              </div>
            </div>
          </div>
        </div>
        <div class="ng-video-time">
          <span data-value="current-time">--:--</span> /
          <span data-value="total-time">--:--</span>
        </div>
        <div class="ng-video-volume">
          <div class="ng-video-volume-slider">
            <div>
              <div class="ng-video-volume-slider-bar"></div>
            </div>
          </div>
          <button data-action="volume" title="Volume">
            <em data-icon="volume" class="ngmedia-icon-vol-med"></em>
          </button>
        </div>
        <div class="ng-video-display">
          <button data-action="display-options" title="Display Options">
            <em class="ngmedia-icon-options"></em>
            <span class="ng-video-hd-label"></span>
          </button>
          <div class="ng-option-select">
            <div class="ng-video-options" data-options="other">
              <button data-action="fixed-on" class="selected">
                Fix to Top
              </button>
              <button data-action="fixed-off">Fix to Top</button>
              <button data-action="titles-on" class="selected">
                Titles On
              </button>
              <button data-action="titles-off">Titles Off</button>
            </div>
            <div class="ng-video-options" data-options="res"></div>
          </div>
        </div>
        <div class="ng-video-size">
          <button data-action="size-options" title="Player Size">
            <em class="ngmedia-icon-player-large"></em>
          </button>
          <div class="ng-option-select">
            <div class="ng-video-options" data-options="other">
              <button
                data-action="screenmode-large"
                class="selected"
                title="Auto-Fit"
              >
                <em class="ngmedia-icon-player-large"></em>
              </button>
              <button
                data-action="screenmode-medium"
                class="selected"
                title="Large"
              >
                <em class="ngmedia-icon-player-medium"></em>
              </button>
              <button
                data-action="screenmode-small"
                class="selected"
                title="Small"
              >
                <em class="ngmedia-icon-player-small"></em>
              </button>
            </div>
            <div class="ng-video-options" data-options="size"></div>
          </div>
        </div>
        <div class="ng-video-options">
          <button data-action="enter-fullscreen" title="Fullscreen">
            <em class="ngmedia-icon-enter-fullscreen"></em>
          </button>
          <button data-action="exit-fullscreen" title="Exit Fullscreen">
            <em class="ngmedia-icon-exit-fullscreen"></em>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
`;let Ur=0;function Hi(t){const e=Number.parseFloat(t);return Number.isNaN(e)?1:e<0?0:e>1?1:e}class Tn{constructor(){it(this,Ui,"_ngPlayerVolume_");it(this,zi,"_ngPlayerMuted_")}get volume(){const e=Ot.getItem(ve(this,Ui));return Number.isNaN(e)?null:Hi(Ot.getItem(ve(this,Ui)))}set volume(e){const o=Hi(e);Ot.setItem(ve(this,Ui),o)}get muted(){const e=Ot.getItem(ve(this,zi));return e==null?null:Ot.getItem(ve(this,zi))}set muted(e){const o=!!e;Ot.setItem(ve(this,zi),o)}}Ui=new WeakMap,zi=new WeakMap;class zr{constructor(e,o){it(this,ln);it(this,_i);it(this,wi,!1);let n=e;const s=bt(),a=we.get("ismobile");let h=o;const u=this;this.id=++Ur,this.dragging=!1,this.focused=!1,this.justfocused=!1,this.global=!1,this.ended=!1,this.cleantimout=0,this.fps=24,this.framerate=1/this.fps,this.pos={percent:0,current:"--:--",current_full:"--:--.-",total:"--:--"},this.url=null,this.title=null,this.author=null,this.fbf=!1,this.timeline_hover=!1,this.duration=0,typeof n=="string"&&(n=g(n)),typeof h>"u"&&(h={}),this.$container=n,this.paused=!0,this.active=!1,this.last_timeline=0,this.can_switch_screensize=!0;let p=h.template?h.template:Yo;a&&(p=p.split("ngmedia-icon-").join("ngmedia-icon-med-")),this.$wrapper=g(p),n.append(this.$wrapper),this.$video=g("video",this.$wrapper).first(),this.$video.removeAttr("controls");const T=this.$video[0];T.onended=()=>{this.onEnded()},T.ontimeupdate=()=>{this.updateTimeline()},this.ui={focus:null,$container:g(".ng-video-ui",this.$wrapper).first()},this.mouse={x:null,y:null,onmove:null,thisarg:u},this.$wrapper.on(Je.mouseMove,C=>{this.showControls()});const v=C=>{typeof this.mouse.onmove=="function"&&this.mouse.onmove.call(this.mouse.thisarg?this.mouse.thisarg:u,C)};g(document).on(Je.mouseMove,v),this.show_titles=Ot.getItem("_ngPreferredShowVideoTitles_",!1),this.fix_to_top=Ot.getItem("_ngPreferredFixedVideoPlayer_",1),this.loops=h.loops?h.loops:Ot.getItem("_ngPreferredLooping_",!1),this.screensize=h.screensize?h.screensize:Ot.getItem("_ngPreferredVideosize_","large"),this.screensize!=="small"&&this.screensize!=="medium"&&(this.screensize="large"),this.is_loop=!!h.is_loop,this.display_options_open=!1,this.size_options_open=!1,Me(this,wi,!1);const m=g(".ng-video-controls",this.ui.$container).first(),f=g(".ng-video-volume",this.ui.$container).first(),d=g(".ng-video-timeline",this.ui.$container).first(),b=g(".ng-video-display",this.ui.$container).first(),y=g(".ng-video-size",this.ui.$container).first();this.$video_size_menu=y,this.$barrier=g('<div class="ng-video-barrier"></div>').hide(),this.$barrier_wrapper=null,this.$meta=g(".ng-video-meta",this.$wrapper).first(),this.$meta.hide(),this.$postroll=g(".ng-video-postroll",this.$wrapper).first(),this.$postroll_icons=g(".icons",this.$postroll).first(),this.$postroll_grid=g(".grid",this.$postroll).first();for(let C=0;C<6;C++){const M=g(`<a class="item" href="/movies"><img src="${we.get("img_root")}/defaults/icon-portal-xl.webp"><p>MORE Movies!</p></a>`);this.$postroll_grid.append(M)}if(this.$postroll.hide(),this.postroll_id=h.postroll_id?Number.parseInt(h.postroll_id):!1,this.postroll_timers=[],h.barrier){n.append(this.$barrier),this.$barrier.html(h.barrier).show(),this.$barrier_wrapper=g("div.icon-wrapper",this.$barrier).first(),this.$barrier_img=g("img",this.$barrier).first();const C=g('[data-action="play"]',this.$barrier),M=P=>{if(P.preventDefault(),P.stopPropagation(),this.$barrier.remove(),this.$barrier_wrapper=null,C.attr("data-movie-id")){const N=Number.parseInt(C.attr("data-movie-id"));this.loadMovieByID(N),this.postroll_id=N}return this.setFocused(),this.showControls(!0),this.firstTimePlay=null,!1};this.firstTimePlay=M,C.click(M)}this.ui.$close_container=g(".ng-video-close-overlay",this.$wrapper).first(),this.ui.$close_container.hide(),this.ui.$close=g('[data-action="close"]',this.ui.$close_container).first(),this.ui.$play=g('[data-action="play"]',m).first(),this.ui.$pause=g('[data-action="pause"]',m).first(),this.ui.$backward=g('[data-action="backward"]',m).first(),this.ui.$forward=g('[data-action="forward"]',m).first(),this.ui.$previous=g('[data-action="previous"]',m).first(),this.ui.$next=g('[data-action="next"]',m).first(),this.ui.$repeat=g('[data-action="repeat"]',m).first(),this.ui.$enter_fullscreen=g('[data-action="enter-fullscreen"]',this.ui.$container).first(),this.ui.$exit_fullscreen=g('[data-action="exit-fullscreen"]',this.ui.$container).first(),this.ui.$screenmode_btn=g('[data-action^="screenmode"]',this.ui.$container),this.ui.$current_time=g('[data-value="current-time"]',this.ui.$container),this.ui.$current_time_pointer=g('[data-value="current-time-pointer"]',this.ui.$container),this.ui.$current_time_cursor=g('[data-value="current-time-cursor"]',this.ui.$container),this.ui.$total_time=g('[data-value="total-time"]',this.ui.$container),this.ui.$size_toggle=g('[data-action="size-options"]',y).first(),this.ui.$size_select=g(".ng-option-select",y).first(),this.ui.$display_toggle=g('[data-action="display-options"]',b).first(),this.ui.$display_select=g(".ng-option-select",b).first(),this.ui.$res_options=g('[data-options="res"]',this.ui.$display_select).first(),this.ui.$other_options=g('[data-options="other"]',this.ui.$display_select).first(),this.ui.$titles_on=g('[data-action="titles-on"]',this.ui.$other_options).first(),this.ui.$titles_off=g('[data-action="titles-off"]',this.ui.$other_options).first(),this.ui.$fixed_on=g('[data-action="fixed-on"]',this.ui.$other_options).first(),this.ui.$fixed_off=g('[data-action="fixed-off"]',this.ui.$other_options).first(),this.ui.$hd_label=g(".ng-video-hd-label",b).first();const _=()=>{this.ui.$fixed_off.hide(),this.ui.$fixed_on.hide(),this.global&&(this.fix_to_top?this.ui.$fixed_on.show():this.ui.$fixed_off.show(),Ot.setItem("_ngPreferredFixedVideoPlayer_",this.fix_to_top))};this.setGlobal=C=>{this.global=C,_()};const A=()=>{this.ui.$titles_off.hide(),this.ui.$titles_on.hide(),this.show_titles?this.ui.$titles_on.show():this.ui.$titles_off.show()},w=()=>{A(),Ot.setItem("_ngPreferredShowVideoTitles_",this.show_titles),this.hideSizeOptions(),this.hideDisplayOptions(),this.showTitles()};this.ui.$fixed_on.click(C=>{C.preventDefault(),C.stopPropagation(),this.fix_to_top=!1,_(),this.global&&this.global.updateFixed()}),this.ui.$fixed_off.click(C=>{C.preventDefault(),C.stopPropagation(),this.fix_to_top=!0,_(),this.global&&this.global.updateFixed()}),this.ui.$titles_on.click(C=>{C.preventDefault(),C.stopPropagation(),this.show_titles=!1,w()}),this.ui.$titles_off.click(C=>{C.preventDefault(),C.stopPropagation(),this.show_titles=!0,w()}),h.barrier?A():w(),this.ui.$mobile_timeline=g(".ng-video-mobile-timeline",this.ui.$container).first(),this.ui.$timeline=g(".ng-video-timeline-outer",d).first(),this.ui.$timeline_inner=g(".ng-video-timeline-inner",d).first(),this.ui.$timeline_bar=g(".ng-video-timeline-bar",d).first(),this.ui.$timeline_pointer=g(".ng-video-pointer",this.ui.$container).first(),this.ui.$timeline_cursor=g(".ng-video-cursor",this.ui.$container).first(),this.ui.$timeline_pointer.hide(),a&&this.ui.$timeline_cursor.remove(),this.ui.$timeline_cursor.hide(),this.ui.$volume=g(".ng-video-volume-slider",f).first(),this.ui.$volume_bar=g(".ng-video-volume-slider-bar",f).first(),this.ui.$volume_btn=g('[data-action="volume"]',f).first(),this.ui.$volume_icon=g('[data-icon="volume"]',f).first(),this.ui.$close.on("click",C=>{C.preventDefault(),C.stopPropagation(),this.doOnClose()}),a&&(this.ui.$timeline.remove(),this.ui.$mobile_timeline.append(this.ui.$timeline)),typeof h.onScreensizeChanged=="function"?(this.onScreensizeChanged=h.onScreensizeChanged,this.ui.$screenmode_btn.on("click",function(){const C=g(this).attr("data-action").split("-").pop();u.setScreenSize(C)}),this.setScreenSize(this.screensize)):y.hide(),this.ui.$timeline.on("mouseenter touchstart",C=>{this.source_loaded&&(this.timeline_hover=!0,this.mouse.onmove=this.updateCursor,this.ui.$timeline_cursor.show(),this.updateCursor(C),this.updateTimeline(),this.hideSizeOptions(),this.hideDisplayOptions(),this.hideVolume())}),this.ui.$timeline.mouseleave(C=>{this.source_loaded&&(this.timeline_hover=!1,this.mouse.onmove===this.updateCursor&&(this.mouse.onmove=null),this.ui.$timeline_cursor.hide(),this.updateCursor(C),this.updateTimeline())}),this.ui.$timeline.mousemove(C=>{this.source_loaded&&(!this.timeline_hover&&this.mouse.onmove!==this.updateCursor&&(this.timeline_hover=!0,this.ui.$timeline_cursor.show(),this.mouse.onmove=this.updateCursor),this.timeline_hover&&this.updateCursor(C))}),this.ui.$timeline.on(Je.mouseDown,C=>{this.source_loaded&&(C.preventDefault(),this.clickTimeline(C))}),this.ui.$volume.on(Je.mouseDown,C=>{C.preventDefault(),this.clickVolume(C)});const O=C=>{this.releaseTimeline(),this.releaseVolume(),setTimeout(()=>{this.dragging=!1},100)};if(g("body").on(Je.mouseUp,O),this.loops&&this.ui.$repeat.addClass("on"),this.ui.$repeat.click(()=>(this.loops=!this.loops,Ot.setItem("_ngPreferredLooping_",this.loops),this.loops?this.ui.$repeat.addClass("on"):this.ui.$repeat.removeClass("on"),!1)),this.ui.$pause.hide(),this.ui.$exit_fullscreen.hide(),this.ui.$timeline_bar.width(0),this.ui.$volume.hide(),this.setPlaylistID(h.playlist_id),this._on_close_callback=null,this._on_close_thisarg=this,this.onClose(h.on_close?h.on_close:null,h.on_close_target?h.on_close_target:this),this.ui.$container.click(C=>(C.stopPropagation(),C.preventDefault(),!1)),this.$wrapper.on("mousedown",C=>{this.setFocused()}),h.hide_ui)for(const C of h.hide_ui){const M=`$${C}`;this.ui[M]&&this.ui[M].hide()}const k=()=>{this.justfocused||(this.focused=!1)},S={nextFrame:[".",">"],prevFrame:[",","<"],playNext:["ArrowRight"],playPrevious:["ArrowLeft"],addVolume:["ArrowUp"],lowerVolume:["ArrowDown"],toggleMute:["m","M"],toggleFullScreen:["f","F"],togglePause:[" "],jumpToTimePercentFromKey:["1","2","3","4","5","6","7","8","9","0"]},R=C=>{if(this.focused)for(const M in S)S[M].indexOf(C.key)>-1&&(C.stopPropagation(),C.preventDefault(),this[M]("key",C.key))};if(g(document).on("mousedown",k),g(document).on("keydown",R),u.$wrapper.click(()=>{if(!this.dragging){if(ve(this,wi)||this.display_options_open||this.size_options_open){this.hideVolume(),this.hideSizeOptions(),this.hideDisplayOptions();return}return this.showControls(),(!a||!this.active)&&(this.paused?this.play():this.pause()),!1}}),u.ui.$enter_fullscreen.click(()=>(u.requestFullScreen(),!1)),u.ui.$exit_fullscreen.click(()=>(u.exitFullScreen(),!1)),u.ui.$play.click(C=>{if(u.firstTimePlay){const M=u.firstTimePlay(C);if(u.firstTimePlay=null,M===!1)return}return u.showControls(),u.paused?u.play():u.pause(),!1}),u.ui.$pause.click(()=>(u.showControls(),u.pause(),!1)),u.ui.$backward.click(()=>(u.prevFrame("mouse"),!1)),u.ui.$forward.click(()=>(u.nextFrame("mouse"),!1)),u.volume=1,u.ui.$volume_btn.click(()=>{if(u.hideSizeOptions(),u.hideDisplayOptions(),a){u.hasVolume()?u.setVolume(0):u.setVolume(1),u.showControls();return}return u.volumeIsOpen()?u.hideVolume():u.showVolume(),!1}),u.ui.$size_toggle.click(C=>(C.preventDefault(),C.stopPropagation(),u.size_options_open?u.hideSizeOptions():u.showSizeOptions(),u.hideVolume(),u.hideDisplayOptions(),!1)),u.ui.$display_toggle.click(C=>(C.preventDefault(),C.stopPropagation(),u.display_options_open?u.hideDisplayOptions():u.showDisplayOptions(),u.hideVolume(),u.hideSizeOptions(),!1)),!h.width&&!h.height&&(h.width="auto",h.height=0),a)for(const C in u.ui)C.indexOf("$")===0&&u.ui[C].is("button")&&u.ui[C].on("touchend",function(M){M.preventDefault(),g(this).click()});else u.$wrapper.mouseleave(()=>{u.active&&u.hideControls()});u.width=h.width?h.width:0,u.height=h.height?h.height:0,u.width==="auto"?(u.fillWidth(),setTimeout(()=>{u.fillWidth()},100)):u.height==="auto"?(u.fillHeight(),setTimeout(()=>{u.fillHeight()},100)):u.$wrapper.width(u.width).height(u.height),h.sources?(u.sources=h.sources,u.source_loaded=!0):(u.source_loaded=!1,u.sources={"360p":[{type:"video/mp4",src:"data:video/mp4;base64, AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"}]}),u.setSources(),h.sources||u.$wrapper.removeClass("ready"),u.initialized=!1,u.updateTimeline(),s&&u.$video[0].addEventListener("webkitendfullscreen",C=>{C.preventDefault(),C.stopPropagation(),u.onExitFullscreen()}),u.$video[0].onpause=()=>{u.onVideoPaused()};function l(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?u.onEnterFullScreen():u.onExitFullscreen(),we.get("ismobile")&&(u.width==="auto"?u.fillWidth():u.height==="auto"&&u.fillHeight()),u.updateItemGrid()}ke.addListener(ke.resize,l),u.destroy=()=>{ke.removeListener(ke.resize,l),g(document).off(Je.mouseMove,v),g(document).off(Je.mouseUp,O),g(document).off("mousedown",k);for(const C in u.ui)C.charAt(0)==="$"&&u.ui[C].off();for(const C in u)C.charAt(0)==="$"&&u[C]&&(u[C].off?u[C].off():console.warn(`Couldn't find off method on ${C}`));g(document).off("mousedown",k),g(document).off("keydown",R),u.playlist_id&&(T.stopPlaybackItem(u.playlist_id),delete T.playlists[u.playlist_id].player,u.$wrapper.remove())}}volumeIsOpen(){return ve(this,wi)}hidePostRoll(){this.$postroll.hide();for(const e of this.postroll_timers)e&&clearTimeout(e)}showPostRoll(){if(!this.postroll_id)return;this.hidePostRoll(),this.postroll_timers=[];const e=g(".item",this.$postroll_grid);e.css("transition",""),e.css("transform","scale(0)"),e.css("transition","transform 0.33s"),e.off("click"),e.on("click",o=>{o.stopPropagation()}),g.get(`${we.get("www_root")}/portal/exitroll/${this.postroll_id}`,o=>{this.postroll_timers.push(setTimeout(()=>{this.$meta.hide(),this.$postroll.fadeIn(500)},2e3));let n=2500;const s=150;let a=0,h;for(h=o.item.length-1;h>0;h--){const p=Math.floor(Math.random()*h),T=o.item[h];o.item[h]=o.item[p],o.item[p]=T}const u=()=>{const p=g(e[a]);a++,p.css("transform","scale(1)")};for(h=0;h<e.length;h++){const p=g(e[h]);h<o.item.length?(p.attr("href",o.item[h].url),p.attr("data-postroll-id",o.item[h].id),g("img",p).attr("src",o.item[h].icon),g("p",p).html(`<strong></strong><br/>by ${o.item[h].author}`),g("strong",p).text(o.item[h].title)):p.attr("data-postroll-id",""),this.postroll_timers.push(setTimeout(u,n)),n+=s}},"json")}updateItemGrid(){const e=we.get("ismobile"),o=this.$container.innerHeight(),n=this.$wrapper.innerWidth();this.$postroll_grid.attr("class","grid");let s=3,a=2;e&&(s=2,a=1);const h=488*s,u=278*a;let p=h*(o/u);p>1280&&(p=1280),p>n&&(p=n),this.$postroll_icons.width(p),this.$postroll_grid.addClass(`show-${a*s}`)}canSwitchScreensize(e){e!==this.can_switch_screensize&&(e?(this.$video_size_menu.show(),this.setScreenSize(this.screensize)):this.$video_size_menu.hide())}setScreenSize(e){const o=we.get("ismobile");let n=e;n!=="small"&&n!=="large"&&(n="medium"),Ot.setItem("_ngPreferredVideosize_",n),this.screensize=n;const s=o?"ngmedia-icon-med-player-":"ngmedia-icon-player-";g("em",this.ui.$size_toggle).first().attr("class",s+n),this.onScreensizeChanged(n)}loadMovieByID(e,o){this.init(()=>{this.pause(),g.get(`${we.get("www_root")}/portal/video/${e}`,n=>{n.error?(console.error(n.error),alert(n.error.msg)):n.sources&&(typeof o=="function"&&o(n),this.setMeta(n),this.$video[0].load(),this.$video[0].currentTime=0,this.play()),n.warning&&console.warn("NG Video Warning:",n.warning)},"json")})}togglePause(e){this.paused?this.play():this.pause(),this.hidePostRoll()}prevFrame(e){const o=this.$video[0];if(e==="mouse"&&this.showControls(),Number.isNaN(o.duration)||Number.isNaN(o.currentTime))return;let n=o.currentTime-this.framerate;n<0&&(n=o.currentTime<=0?o.duration:0),this.pause(),e==="mouse"&&this.showControls(!0),o.currentTime=n,this.fbf=!0,this.updateTimeline(),this.hidePostRoll()}nextFrame(e){const o=this.$video[0];if(e==="mouse"&&this.showControls(),Number.isNaN(o.duration)||Number.isNaN(o.currentTime))return;let n=o.currentTime+this.framerate;n>o.duration&&(n=o.currentTime>=o.duration?0:o.duration),this.pause(),e==="mouse"&&this.showControls(!0),o.currentTime=n,this.fbf=!0,this.updateTimeline(),this.hidePostRoll()}playPrevious(e){this.playlist_id&&Ie.playPrevious(this.playlist_id),this.hidePostRoll()}playNext(e){this.playlist_id&&Ie.playNext(this.playlist_id),this.hidePostRoll()}onClose(e,o){this._on_close_callback=e||null,this._on_close_thisarg=o||this,typeof this._on_close_callback=="function"?this.ui.$close_container.show():this.ui.$close_container.hide()}doOnClose(){return this._on_close_callback?(this._on_close_thisarg?this._on_close_callback.call(this._on_close_thisarg,this):this._on_close_callback(this),!0):!1}hideControls(){this.hideSizeOptions(),this.hideDisplayOptions(),this.hideVolume(),this.ui.$timeline_pointer.hide(),this.ui.$timeline_cursor.hide(),this.fbf=!1,this.$wrapper.addClass("clean"),this.cleantimout&&clearTimeout(this.cleantimout),this.onHideControls()}setPlaylistID(e){this.playlist_id=e||e===0?e:!1,this.playlist_id?(this.ui.$previous.show().off("click"),this.ui.$next.show().off("click"),this.ui.$previous.on("click",()=>(this.playPrevious("mouse"),!1)),this.ui.$next.on("click",()=>(this.playNext("mouse"),!1))):(this.ui.$previous.hide(),this.ui.$next.hide())}updateBarrierWidth(){if(this.$barrier_wrapper&&this.$barrier_img.length>0){const e=this.$barrier_img[0];if(!e.naturalWidth)return;const o=this.$container.innerHeight();if(o>=e.naturalHeight)this.$barrier_wrapper.css("max-width","100%");else{const n=o/e.naturalHeight;this.$barrier_wrapper.css("max-width",`${Math.floor(e.naturalWidth*n)}px`)}}}fillWidth(){const e=this.$container.innerWidth();this.height==="fill"||Math.round(e/16*9),this.$wrapper.width(e).height(),this.updateBarrierWidth(),this.updateItemGrid(),this.onResize()}fillHeight(){const e=this.$container.innerHeight(),o=this.width==="fill"?"100%":Math.round(e/9*16);this.$wrapper.width(o).height(e),this.updateBarrierWidth(),this.updateItemGrid(),this.onResize()}onResize(){}setMeta(e){e.sources&&this.setSources(e.sources),this.source_loaded=!0,this.setUrl(e.url),this.setTitle(e.title),this.setAuthor(e.author),this.showTitles()}setUrl(e){e?g(".ng-video-link",this.$meta).attr("href",e):g(".ng-video-link",this.$meta).removeAttr("href"),this.url=e}setTitle(e){e?g('[data-value="title"]',this.$meta).text(e).show():g('[data-value="title"]',this.$meta).text("").hide(),this.title=e}setAuthor(e){e?g('[data-value="author"]',this.$meta).text(`By ${e}`).show():g('[data-value="author"]',this.$meta).text("").hide(),this.author=e}showTitles(){this.show_titles?(this.$meta.show(),g("a",this.$meta).fadeIn(1e3,()=>{setTimeout(()=>{g("a",this.$meta).fadeOut(1e3,()=>{this.$meta.hide()})},5e3)})):this.$meta.hide()}setSources(e){const o=this,n=we.get("ismobile");this.fbf=!1,e&&(this.sources=e),g("button",this.ui.$res_options).off("click"),this.ui.$res_options.html("");let s,a=Ot.getItem("_ngPreferredVideoResv2_");(typeof a>"u"||!a||a==="undefined")&&(a=n?"360p":"720p"),[360,720,1080].indexOf(a)>=0&&(a=`${a}p`),this.guessVolume(),this.resolution=null,this.resolutions=[];for(const h in this.sources)(this.resolution===null||h===a)&&(this.resolution=h),this.resolutions.push(h);if(this.hideDisplayOptions(),this.hideSizeOptions(),this.resolutions.length>1){this.ui.$res_options.show();for(const h of this.resolutions)s=g("<button>"),s.attr("data-value",h),s.html(h),h===this.resolution&&s.addClass("selected"),this.ui.$res_options.append(s),s.on("click",function(u){u.preventDefault(),g("button",o.ui.$res_options).removeClass("selected");const p=g(this).attr("data-value"),T=o.$video[0].currentTime,v=o.$video[0].paused;o.resolution=p,o.updateResolution(),o.$video[0].load(),o.$video[0].currentTime=T,v||o.play(),Ot.setItem("_ngPreferredVideoResv2_",p),o.hideDisplayOptions(),o.hideSizeOptions(),g(this).addClass("selected")})}else this.ui.$res_options.hide();this.updateResolution(),this.$wrapper.addClass("ready")}hideSizeOptions(){this.ui.$size_select.hide(),this.size_options_open=!1}showSizeOptions(){this.ui.$size_select.show(),this.size_options_open=!0}hideDisplayOptions(){this.ui.$display_select.hide(),this.display_options_open=!1}showDisplayOptions(){this.ui.$display_select.show(),this.display_options_open=!0}updateResolution(){this.$video.html("");const e={"8k":"8K","4k":"4K","1080p":"HD","720p":"HD","360p":""};this.ui.$hd_label.text(typeof e[this.resolution]>"u"?"":e[this.resolution]);for(const o of this.sources[this.resolution]){const n=g("<source>");if(typeof o=="string")n.attr("src",o);else{if(typeof o.src!="string")throw"Video source must be a string, or an object with a valid src property";typeof o.type=="string"&&n.attr("type",o.type),n.attr("src",o.src)}this.$video.append(n)}}getXY(e,o){var v;const n=we.get("ismobile");let s=e;n&&(s=((v=s.touches)==null?void 0:v[0])||s);const a=o.getBoundingClientRect(),h=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,u=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,p=a.left+u,T=a.top+h;return{x:s.pageX-p,y:s.pageY-T}}getTimelineX(e){const n=(e||this.$video[0].currentTime)/this.$video[0].duration;return this.ui.$timeline_inner.width()*n}getTimelineXFromEvent(e){let o=this.getXY(e,this.ui.$timeline_inner[0]).x;return o<0?o=0:o>this.ui.$timeline_inner.width()&&(o=this.ui.$timeline_inner.width()),o}getTimelinePercentFromEvent(e,o){let s=this.getTimelineXFromEvent(e)/this.ui.$timeline_inner.width();return o&&(s=`${Math.round(s*1e3)/10}%`),s}getTimeAt(e){const o=this.ui.$timeline_inner.width();let n=e;return n<0?n=0:n>o&&(n=o),this.$video[0].duration*(n/o)}toggleMute(e){const o=this.getLocalMuted()||!1;this.setMuted(!o)}changeMuted(e){Me(this,ln,e),this.setLocalMuted(e)}setMuted(e){if(this.changeMuted(e),e){this.setVolume(0,!0);return}const o=this.getLocalVolume()||1;this.setVolume(o,!0)}addVolume(){const e=Hi(ve(this,_i)+.1);this.setVolume(e)}lowerVolume(){const e=Hi(ve(this,_i)-.1);this.setVolume(e)}changeVolume(e){this.$video[0].volume=e,this.changeVolumeDisplay(e)}changeVolumeDisplay(e){const o=we.get("ismobile");e>0?this.$video.prop("muted",!1):this.$video.prop("muted",!0),this.ui.$volume_bar.height(`${e*1e4/100}%`);let n=o?"ngmedia-icon-med-":"ngmedia-icon-";e===0?n+="vol-off":e>=.75?n+="vol-high":e>=.2?n+="vol-med":n+="vol-low",this.ui.$volume_icon.attr("class",n)}getLocalMuted(){return new Tn().muted}setLocalMuted(e){const o=new Tn;o.muted=e}getLocalVolume(){return new Tn().volume}storeLocalVolume(e){const o=new Tn;o.volume=e}guessVolume(){const e=this.getLocalMuted()??!1,o=Hi(this.getLocalVolume());if(Me(this,_i,o),Me(this,ln,e),e){this.changeVolume(0);return}this.changeVolume(o)}hasVolume(){return ve(this,_i)>0}setVolume(e,o){const n=Hi(e);Me(this,_i,n),this.changeVolume(n),o||(this.storeLocalVolume(n),this.changeMuted(!(n>0)))}jumpToTimePercent(e){this.$video[0].currentTime=this.$video[0].duration*e}jumpToTimePercentFromKey(e,o){const n=Number.parseInt(o);Number.isNaN(n)||n<0||n>9||this.jumpToTimePercent(n/10)}clickTimeline(e){this.fbf=!1,this.ui.focus="timeline",this.showControls(),this.mouse.onmove=this.updateTimelineBar,this.updateTimelineBar(e),this.dragging=!0}updateCursor(e){const o=this.$video[0];let n,s,a;if(this.timeline_hover){const h=this.getTimelinePercentFromEvent(e),u=o.duration*h;if(Number.isNaN(u))return;this.ui.$timeline_cursor.css("left",`${Math.round(h*1e3)/10}%`),n=Math.floor(u),a=Math.floor((u-n)*100).toString(),s=Math.floor(n/60).toString(),n=(n%60).toString(),s.length<2&&(s=`0${s}`),n.length<2&&(n=`0${n}`),a.length<2&&(a=`0${a}`),this.ui.$current_time_cursor.text(`${s}:${n}.${a}`)}}updateTimelineBar(e){const o=this.getTimeAt(this.getTimelineXFromEvent(e));this.$video[0].currentTime=o}releaseTimeline(){this.ui.focus==="timeline"&&(this.ui.focus=null,this.showControls(),this.mouse.onmove===this.updateTimelineBar&&(this.mouse.onmove=null,this.timeline_hover=!1,this.ui.$timeline_cursor.hide(),this.ended&&this.play()))}clickVolume(e){this.fbf=!1,this.ui.focus="volume",this.showControls(),this.mouse.onmove=this.updateVolumeBar,this.updateVolumeBar(e),this.dragging=!0}updateVolumeBar(e){const o=this.ui.$volume_bar.parent(),n=o.innerHeight();let a=-(this.getXY(e,o[0]).y-n)/n;a<0?a=0:a>1&&(a=1),this.setVolume(a)}releaseVolume(){this.ui.focus==="volume"&&(this.ui.focus=null,this.showControls(),this.mouse.onmove===this.updateVolumeBar&&(this.mouse.onmove=null))}hideVolume(){this.showControls(),this.ui.$volume.hide(),Me(this,wi,!1)}showVolume(){this.showControls(),this.ui.$volume.show(),clearTimeout(this.cleantimout),Me(this,wi,!0)}requestFullScreen(){if(this.fbf=!1,bt()){this.$video[0].webkitEnterFullscreen();return}const o=this.$wrapper[0],n=o.webkitRequestFullscreen||o.requestFullScreen||o.mozRequestFullScreen;n&&(n.call(o),this.onEnterFullScreen())}toggleFullScreen(e){this.is_fullscreen?this.exitFullScreen():this.requestFullScreen()}onEnterFullScreen(){const e=we.get("ismobile"),o=bt();this.is_fullscreen=!0,this.ui.$exit_fullscreen.show(),this.ui.$enter_fullscreen.hide(),this.$wrapper.addClass("fullscreen"),e&&!o&&this.$wrapper.addClass("fullscreen-ios")}exitFullScreen(){if(bt()){this.$video[0].webkitExitFullScreen(),this.onExitFullscreen();return}if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement){const n=document,s=n.webkitExitFullscreen||n.exitFullScreen||n.mozCancelFullScreen;s&&s.call(n),this.onExitFullscreen()}}onExitFullscreen(){const e=we.get("ismobile"),o=bt();this.is_fullscreen=!1,this.ui.$exit_fullscreen.hide(),this.ui.$enter_fullscreen.show(),this.$wrapper.removeClass("fullscreen"),e&&!o&&this.$wrapper.removeClass("fullscreen-ios")}updateTimeline(){if(!this.source_loaded)return;const e=this.$video[0];let o,n,s;if(Number.isNaN(e.duration)||Number.isNaN(e.currentTime)||!e.duration)return;const a=e.currentTime/e.duration,h=`${Math.round(a*1e3)/10}%`;if(this.duration!==e.duration&&(this.duration=e.duration,o=Math.round(e.duration),n=Math.floor(o/60),o=o%60,o<10&&(o=`0${o}`),n<10&&(n=`0${n}`),this.pos.total=`${n}:${o}`,this.pos.total_frames=Math.ceil(e.duration*this.fps),this.ui.$total_time.text(this.pos.total)),o=Math.floor(e.currentTime),s=Math.floor((e.currentTime-o)*100).toString(),n=Math.floor(o/60).toString(),o=(o%60).toString(),n.length<2&&(n=`0${n}`),o.length<2&&(o=`0${o}`),s.length<2&&(s=`0${s}`),this.ui.$current_time.text(`${n}:${o}`),this.ui.$timeline_bar.width(h),this.fbf||this.timeline_hover){this.ui.$timeline_pointer.show();let u;this.fbf?u=`Frame ${Math.round(this.pos.total_frames*a)+1} / ${this.pos.total_frames+1}`:u=`${n}:${o}.${s}`,this.ui.$current_time_pointer.text(u),this.ui.$timeline_pointer.css("left",h)}else this.ui.$timeline_pointer.hide()}showControls(e){this.$wrapper.removeClass("clean"),this.cleantimout&&clearTimeout(this.cleantimout),e&&(this.active=!0),this.active&&(this.cleantimout=setTimeout(()=>{clearTimeout(this.cleantimout),this.hideControls()},2e3)),this.onShowControls()}onShowControls(){}onHideControls(){}init(e,o){this.hidePostRoll();const n=o||this;if(this.initialized){e.call(n);return}this.$video[0].play().then(()=>{this.$video[0].pause(),this.preInit(()=>{this.initialized=!0,typeof e=="function"&&e.call(n)},this)},()=>{console.error("NG Video can't be started outside of a user input event!")})}preInit(e,o){e.call(o||this)}play(){this.ended=!1,this.fbf=!1,this.$video.css("visibility",""),this.init(()=>{this.active=!0,this.paused=!1,this.$video[0].play(),this.ui.$play.hide(),this.ui.$pause.show()})}setFocused(){this.focused=!0,this.justfocused=!0,setTimeout(()=>{this.justfocused=!1,this.$wrapper.focus()},10)}reset(){this.$video[0].pause(),this.$video[0].currentTime=0,this.setFocused()}pause(){this.$video[0].pause()}onVideoPaused(){this.fbf=!1,this.paused=!0,this.ui.$play.show(),this.ui.$pause.hide()}onEnded(){this.fbf=!1,this.ended=!0,this.playlist_id?Ie.playNext(this.playlist_id)||this.pause():this.is_loop?(this.paused=!1,this.$video[0].currentTime=0,this.play()):(this.paused=!0,this.active=!1,this.showControls(),this.ui.$play.show(),this.ui.$pause.hide(),this.showPostRoll())}}ln=new WeakMap,_i=new WeakMap,wi=new WeakMap;const Ie={ids:Ur,player:zr,last_playlist_id:"default",playlists:{},initPlaylist:(t,e)=>{(typeof Ie.playlists[t]>"u"||e===!0)&&(Ie.playlists[t]={player:null,items:[],active:null},Ie.last_playlist_id=t)},registerPlayer:(t,e)=>{let o=e;o||(o=t.playlist_id?t.playlist_id:Ie.last_playlist_id),Ie.initPlaylist(o),Ie.playlists[o].player=t},registerPlaybackItem:function(t,e){let o=t,n=e;if(console.dir(o),typeof o=="string"&&(o=g(`#${o}`)),o.attr("data-registered"))return this;if(o.length<1)return this;n||(n=Ie.last_playlist_id),Ie.initPlaylist(n),Ie.playlists[n].items.push(new Ie.playbackItem(o,n,Ie.playlists[n].items.length))},playbackItem:function(t,e,o){if(t.attr("data-registered"))return;this.playlist_id=e,this.index=o,this.$element=t;let n=g('[data-action="play"]',t);n.length<1&&(n=t),t.attr("data-registered",1),this.item_id=t.attr("data-video-playback"),this.id=t.attr("id"),n.click(s=>{typeof Ie.playlists[this.playlist_id]<"u"&&typeof Ie.playlists[this.playlist_id].player<"u"&&(s.stopPropagation(),s.preventDefault(),Ie.startPlaybackItem(this).setFocused())})},playPrevious:function(t){const e=Ie.playlists[t];let o=e.active?e.active.index-1:0;if(o<0){if(!e.player.loops)return!1;o=e.items.length-1}return this.playIndex(t,o)},playNext:function(t){const e=Ie.playlists[t];let o=e.active?e.active.index+1:e.items.length-1;if(o>=e.items.length){if(!e.player.loops)return!1;o=0}return this.playIndex(t,o)},playIndex:function(t,e){const n=Ie.playlists[t].items[e];if(!n)throw`invalid playbackItem index ${e}`;return this.startPlaybackItem(n),!0},stopPlaybackItem:t=>{var e;(e=Ie.playlists[t])!=null&&e.active&&Ie.playlists[t].active.$element.removeClass("playing")},startPlaybackItem:t=>{if(typeof t>"u"||typeof t.playlist_id>"u"||!t.playlist_id){console.error("missing/invalid playbackItem",t);return}if(typeof Ie.playlists[t.playlist_id]>"u"&&console.warn("no playlist was definied for id ",t),typeof Ie.playlists[t.playlist_id].player>"u"||!Ie.playlists[t.playlist_id].player||Ie.playlists[t.playlist_id].player.playlist_id!==t.playlist_id){const o=Ie.player.getGlobal();o.setPlaylistID(t.playlist_id),Ie.playlists[t.playlist_id].player=o}const e=Ie.playlists[t.playlist_id].player;return Ie.playlists[t.playlist_id].active&&Ie.playlists[t.playlist_id].active.$element.removeClass("playing"),Ie.playlists[t.playlist_id].active=t,t.$element.addClass("playing"),e.loadMovieByID(t.item_id,o=>{ke.dispatch("playlist-item-started",o)}),e}};Ie.global_player=null,Ie.player.getGlobal=function(t){if(Ie.global_player===null){let A=function(){const P=we.get("ismobile");if(f=480,d=270,b=!0,P){const N=window.innerWidth,D=Math.floor(N/16*9);D<d?b=!1:Math.abs(D-d)<150&&(d=D,f=N,b=!1)}Ie.global_player&&Ie.global_player.canSwitchScreensize(b)},w=function(P){m=P,setTimeout(C,1)},S=function(){k?n.css("top",`${O}px`):n.css("top",`${v}px`)},R=function(P){},l=function(){const P=g(window).scrollTop();let N,D,B;if(m==="large"){N=Math.floor(window.innerWidth),D=Math.floor(window.innerHeight)-200;const G=Math.floor(D/9*16);G<N&&(N=G),!e&&N<990&&(N=990),D=Math.round(N/16*9)}else m==="medium"?(N=y,D=_):(N=f,D=d);N<f&&(N=f,D=d),B=D,!Ie.global_player.fix_to_top||P<T?(k=!1,O=0,n.removeClass("locked"),n.css("top",`${v}px`)):(k=!0,n.css("top","0px"),n.addClass("locked"),e||(B=Math.round(D-(P-T)),B<d&&(B=d)));const F="100%";return S(),{width:N,height:D,fixedwidth:F,fixedheight:B}},C=function(){A();const P=l();s.height(P.height),o.height(P.fixedheight),n.height(P.fixedheight),Ie.global_player.fillHeight()};const e=we.get("ismobile"),o=g("#ng-global-video-player"),n=g("#ng-global-video-player-wrapper"),s=g("#ng-global-video-player-shimwrap");let a=!1,h=!!t.show_player;const u=Math.floor(g("#notification-bar").outerHeight()),p=Math.floor(g("#header-nav-container").outerHeight()),T=e?77:p+u,v=e?T:p;let m=null,f,d,b;const y=980,_=550;A(),Ie.global_player=new zr(o,{height:"auto",width:"fill",barrier:t.barrier,movie_id:t.movie_id,hide_ui:t.hide_ui,is_loop:t.is_loop,onScreensizeChanged:w}),Ie.global_player.setGlobal(this),Ie.registerPlayer(Ie.global_player),Ie.global_player.visible=a;let O=e?u:0,k=!1;ke.addListener("notification-bar-moved",R),this.updateFixed=()=>{C()};const M=[n,s];Ie.global_player.preInit=(P,N)=>{let D=N;D||(D=Ie.global_player);const B=l();function F(){a||(o.width(B.fixedwidth),a=!0,P.call(D),g(document).on("scroll",C),C())}for(const G of M)h?(G.addClass("open").css("height",B.height),F(),Ie.global_player.preInit=(Y,H)=>{const ee=H||Ie.global_player;Y.call(ee)}):G.addClass("open").css("height","0px").animate({height:B.height},500,F)},Ie.global_player.onClose(()=>{g(document).off("scroll",C),ke.removeListener("notification-bar-moved",R),Ie.global_player.destroy(),Ie.global_player=null;for(const P of M)P.animate({height:0},200,()=>{P.removeClass("open"),Ie.player.getGlobal(t)})}),h&&Ie.global_player.preInit(()=>{}),h=!1}return Ie.global_player};const Wt={auto_id:0,nextAutoID:function(){return this.auto_id++,`ngutils-components-autoid-${this.auto_id}`},idFor:function(t){let e=t.attr("id");return e||(e=this.nextAutoID(),t.attr("id",e)),e}};Wt.audioList=function(t){const e=this;this.list=ngutils.media.getPlaylist("audio");let o=t||null;o!=="global"?(typeof o=="string"&&(o=$(`#${o}`)),this.$element=o,this.$element.attr("data-registered",1),this.id=ngutils.components.idFor(this.$element),$("[data-audio-playback]",this.$element).each(function(){const n=$(this).attr("id"),s=audio.playback_items[n];e.addPlaybackItem(s)})):(this.id="components.audioList.global",this.$element=null),audio.playlists[this.id]=this},Wt.audioList.global=null,Wt.audioList.enableGlobalPlaylist=t=>{},Wt.audioList.clearGlobalPlaylist=()=>{},Wt.audioList.prototype={addPlaybackItem:function(t){t!=null&&t.media&&(this.list.add(t.media),t.$element.attr("data-audio-playlist-id",this.id))},setCurrentItem:function(t){return this.list?this.list.setCurrentItem(t):console.error("This playlist wrapper has not been registered."),this},play:function(){audio.global_player&&(audio.global_player.stop(),audio.global_player.setPlaylist(this.list))},clear:function(){this.list.clear()}},Wt.audio=wt,Wt.video=Ie;const tr=function(t){var u;const e={message:"Are you sure?",title:null,icon:"question",confirmButtonText:"Confirm",confirmCallback:null,confirmCallbackThisArg:this,cancelButtonText:"Cancel",cancelCallback:null,cancelCallbackThisArg:this};if(typeof t=="string")e.message=t;else if(typeof t=="object")for(const p in t)e[p]=t[p];const o=(u=g("#_ng_confirm_template").html())==null?void 0:u.trim();if(!o||o.length<1){window.confirm(e.message)?e.confirmCallback&&e.confirmCallback.call(e.confirmCallbackThisArg):e.cancelCallback&&e.cancelCallback.call(e.cancelCallbackThisArg);return}const n=g(o);e.title?(n.find('[data-elem="title"]').text(e.title),e.icon&&n.find('[data-elem="title"]').addClass(e.icon)):n.find('[data-elem="header"]').remove(),n.find('[data-elem="message"]').text(e.message);const s=n.find('[data-elem="button-confirm"]');e.confirmButtonText&&s.text(e.confirmButtonText),s.click(()=>{e.confirmCallback&&e.confirmCallback.call(e.confirmCallbackThisArg),h.unlock(),h.hide()});const a=n.find('[data-elem="button-cancel"]');e.cancelButtonText&&a.text(e.cancelButtonText),a.click(()=>{e.cancelCallback&&e.cancelCallback.call(e.cancelCallbackThisArg),h.unlock(),h.hide()});const h=new ye({remove_on_hide:!0});h.lock(),h.show(n)},Ko=t=>{const e=typeof t=="string"?{message:t||null}:t,o={message:"Are you sure?",title:null,icon:"question",confirmButtonText:"Confirm",cancelButtonText:"Cancel"};return new Promise((n,s)=>{tr({...o,...e,confirmCallback:()=>{n()},cancelCallback:()=>{s()}})})},Jo=["gif","jpg","jpeg","png","webp"],ir=t=>{let e=t;if(e instanceof Image&&(e=e.src),!e||typeof e!="string")return"";if(e.startsWith("data:")){const s=e.split(";")[0].split("/");return s[s.length-1].toLowerCase()}const o=e.match(/^image\/([a-z]+)$/);if(o)return o[1].toLowerCase();const n=e.split(".");return n[n.length-1].toLowerCase()};class xt{constructor(e,o,n,s){this.event=e,this.uploader=o,this.target=n,this.data=s}}xt.onSubmit="ngutils.uploadEvent.onSubmit",xt.onUpload="ngutils.uploadEvent.onUpload",xt.onCancel="ngutils.uploadEvent.onCancel",xt.onDeleted="ngutils.uploadEvent.onDeleted",xt.onError="ngutils.uploadEvent.onError",xt.onProgress="ngutils.uploadEvent.onProgress";const es=5e6,ts=3,Wr=function(t,e,o){const n=this,s=Jo,a=o||{},h=!!a.debug,u=yt(a.multiple),p=yt(a.chunking),T=a.chunkSize?a.chunkSize:es,v=a.maxConnections?a.maxConnections:ts,m=a.allowedExtensions?a.allowedExtensions:s,f=a.template?a.template:"upload_template_default",d=a.sizeLimit?a.sizeLimit:2e9,b=a.redirectsEnabled?a.redirectsEnabled:!0;n.onPreviewImage=a.onPreviewImage?a.onPreviewImage:null,n.onSelect=a.onSelect?a.onSelect:null,n.onError=a.onError?a.onError:null,n.onComplete=a.onComplete?a.onComplete:null,n.onCancel=a.onCancel?a.onCancel:null;const y=a.liveUpdate?a.liveUpdate:!1,_=g(t);this.id=a.id?a.id:_.attr("id"),this.useBlackout=a.useBlackout?a.useBlackout:!1,this.preserveBlackout=a.preserveBlackout?a.preserveBlackout:!1;const A=g(".qq-upload-drop-area",_).first(),w=g(".drop-area-text",_).first(),O=g(".qq-uploader-selector",_).first(),k=g(".ng-preview-image",_).first(),S=()=>{A.hide()},R=()=>{A.show()},l=typeof a.minImageWidth=="number"?a.minImageWidth:null,C=typeof a.maxImageWidth=="number"?a.maxImageWidth:null,M=typeof a.minImageHeight=="number"?a.minImageHeight:null,P=typeof a.maxImageHeight=="number"?a.maxImageHeight:null,N=typeof a.maxGIFHeight=="number"?a.maxGIFHeight:P,D=typeof a.maxGIFWidth=="number"?a.maxGIFWidth:C,B=new ye({remove_on_click_outside:!1});this.removeBlackout=()=>{B.hide()},this.removeBlackoutAuto=function(){this.preserveBlackout!==!0&&this.removeBlackout()};const F={messages:{},maxConnections:v,template:f,element:_[0],multiple:u,text:{fileInputTitle:" "},request:{endpoint:e},chunking:{enabled:p},callbacks:{onSubmit:function(Y,H){const ee=this,V=ir(H)==="gif";return new Promise((U,q)=>{const z=new xt(xt.onSubmit,n,null,{id:Y,name:H});ke.dispatch(z.event,z);function X(){if(typeof n.onSelect=="function"){const J=n.onSelect.call(ee,Y,H);typeof J=="boolean"?J?U():q():J.then(U).catch(q)}else U()}function re(J){return l!==null&&J.width<l?(alert(`GIF images may not be less than ${l}px wide`),!1):M!==null&&J.height<M?(alert(`GIF images may not be less than ${M}px tall`),!1):D!==null&&J.width>D?(alert(`GIF images may not be more than ${D}px wide`),!1):N!==null&&J.height>N?(alert(`GIF images may not be more than ${N}px tall`),!1):!0}if(typeof n.onPreviewImage=="function"){const J=g("<img>");ee.drawThumbnail(Y,J[0]).then(()=>{if(V&&(l!==null||M!==null||D!==null||N!==null)&&!re(J[0])){q();return}const W=n.onPreviewImage.call(ee,J,Y,H);typeof W=="boolean"?W?U():q():W.then(U).catch(q)},()=>{alert("Error: Invalid image!"),q()})}else if(V&&(l!==null||M!==null||D!==null||N!==null)){const J=g("<img>");ee.drawThumbnail(Y,J[0]).then(()=>{V&&!re(J[0])?q():X()},()=>{alert("Error: Invalid image!"),q()})}else X()})},onUpload:function(Y,H){var X;n.useBlackout&&B.show(),g(".qq-error",g(this.getItemByFileId(Y))).first().text(""),O.addClass("uploading");const ee={userkey:we.get("uek","")};(X=a.component)!=null&&X.path&&(ee.component=a.component),this.setParams(ee);const V=g(this.getItemByFileId(Y));this.setUuid(Y,we.get("uuid_prefix","uuid")+this.getUuid(Y));const U=ir(H);["gif","jpg","jpeg","png","bmp","tif","tiff","webp"].indexOf(U)<0&&g("span.ng-upload-thumbnail-selector",V).first().addClass(`icon-dumpfile-${U}`).removeClass("ng-upload-thumbnail-selector"),u||S();const z=new xt(xt.onUpload,n,V,{id:Y,name:H});ke.dispatch(z.event,z)},onProgress:function(Y,H,ee,V){const U=g(this.getItemByFileId(Y)),q=new xt(xt.onProgress,n,U,{id:Y,name:H,updatedBytes:ee,totalBytes:V});ke.dispatch(q.event,q),typeof n.onProgress=="function"&&n.onProgress.call(this,Y,H,ee,V)},onComplete:function(Y,H,ee){if(n.removeBlackoutAuto(),b&&ee.redirect)return window.location.href=ee.redirect,!1;O.removeClass("uploading");const V=g(this.getItemByFileId(Y));if(ee.parked_id&&g("input.ng-id-selector",V).first().val(ee.parked_id),ee.parked_url&&g("input.ng-url-selector",V).first().val(ee.parked_url),ee.image_url){const q=ir(ee.image_url??"");y&&s.indexOf(q)>=0&&k.length>0&&(k.attr("src",ee.image_url),ee.image_width&&k.attr("height",ee.image_width),ee.image_height&&k.attr("width",ee.image_height))}if(ee.delete_url){const q=g(".ng-upload-delete-seletor",V).first();q.show(),q.click(()=>{var X;q.disable();const z=(X=a.component)!=null&&X.path?{component:a.component}:{};z.userkey=we.get("uek",""),g.post(ee.delete_url,z,re=>{const J=new xt(xt.onDeleted,n,V,{id:Y,name:H,response:re});ke.dispatch(J.event,J),V.remove()})})}u||R();const U=new xt(xt.onComplete,n,V,{id:Y,name:H,response:ee});ke.dispatch(U.event,U),typeof n.onComplete=="function"&&n.onComplete.call(this,Y,H,ee)},onCancel:function(Y,H){n.removeBlackoutAuto(),O.removeClass("uploading"),u||R();const ee=g(this.getItemByFileId(Y)),V=new xt(xt.onCancel,n,ee,{id:Y,name:H});if(ke.dispatch(V.event,V),typeof n.onCancel=="function")return n.onCancel.call(this,Y,H)},onError:function(Y,H,ee){n.removeBlackoutAuto();const V=g(this.getItemByFileId(Y));O!=null&&O.exists()&&O.removeClass("uploading"),u||R();const U=g(".qq-error",g(this.getItemByFileId(Y))).first();typeof n.onError=="function"?n.onError.call(this,Y,H,ee):U.length>0?U.text(ee):alert(ee);const q=new xt(xt.onError,n,V,{id:Y,name:H,errorMsg:ee});return ke.dispatch(q.event,q),!1}},validation:{sizeLimit:d,allowedExtensions:m},autoUpload:!0,debug:h};p&&(F.chunking.concurrent={enabled:!0},F.chunking.partSize=T,F.chunking.mandatory=!1,F.chunking.success={endpoint:e}),(l!==null||C!==null||M!==null||P!==null)&&(F.validation.image={},l!==null&&(F.validation.image.minWidth=l,F.messages.minWidthImageError=`Image must be at least ${l}px wide!`),C!==null&&(F.validation.image.maxWidth=C,F.messages.maxWidthImageError=`Image can not be wider than ${C}px!`),M!==null&&(F.validation.image.minHeight=M,F.messages.minHeightImageError=`Image must be at least ${M}px tall!`),P!==null&&(F.validation.image.maxHeight=P,F.messages.maxHeightImageError=`Image can not be taller than ${P}px!`)),h&&console.log(`Uploader config for '${t}'`,F),new qq.FineUploader(F),typeof a.dropAreaText=="string"&&w.html(a.dropAreaText);let G;a.fileTypesText?G=g.trim(a.fileTypesText):(G=m&&m.length>0?`Allowed extensions: ${m.join(", ")}`:"Files",G+=` up to ${Uo(d)}`),G?g(".ng-file-rules-text",_).first().html(G):g(".ng-file-rules-text",_).hide(),this.setComponent=function(Y,H){this.setComponentPath(Y),H&&this.setComponentParams(H)},this.setComponentPath=Y=>{typeof a.component>"u"&&(a.component={}),a.component.path=Y},this.setComponentParam=(Y,H)=>{typeof a.component>"u"&&(a.component={}),typeof a.component.data>"u"&&(a.component.data={}),a.component.data[Y]=H},this.setComponentParams=Y=>{typeof a.component>"u"&&(a.component={}),a.component.data=Y},this.getComponentParam=Y=>{const H=this.getComponentParams();return typeof H[Y]>"u"?null:H[Y]},this.getComponentParams=()=>typeof a.component>"u"||typeof a.component.data>"u"?a.component.data:{}},is=function(t,e){this.onSaved=V=>{},this.onCancel=()=>{},this.parked_id=null,this.parked_url="";let o=!1;const n=this,s=new Image;this.image=s;const a=g(t),h=g("[data-image-frame]",a).first(),u=g("img",h).first(),p=g("[data-image-spinner]",a).first(),T=g("[data-saving-text]",a).first(),v=g("div[data-image-upload]",a).first(),m=g("div[data-image-upload-toggle]",a).first(),f=e.alwaysRedraw?e.alwaysRedraw:!1,d=e.parkEndpoint?e.parkEndpoint:"/parkfile",b=e.saveEndpoint?e.saveEndpoint:null,y=e.liveCrop?e.liveCrop:!1,_=e.saveParams?e.saveParams:null,A=typeof e.stretchToFit<"u"?e.stretchToFit:!0,w=e.fileTypesText?e.fileTypesText:null,O=e.dropAreaText?e.dropAreaText:"Drop Image, or Click Here",k=()=>{A||setTimeout(()=>{(u[0].naturalWidth<u[0].width||u[0].naturalHeight<u[0].height)&&(u[0].width=u[0].naturalWidth,u[0].height=u[0].naturalHeight,u.removeAttr("style"))},100)};u[0].onload=k;const S=v.length>0,R=g("[data-crop-ui]",a).first();S?R.addClass("nodim"):R.remove();const l=g("[data-scale-slider-container]",R).first(),C=g("[data-btn-save]",R).first(),M=g("[data-btn-cancel]",R).first();let P=!1;const N=()=>{P=!0,M.disable(),C.disable(),l.hide(),T.show()},D=()=>{P=!1,M.enable(),C.enable(),l.show(),T.hide()};if(e.frame?(e.frame.width&&(e.frame.maxWidth=e.frame.minWidth=e.frame.width),e.frame.height&&(e.frame.maxHeight=e.frame.minHeight=e.frame.height)):e.frame={},this.maxFrameWidth=e.frame.maxWidth?e.frame.maxWidth:1080,this.maxFrameHeight=e.frame.maxHeight?e.frame.maxHeight:360,this.minFrameWidth=e.frame.minWidth?e.frame.minWidth:480,this.minFrameHeight=e.frame.minHeight?e.frame.minHeight:240,this.fillScale=e.fillScale?e.fillScale:1,this.keepAspect=e.frame.keepAspect?e.frame.keepAspect:!1,S){const V={template:"croppable_image_template",fileTypesText:w,dropAreaText:O,multiple:!1,allowedExtensions:["webp","png","jpeg","jpg","gif"],onComplete:function(U,q,z){if(typeof U=="number"&&g(this.getItemByFileId(U)).remove(),o){N();const X={nocrop:!0,parked_id:z.parked_id,userkey:PHP.get("uek")};for(const re in _)X[re]=_[re];g.post(b,X,re=>{n.oldSrc=re.image_url,n.clearEdit(),n.onSaved(re)},"json").fail(()=>{n.clearEdit(),D()})}else n.parked_id=z.parked_id,n.parked_url=z.parked_url,n.newImage(n.parked_url)}};if(e.acceptFiles&&(V.acceptFiles=e.acceptFiles),e.allowedExtensions&&(V.allowedExtensions=e.allowedExtensions),e.sizeLimit&&(V.sizeLimit=e.sizeLimit),e.maxWidth&&(V.maxImageWidth=e.maxWidth),e.maxHeight&&(V.maxImageHeight=e.maxHeight),e.minWidth&&(V.minImageWidth=e.minWidth),e.minHeight&&(V.minImageHeight=e.minHeight),V.maxGIFWidth=this.maxFrameWidth,V.maxGIFHeight=this.maxFrameHeight,e.uconfig){for(const U in e.uconfig)V[U]=e.uconfig[U],delete e.uconfig[U];e.uconfig=void 0}e.debug&&(V.debug=!0),y&&(V.autoUpload=!1,V.onPreviewImage=function(U,q,z){let X=U;return new Promise((re,J)=>{if(f===!1&&X[0].naturalWidth<=n.maxFrameWidth&&X[0].naturalHeight<=n.maxFrameHeight)return X=null,o=!0,re();o=!1;const W=()=>{J(),s.width=u[0].naturalWidth,s.height=u[0].naturalHeight,s.src=u.attr("src"),V.onComplete.call(this,null,null,{parked_id:0,parked_url:s.src})},te=se=>{X=null;const oe=g("<img>");oe[0].onload=()=>{u[0].src=oe[0].src,W()},oe.attr("src",se.toDataURL("image/webp",.9))};if(X[0].naturalWidth<=n.maxFrameWidth&&X[0].naturalHeight<=n.maxFrameHeight){const se=document.createElement("canvas"),oe=se.getContext("2d");se.width=n.maxFrameWidth,se.height=n.maxFrameHeight,oe.drawImage(X[0],Math.round((se.width-X[0].naturalWidth)/2),Math.round((se.height-X[0].naturalHeight)/2),X[0].naturalWidth,X[0].naturalHeight),te(se)}else if(X[0].naturalWidth<n.maxFrameWidth){const se=document.createElement("canvas"),oe=se.getContext("2d");se.width=n.maxFrameWidth,se.height=X[0].naturalHeight,oe.drawImage(X[0],Math.round((se.width-X[0].naturalWidth)/2),0,X[0].naturalWidth,X[0].naturalHeight),te(se)}else u[0].src=X[0].src,W()})}),new Wr(v,d,V),setTimeout(k,300)}this.dragMove=null;let B=!0;const F=V=>{V!==void 0&&(!B&&V!=="#"?p.show():p.hide(),B=!1,s.src=V)};let G="view",Y=!1,H=null;S&&(h.on(Je.mouseDown,V=>{Y=G!=="view";const U=V.changedTouches?V.changedTouches[0]:V;H={x:U.screenX,y:U.screenY}}),g(document).on(Je.mouseUp,()=>{Y=!1}).on(Je.mouseMove,V=>{if(!Y||P)return;const U=V.changedTouches?V.changedTouches[0]:V,q={x:U.screenX,y:U.screenY};return H&&n.onDragged({x:q.x-H.x,y:q.y-H.y}),H=q,!1})),this.src=e.src?e.src:null,this.oldSrc=this.src,this.updateHeight=()=>{if(n.keepAspect){const V=h.width();let U=h.height();const q=V/n.maxFrameWidth;U=Math.floor(n.maxFrameHeight*q),h.height(U)}},this.keepAspect&&(this.minFrameWidth=this.maxFrameWidth,this.minFrameHeight=this.maxFrameHeight,this.updateHeight()),this.minScale=1,this.maxScale=2,this.anchor={x:0,y:0};const ee={width:this.maxFrameWidth,height:Math.ceil(this.maxFrameHeight/(this.minFrameWidth/this.maxFrameWidth))};D(),S&&(M.click(()=>(n.cancelEdit(),!1)),C.click(()=>{const V=U=>(alert(U),D(),!1);if(y){const U=g("img",h).first();if(!U.attr("src"))return alert("Please upload an image first!"),!1;N();const z=()=>{const X=document.createElement("canvas"),re=X.getContext("2d");let J;X.width=n.maxFrameWidth,X.height=n.maxFrameHeight,h.width()<n.maxFrameWidth?J=n.maxFrameWidth/h.width():J=1,re.drawImage(U[0],U.position().left*J,U.position().top*J,U.width()*J,U.height()*J);const W=X.toDataURL("image/webp",.8).split(",").pop(),te=Qn(W,"image/webp"),se=new FormData;if(se.append("qquuid","auto"),se.append("qqfile",te),se.append("qqfilename","qqCanvasImage.webp"),se.append("userkey",PHP.get("uek")),_)for(const oe in _)se.append(oe,_[oe]);g.ajax({url:b,type:"POST",data:se,contentType:!1,cache:!1,processData:!1,dataType:"json",error:V,success:oe=>{n.oldSrc=oe.image_url?oe.image_url:null,n.clearEdit(),n.onSaved(oe)}}).fail(V),D()};U.naturalWidth===0?U[0].onload=()=>{z()}:z()}else{N();const U={crop:n.crop,frame:ee,parked_id:n.parked_id,userkey:PHP.get("uek")};for(const q in _)U[q]=_[q];g.post(b,U,q=>{n.oldSrc=q.image_url,n.clearEdit(),n.onSaved(q)},"json").fail(()=>{D()}).fail(V)}return!1})),this.cancelEdit=()=>{n.clearEdit(),n.onCancel()},this.clearEdit=()=>{ye.undim(),R.hide(),D(),G="view",a.removeClass("nodim"),a.removeClass("img-edit"),m.addClass("can-upload"),n.oldSrc?F(n.oldSrc):F("#")},this.newImage=V=>{if(V===void 0)return;G="new",F(V),a.addClass("img-edit");const U=g("[data-scale-slider]",R).first(),q=z=>{n.fillScale=n.minScale+(n.maxScale-n.minScale)*z,n.draw()};U.slider({value:0,min:0,max:1,step:.001,slide:(z,X)=>{q(X.value)}}),g("[data-increment-slider]",R).mouseover(function(){g(this).css("cursor",this.dataset.incrementSlider)}).mouseout(function(){g(this).css("cursor","default")}).click(function(){let X=U.slider("value");this.dataset.incrementSlider==="zoom-in"?X+=.2:X-=.2,U.slider("value",X),q(X)}),R.show(),a.addClass("nodim"),ye.dim(),m.removeClass("can-upload")},this.onDragged=function(V){this.dragMove=V,this.draw()},this.crop=null,this.draw=()=>{if(p.hide(),!s.src||!s.width)return;u.attr("src")!==s.src&&(u.attr("src",s.src),u.css("visibility","hidden")),u.css("width",""),u.css("height",""),u.css("top",""),u.css("left",""),n.keepAspect&&n.updateHeight();const V=h.width(),U=h.height();if(G==="view"){u.css("width","100%");const q=Math.floor((U-u.height())/2);u.css("top",`${q}px`)}else{const q=s.width,z=s.height,X=V/n.maxFrameWidth,re=()=>{const J=X*n.fillScale,W=q*J,te=z*J;n.dragMove&&(n.anchor.x-=Math.round(n.dragMove.x/J),n.anchor.y-=Math.round(n.dragMove.y/J),n.dragMove=null);const se={width:Math.ceil(ee.width*X),height:Math.ceil(ee.height*X)},oe={w:se.width/2,h:se.height/2},fe={x:n.anchor.x*J,y:n.anchor.y*J};fe.x<oe.w?(fe.x=oe.w,n.anchor.x=fe.x/J):fe.x>W-oe.w&&(fe.x=W-oe.w,n.anchor.x=fe.x/J),fe.y<oe.h?(fe.y=oe.h,n.anchor.y=fe.y/J):fe.y>te-oe.h&&(fe.y=te-oe.h,n.anchor.y=fe.y/J),n.crop={left:Math.round(n.anchor.x-oe.w/J),right:Math.round(n.anchor.x+oe.w/J),top:Math.round(n.anchor.y-oe.h/J),bottom:Math.round(n.anchor.y+oe.h/J)},n.crop.width=n.crop.right-n.crop.left,n.crop.height=n.crop.bottom-n.crop.top;const Ee={x:Math.round(V/2-fe.x),y:Math.round(U/2-fe.y)};u.css("width",`${Math.ceil(W)}px`),u.css("height",`${Math.ceil(te)}px`),u.css("left",`${Ee.x}px`),u.css("top",`${Ee.y}px`)};if(G==="edit")re();else if(G==="new"){const J=ee.width/q,W=ee.height/z;n.minScale=J>W?J:W,n.maxScale=n.minScale*2,n.maxScale<1&&(n.maxScale=1),n.fillScale=n.minScale,n.anchor={x:Math.floor(q/2),y:Math.floor(z/2)},G="edit",re()}}u.css("visibility","")},g(s).css("visibility","hidden"),g(s).on("load",()=>{n.draw()}),g(()=>{n.draw()}),this.src&&F(this.src),ke.addListener(ke.resize,()=>{setTimeout(n.draw,5)})},Pi=class Pi{constructor(e){const o=this,n=e.id;let s=!1,a=!1,h={x:0,y:0},u=new Image;const p=e.width,T=e.height;let v,m,f,d,b,y=e.maxZoom?e.maxZoom:"auto";const _=g("body").first(),A=g(`#${n}`),w=g("<div>");_.append(w),w.html(A.html()),A.remove();const O=g("[data-cropping-image]",w).first(),k=g("[data-btn-save]",w).first(),S=g("[data-btn-cancel]",w).first(),R=g("[data-saving-text]",w).first(),l=g("[data-scale-slider-container]",w).first(),C=g("[data-shape-select]",w).first(),M=g("[data-shape-frame]",w).first(),P=g("[data-scale-slider]",w).first(),N=g("[data-increment-slider]",w.first());w.css("display","none"),O.css("position","absolute"),this.parked_id=null,this.original_src=null,this.original_crop=null,this.shape=e.shape,this.last_shape=e.shape,this.last_crop={x:0,y:0,width:p,height:T},this.user=null,this.user_id=null,this.registerId(n),this.startSave=function(){return s=!0,k.disable(),S.disable(),R.show(),l.hide(),this},this.endSave=function(){return s=!1,k.enable(),S.enable(),R.hide(),l.show(),this},this.reset=function(){return v={x:0,y:0},m=1,f=2,y="auto",d=1,b=1,O.removeAttr("src"),g(u).removeAttr("src"),P.slider("value",0),this},this.onCancel=()=>{},this.onSave=(H,ee)=>{},this.afterSave=H=>{},this.hide=function(){return _.css("overflow",""),w.css("display","none"),o.current=null,this},this.show=function(){return o.current&&o.current.hide(),o.current=this,_.css("overflow","hidden"),w.css("display",""),this},this.update=function(){const H={width:u.width*d,height:u.height*d,left:Math.round(p/2-v.x*d),top:Math.round(T/2-v.y*d)};return O.css(H),this};const D=()=>{const H=p/u.width,ee=T/u.height;let V=y;if(y==="auto"){const q=u.width/p,z=u.height/T;V=q>z?q:z}m=H>ee?H:ee,f=m*V,d=m,b=f-m,v.x=Math.floor(u.width/2),v.y=Math.floor(u.height/2);const U=g("[data-scale-impossible]",w);b?(P.slider("enable"),N.removeClass("disabled"),U.hide()):(P.slider("disable"),N.addClass("disabled"),U.show()),o.update()};this.checkAnchor=function(){const H=T/2/d,ee=p/2/d;return v.y<H?v.y=H:v.y>u.height-H&&(v.y=u.height-H),v.x<ee?v.x=ee:v.x>u.width-ee&&(v.x=u.width-ee),this},this.onDragged=function(H){return v.x-=H.x/d,v.y-=H.y/d,this.checkAnchor(),this.update()},this.setCrop=function(H){d=p/H.width;const ee=p/2/d,V=T/2/d,U=(d-m)/b;return P.slider("value",Number.isNaN(U)?0:U),v.x=H.x+ee,v.y=H.y+V,o.update(),this},this.setOriginalCrop=function(H){return this.original_crop===null&&(this.original_crop=H),this},this.setOriginalSrc=function(H){return this.original_src===null&&(this.original_src=H),this},this.setParkedId=function(H){return this.parked_id=H,this},this.setSrc=H=>new Promise((ee,V)=>{O.removeAttr("src"),u=new Image,u.onload=()=>{D(),ee(`image loaded: ${H}`)},O.attr("src",H),u.src=H}),this.setUserParams=function(H){return this.user_id=H.user_id,this.user=H.user,this},this.save=function(H){const ee=()=>{o.endSave(),o.hide()},V={editing:this.parked_id!==null,userkey:PHP.get("uek"),type:"userpic",referrer:`//${window.location.host}${window.location.pathname}`,user:this.user,id:this.user_id,thumb_crop_width:H.width,thumb_crop_height:H.height,thumb_top_y:H.top,thumb_top_x:H.left,parked_id:this.parked_id,shape:this.last_shape};g.post("/icons/submit",V,U=>{ee(),o.setOriginalSrc(U.raw).setOriginalCrop(H).setParkedId(null),o.afterSave(U)},"JSON").fail(ee)},this.updateFromExisting=function(H,ee,V){return o.setSrc(H).then(()=>{o.setOriginalSrc(H).setOriginalCrop(ee).setCrop(ee).setShape(o.last_shape).checkAnchor(),typeof V=="function"&&V(o)}),this},this.updateFromParked=function(H){return new Promise((ee,V)=>{this.reset().setParkedId(H.parked_id).setShape(this.last_shape).setSrc(H.parked_url).then(()=>{this.update().show()}),ee(`loaded ${H.parked_url}`)})};const B=(H,ee)=>{const V=g(H),U=ee||!1,q=P.slider("option","value");let z;return V.data("incrementSlider")==="zoom-in"?z=q+.2:z=q-.2,z>1&&(z=U?null:1),z<0&&(z=U?null:0),z},F=function(){B(this,!0)!=null&&!P.slider("option","disabled")?g(this).css("cursor",g(this).data("incrementSlider")):g(this).css("cursor","default")},G=H=>{d=m+b*H,o.checkAnchor(),o.update()};P.slider({value:0,min:0,max:1,step:.01,slide:(H,ee)=>{G(ee.value)}}),N.mouseover(F).click(function(){if(P.slider("option","disabled"))return;const H=B(this);P.slider("option","value",H),G(H),F.call(this)}).mouseout(F);const Y=g("[data-shape-id]",C);this.setShape=function(H){const ee=H||0;return o.shape=Number.parseInt(ee),Y.removeClass("selected"),g(`[data-shape-id=${o.shape}]`,C).addClass("selected"),M.attr("href",`#path_s${o.shape}`),this},Y.click(function(H){H.preventDefault(),o.setShape(Number.parseInt(g(this).attr("data-shape-id")))}),S.click(()=>{const H=()=>{o.hide(),o.onCancel()};o.original_src!==null?(o.parked_id!==null&&o.setParkedId(null),o.setSrc(o.original_src).then(()=>{o.original_crop!==null&&o.setCrop(o.original_crop),H()})):H()}),k.click(()=>{o.startSave();const H={},ee=T/2/d,V=p/2/d;H.top=Math.ceil(v.y-ee),H.left=Math.ceil(v.x-V),H.width=Math.floor(V*2),H.height=Math.floor(ee*2),H.right=H.left+H.width,H.bottom=H.top+H.height,o.last_shape=o.shape,o.last_crop={x:H.top,y:H.left,width:H.width,height:H.height},o.save(H)}),O.on(Je.mouseDown,H=>{a=!0;const ee=H.changedTouches?H.changedTouches[0]:H;h={x:ee.screenX,y:ee.screenY}}),g(document).on(Je.mouseUp,()=>{a=!1}).on(Je.mouseMove,H=>{if(!a||s)return;const ee=H.changedTouches?H.changedTouches[0]:H,V={x:ee.screenX,y:ee.screenY};return h&&o.onDragged({x:V.x-h.x,y:V.y-h.y}),h=V,!1}),e.src&&(u.src=e.src),this.reset()}registerId(e){Pi.ids[e]=this}static get(e){return typeof Pi.ids[e]<"u"?Pi.ids[e]:null}};ui(Pi,"ids",{}),ui(Pi,"current",null);let nr=Pi;const ns={register_menu:t=>{const e=g(`#${t}`);g("button",e).on("click",function(){const o=g(this).parent();return o.hasClass("collapsed")?(o.removeClass("collapsed"),o.addClass("expanded"),g(this).html("&ndash;")):(o.removeClass("expanded"),o.addClass("collapsed"),g(this).html("+")),!1})}},rs=(()=>{let t=0;return e=>(e.id||(e.id=`visual_link_temp_id_${t++}`),e.id)})(),os=(()=>{let t=0;return e=>{const o=t;return e.setAttribute("data-visual-link-collection",t++),o}})(),ss=t=>{let e=t;e instanceof g&&(e=e.get(0));const o=e.dataset.visualLinkCollection;return o==null?null:Number.parseInt(o,10)},rr=t=>{let e=t;e instanceof g&&(e=e.get(0));let o=ss(e);return o===null&&(o=os(e)),o};class as{constructor(e){this.merge=!1,this.node=e,this.payload=JSON.parse(e.getAttribute("data-visual-link"))}getNode(){return this.node}getPayload(){return this.payload}getType(){return this.payload[0]}getId(){return this.payload[1]}}const ci=class ci{constructor(e){let o=e;o instanceof g&&(o=o.get(0)),this.outer_node=o,this.pointer=rr(o),this.fired=!1,this.setOptions()}setOptions(e){const o=e===void 0?{}:e,n=(s,a)=>{const h=Yn(this,s,null);let u=a;return h!==null&&this.merge&&(u=h),Yn(o,s,u)};this.container_name=n("container_name","ul"),this.links=[],this.events={onComplete:n("events.onComplete"),onEmptyContainer:n("events.onEmptyContainer")},this.destroy_when_fired=n("destroy_when_fired",!0),this.missing=null,this.empty_containers=[],this.component_params=n("component_params",null),this.suitabilities=n("suitabilities",null),this.include_all_suitabilities=n("include_all_suitabilities",!1),this.send_to_groups=n("send_to_groups",!0),this.partial_options={checkNode:n("partial_options.checkNode",null),checkPartial:n("partial_options.checkPartial",null)},this.report_missing=n("report_missing",!1),this.remove_missing=n("remove_misssing",!0),this.use_partials=n("use_partials",!0),this.remove_unpublished=n("remove_unpublished",!1),this.remove_unsuitable=n("remove_unsuitable",!1),this.remove_matching_unsuitable=n("remove_matching_unsuitable",!0)}add(e){rs(e);const o=new as(e);this.links.push(o)}addNodes(e){if(e==null)return;const o=en(e.querySelectorAll("[data-visual-link]"));if(o.length){if(!e.hasAttribute("data-visual-link-collection")){const n=rr(e);this.pointer=n}for(const n in o)this.add(o[n]);this.sendToGroups(e)}}embelish(e){if(e.partials===void 0)return;const o=this.report_missing,n=this.links,s=[],a=h=>{const u=h.node,p=u.parentNode;this.remove_missing&&u.remove(),this.remove_missing&&p.tagName.toLowerCase()===this.container_name&&!p.children.length&&(vi(this.events,"onEmptyContainer")?this.empty_containers.push(p):p.remove()),o&&s.push(h.getPayload()),ke.dispatch("ngutils-dom-change",{info:"visual link removal",node:u,parentNode:p})};for(const h in n){const u=n[h],p=u.node,T=e.partials[u.getType()]?e.partials[u.getType()]:null;if(T===null){a(u);continue}if(!this.use_partials)continue;const v=T[u.getId()]?T[u.getId()]:null;if(v===null){a(u);continue}const m=g(v);if(this.partial_options.checkNode!==null&&!this.partial_options.checkNode(p)){a(u);continue}if(this.partial_options.checkPartial!==null&&!this.partial_options.checkPartial(m)){a(u);continue}if(m.hasClass("visual-link-unsuitable")&&this.remove_matching_unsuitable&&this.suitabilities!==null){const f=m.data("suitability");if(f!==void 0&&!this.suitabilities.includes(f)){a(u);continue}}if(m.hasClass("visual-link-unpublished")&&this.remove_unpublished||m.hasClass("visual-link-unsuitable")&&this.remove_unsuitable){a(u);continue}g(p).replaceWith(m)}s.length&&this.report_missing&&(this.missing=s),this.processEvents(e)}removeUnpublished(){self.remove_unpublished}processEvents(e){if(this.events.onComplete!==null&&this.events.onComplete.call(this,e),this.events.onEmptyContainer!==null){for(const o in this.empty_containers)this.events.onEmptyContainer(this.empty_containers[o]);this.empty_containers=[]}}sendToGroups(e){if(!this.send_to_groups)return;const o=en(e.querySelectorAll("[data-visual-link]"));let n=null;const s=o.length;for(let a=0;a<s;++a){const h=o[a];n===null&&(n=document.createElement(this.container_name),n.setAttribute("class","itemlist alternating"),h.parentNode.insertBefore(n,h));const u=a+1,p=u<s&&h.nextSibling&&h.nextSibling===o[u];n.append(h),p||(n=null)}}load(){const e=new FormData,o=[];for(const u in this.links)o.push(this.links[u].getPayload());if(!o.length)return;e.set("payload",JSON.stringify(o));const a=`https://${(()=>{const u=new URL(location.href);return we.get("current_domain",u.hostname)})()}/visual-links-fetch`,h={ids:JSON.stringify(o),component_params:this.component_params,include_all_suitabilities:this.include_all_suitabilities?1:0};this.include_all_suitabilities&&(h.userkey=we.get("uek")),g.postXD(a,h,u=>{this.embelish(u)})}static getInstance(e){if(e===void 0)throw"Must get outer node here!";const o=rr(e);return vi(ci.instances,o)||(ci.instances[o]=new ci(e)),ci.instances[o]}static add_from_dom(e,o,n){if(e===null)return;let s=o;const a=n||!1,h=ci.getInstance(e);h.merge=a,s!==void 0&&(s===null&&(s={}),h.setOptions(s)),h.addNodes(e),new Promise((u,p)=>{if(h.fired)return p(h);h.load(),u(h)}).then(u=>{u.fired=!1})}};ui(ci,"instance",null),ui(ci,"instances",{});let En=ci;const Ft={};Ft.nodes=en,Ft.alter_attributes=(t,e)=>{const o=en(t);if(o.length)for(let s=0,a=o.length;s<a;++s)e(o[s])},Ft.attr=(t,e)=>t.hasAttribute(e)?t.getAttribute(e):null,Ft.attr_either=(t,e,o)=>{const n=Ft.attr(t,e);return n!==null?n:Ft.attr(t,o)},Ft.node_from_string=t=>{const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstElementChild},Ft.set_attributes=(t,e,o)=>{let n=t;n instanceof g&&(n=en(n.toArray()));const s=a=>{if(e instanceof String&&(o instanceof String||o instanceof Number)){a.setAttribute(e,o);return}if(e instanceof Function)return e(a);if(e instanceof Object&&o===void 0){for(const[h,u]of Object.entries(e))a.setAttribute(h,u);return}throw"Don't know how to handle this."};Ft.alter_attributes(n,s)},Ft.parse_text=(t,e)=>{let o=t,n=e;o instanceof g&&(o=g.get(0)),n=n||{},En.add_from_dom(o,n.visual_links),Ft.set_attributes(o.querySelectorAll("a"),{rel:"nofollow",target:"_blank"}),Ft.set_attributes(o.querySelectorAll("iframe"),{allowfullscreen:"true"}),Ft.set_attributes(o.querySelectorAll("img"),s=>{s.setAttribute("data-user-image","1")})};const ls=t=>{const e=t.closest(".blackout-hover");return e.length<1?g("body").first():e};class or{constructor(e,o){let n=e,s=o;typeof n=="string"&&(n=g(n)),typeof s=="string"&&(s=g(s));const a=ls(n);s.hide().remove(),a.append(s);let h=!1;g("a",s).off("click"),g("a",s).on("click",()=>!1),this.closeMenu=u=>{u!==this&&(h=!1,s.animate({height:0},100,()=>{s.hide()}))},s.off("clickOutside"),s.clickOutside(this.closeMenu),ke.removeListener(ke.closeMenus,this.closeMenu),ke.addListener(ke.closeMenus,this.closeMenu),n.on("remove",function(){s.remove(),ke.removeListener(ke.closeMenus,this.closeMenu)}),n.off("click"),n.click(u=>{if(or.closeOpenMenus(this),h)this.closeMenu();else{s.show();const p=s.height("auto").height();s.height(0),s.css("left",n.offset().left+n.outerWidth()-s.outerWidth()),s.css("top",n.offset().top-a.offset().top+n.outerHeight()),s.css("position","absolute"),s.css("z-index",10002),s.attr("tabindex",-1).focus(),s.animate({height:p},100,()=>{s.height("auto")}),h=!0}return!1})}static closeOpenMenus(e){ke.dispatch(ke.closeMenus,e)}}const Vr={};Vr.clickSelector=(t,e,o)=>{o&&o.preventDefault();const n=g(t),s=g(e),a=n.val();let h="/emoteselect";a&&(h+=`/${a}`);const u=new ye({remove_on_hide:!0});let p;const T=()=>{const v=g("input[type='radio']",p);v.change(()=>{const m=g('input[type="radio"]:checked',p).first();n.val(m.val());const f=m.attr("id"),d=g(`label[for="${f}"]`,p),b=g("span",d);s.attr("class",b.attr("class")),u.hide()}),ke.dispatch(ke.emoteSelectLoaded,v)};u.load(h,()=>{p=g("#active-emote-selector",u.getLayerElement()).removeAttr("id"),T(),ke.addListener(ke.emoteSetChanged,v=>{p.has(v)&&T()})})};const He={};He.totals={},He.blackout=null,He.linked=[],He.refreshListeners=(t,e,o)=>{if(He.totals[t]&&He.totals[t].length>0)for(let n=0,s=He.totals[t].length;n<s;n++)He.totals[t][n].onAjaxUpdate(e)},He.initLink=(t,e,o)=>t?(He.linked[t]||(He.linked[t]={}),He.linked[t][e]=o,He.linked[t]):null,He.initTotals=(t,e,o,n,s)=>{const a=`${e}-${o}`;let h=s;He.totals[a]||(He.totals[a]=[]);const u=g(t),p=He.initLink(n,"totals",u);He.totals[a].push(u);function T(m){return He.blackout&&(He.blackout.onHide(null),He.blackout.hide()),!1}p.closeLinked=u.closeDetails=()=>{T()};function v(m){m&&m.stopPropagation(),p!=null&&p.button&&p.button.hideReactionOptions();const f=`/favorites/reactions/type/${e}/id/${o}`;return He.blackout&&He.blackout.hide(),He.blackout=new ye({remove_on_hide:!0}),He.blackout.show(ye.spinner),He.blackout.onHide(T),g.get(f,d=>{if(!d)return;const b=g(d);He.blackout.show(b),He.initUsers(e,o,b)}),!1}u.click(m=>h===null?v(m):(He.showUsers(e,o,h),!1)),u.onAjaxUpdate=m=>{h=m.inner_extra_id,u.html(m.count_html),u.closeDetails()}},He.showUsers=(t,e,o)=>{He.blackout&&(He.blackout.fade_out=!1,He.blackout.hide()),He.blackout=new ye({remove_on_hide:!0,fade_in:!1});const n=`/favorites/reactions/type/${t}/id/${e}/reaction/${o}`;He.blackout.show(ye.spinner),He.blackout.load(n)},He.initUsers=(t,e,o)=>{let n=o;n?typeof n=="string"&&(n=g(n)):n=g("body").first(),g("[data-extra-id]",n).click(function(s){s&&(s.preventDefault(),s.stopPropagation());const a=g(this).attr("data-extra-id");return He.showUsers(t,e,a),!1})},He.initButton=(t,e,o,n)=>{const s=new nt(nt.REACTION,t,e,o);return s.common=He.initLink(n,"button",s),s};class nt{constructor(e,o,n,s){const a=!!we.get("ismobile"),h=this,u=g(o);let p=!1;this.common=null;const T=g(".reaction-button",u),v=g(".reaction-options",u),m=g(".reaction-emote",u),f=g(".reaction-text",u);let d=!1;const b=a?new ye:null;this.onRefresh=(w,O)=>{};function y(w){var O;return w&&w.stopPropagation(),v.show(),d=!0,a&&(v.remove(),b.show(v),b.onHide(()=>{d&&_()}),A(v)),(O=h.common)!=null&&O.closeLinked&&h.common.closeLinked(),!1}function _(w){w&&w.stopPropagation();const O=d;return v.hide(),d=!1,a&&O&&b.hide(),!1}this.hideReactionOptions=()=>{_()},T.click(w=>d?_(w):y(w)),a||u.hover(y,_);function A(w){const O=g("a[data-action='add']",w),k=g("a[data-action='remove']",w);O.off("click"),k.off("click"),O.on("click",function(S){if(S.stopPropagation(),p)return!1;const R=Number.parseInt(g(this).attr("data-extra-id"));p=!0;let l=`/favorites/${nt.types[e]}/add/${s}`;typeof R<"u"&&!Number.isNaN(R)&&(l+=`/extra/${R}`);const C={fave_type:nt.types[e],emote_text:g(this).attr("title"),emote_class:g("span",g(this)).first().attr("class")};nt.refreshListeners(s,!0,R,C,h);const M={userkey:n};return we.get("ng_design")&&(M.___ng_design=we.get("ng_design")),g.post(l,M,P=>{p=!1,nt.refreshListeners(s,!0,R,P,h),He.refreshListeners(P.count_key,P,h)},"json").fail(()=>{p=!1,nt.refreshListeners(s,!1,R,C,h)}),_(),!1}),k.on("click",function(S){if(S.stopPropagation(),p)return!1;p=!0;const R=`/favorites/${nt.types[e]}/remove/${s}`,l={fave_type:nt.types[e],emote_text:"React",emote_class:g("span",g(this)).first().attr("class")};nt.refreshListeners(s,!1,0,l,h);const C={userkey:n};return we.get("ng_design")&&(C.___ng_design=we.get("ng_design")),g.post(R,C,M=>{p=!1,nt.refreshListeners(s,!1,0,M,h),He.refreshListeners(M.count_key,M,h)}).fail(()=>{p=!1}),_(),!1})}A(u),this.refresh=function(w,O,k,S){k.fave_type==="reaction"?(m.attr("class",`${k.emote_class} reaction-emote`),f.html(k.emote_text),w?f.addClass("active"):f.removeClass("active"),g("a.active",v).removeClass("active"),g(`a[data-extra-id="${O}"]`,u).addClass("active")):(typeof O>"u"||Number.isNaN(O)?u.removeAttr("data-extra-id"):u.attr("data-extra-id",O),w?u.addClass("active"):u.removeClass("active")),this.onRefresh(k,S)},nt.listeners[s]=nt.listeners[s]||[],nt.listeners[s].push(this)}static refreshListeners(e,o,n,s,a){var h;if(nt.listeners[e])for(let u=0,p=nt.listeners[e].length;u<p;u++)nt.listeners[e][u].refresh(o,n,s,a);(h=s.dispatchEvent)!=null&&h.event&&ke.dispatch(s.dispatchEvent.event,s.dispatchEvent.data)}}nt.listeners={},nt.FOLLOW=1,nt.FAVORITE=2,nt.REACTION=3,nt.types={},nt.types[nt.FOLLOW]="follow",nt.types[nt.FAVORITE]="favorite",nt.types[nt.REACTION]="reaction",Pt.initFollowButton=(t,e,o)=>new nt(nt.FOLLOW,t,e,o),Pt.initFavoriteButton=(t,e,o)=>new nt(nt.FAVORITE,t,e,o);const Ni={};let sr=null;const On=()=>(sr||(sr=new ye({remove_on_hide:!0})),sr);Ni.close=t=>{if(we.get("nodimming")&&we.get("nodimming").addClass("nodimming"),typeof t=="function")t();else return On().hide(),!1},Ni.watchFormPage=()=>{const t=()=>g.rInArray(Number.parseInt(g('#flag_form input[type="radio"]:checked').val(),10),we.get("flag_types_needing_comment")),e=()=>(t()?(g("#flag_form span.required").show(),g("#flag_comment").attr("required",!0)):(g("#flag_comment").removeAttr("required"),g("#flag_form span.required").hide()),!0);g("#flag_comment").exists()&&g("#flag_comment").on("focus blur",e).focus(),g('#flag_form input[type="radio"]').off("click").on("click",e),g("#flag_form").on("submit",function(){return g(this).ajaxSubmit(o=>{const n=g(`#${we.get("flag_element_clicker")}`);o!=null&&o.url?n.attr("href",o.url):n!=null&&n.exists()&&n.remove(),Ni.close(()=>{o.success?On().show(g(o.success)):(alert("Your report has been submitted!"),On().hide())})}),!1}),g("#flag_close").on("click",Ni.close)},Ni.register=(t,e)=>{const o=e||{};g(t).on("click",function(){return g(".nodimming").exists()&&we.set("nodimming",g(".nodimming")),we.set("flag_element_clicker",g(this).attr("id")),On().load(this.href,o,()=>{g(".nodimming").exists()&&g(".nodimming").removeClass("nodimming"),Ni.watchFormPage()}),!1})};const Sn={buttons:[],selected:null,init:function(t){this.buttons=t;const e=g("#footer-feature-buttons");g("button",e).click(function(){return Sn.changeTo(g(this).attr("id")),!1}),g("#featureshift-left").click(()=>(Sn.previous(),!1)),g("#featureshift-right").click(()=>(Sn.next(),!1)),this.selected=g("button.selected",e).first().attr("id")},changeTo:function(t){const e=g("#footer-feature-buttons"),o=g("#footer-featured-items"),n=g(`#${t}`,e);if(!n)return;g("button.selected",e).removeClass("selected"),n.addClass("selected"),this.selected=t;const s=t.split("-").pop();g.get(`/footer-feature/${s}`,a=>{o.html(a)})},next:function(){let t=this.buttons.indexOf(this.selected);t++,t>=this.buttons.length&&(t=0),this.changeTo(this.buttons[t])},previous:function(){let t=this.buttons.indexOf(this.selected);t--,t<0&&(t=this.buttons.length-1),this.changeTo(this.buttons[t])}},Ai={};Ai.registerDateInput=t=>{const e=g(t);if(e.attr("data-registered"))return;function o(){e.val()?e.addClass("date-focused"):e.removeClass("date-focused")}e.attr("data-registered",1),e.change(o),o()},Ai.selectAltLabels={},Ai.selectAltLabels.autodetect=()=>{g(".select-wrapper.alternate-label").each(function(){const t=g("select",g(this)),e=g("span.label",g(this)),o=()=>{const n=g(`option[value="${t.val()}"]`,t);let s;n.is("[data-label]")?s=n.attr("data-label"):s=n.html(),e.html(s)};t.change(()=>{o()}),o()})},Ai.selectLinks={},Ai.selectLinks.autodetect=()=>{g("[data-select-links]").change(function(){const t=g(this).val();t&&(window.location=t)})},Ai.fakeSelect={},Ai.fakeSelect.autodetect=()=>{g(".faux-select:not(.ready)").each(function(){g(this).addClass("ready");const t=g(this),e=g("span.options",t);let o=!0;ke.addListener(ke.closeall,()=>{o&&t.removeClass("expanded"),o=!0}),g("a",g(this)).click(()=>{o=!1}),g("ul",g(this)).click(()=>{if(o)return!1}),g(this).click(function(){if(g(this).hasClass("expanded")?g(this).removeClass("expanded"):(ke.dispatch(ke.closeall),g(this).addClass("expanded"),e.outerWidth(t.outerWidth())),o)return!1}),g(window).scroll(()=>{t.hasClass("expanded")&&t.removeClass("expanded")})})};const ar={};ar.registerRequestForm=t=>{const e=g(`#${t}`),o=e.attr("action");function n(h){const u=e.serializeArray();u.push({name:"userkey",value:we.get("uek")});const p=e.html();return e.html("<em>Please wait...</em>"),g.post(o,u,T=>{e.replaceWith(T)}).fail(()=>{e.html(p),g('[type="submit"]',e).click(n)}),!1}g('[type="submit"]',e).click(n);const s=g('[data-action="manage"]',e),a=`remove-friend-${g('input[name="uid"]',e).val()}`;ke.addListener(a,()=>{s.html('<p><em class="notation">Un-friended...</em></p>')}),g("a",s).click(function(h){h.preventDefault();const u=new ye({remove_on_hide:!0});return u.show(ye.spinner),u.load(g(this).attr("href")),!1})},ar.registerManageButtons=t=>{const e=g(t);e.removeAttr("id");const o=e.attr("data-friend"),n=g('[data-action="manage"]',e),s=g('[data-action="unfriend"]',e);n.on("click",function(){const a=new ye({remove_on_hide:!0});return a.show(ye.spinner),a.load(g(this).attr("href")),!1}),s.on("click",function(){return confirm(`Are you sure you want to unfriend ${o}?`)&&(g.post(g(this).attr("href"),{userkey:we.get("uek")}),_t.fancyRemove(e)),!1})};const lr={_initialized:!1,init:function(){this.update(),this._initialized||ke.addListener(ke.resize,this.update),this._initialized=!0},init_grids_with_max_rows:()=>{g("*[data-max-rows]").each(function(){const t=g(this),e=Number.parseInt(t.attr("data-max-rows"));lr.setMaxRows(t,e)})},update:()=>{lr.init_grids_with_max_rows()},setMaxRows:(t,e)=>{let o=-9999,n=1;t.children().each(function(){g(this).show();const s=g(this).offset().left;s<=o&&n++,o=s,n>e&&g(this).hide()})}},Xr={};Xr.register=(t,e)=>{const o=typeof t=="string"?g(t):t,n=typeof e=="string"?g(e):e;n.remove(),n.css("position","absolute"),n.css("z-index",500),g("body").first().append(n),n.hide();let s=!1,a=!1;function h(){const T=o.offset().left+o.outerWidth()/2,v=5,m=Number.parseInt(n.css("padding-bottom"),10);n.css("top",o.offset().top-n.outerHeight()-v+m),n.css("left",T-n.outerWidth()+42),n.show()}function u(){!a&&!s&&n.hide()}o.mouseover(()=>{a=!0,h()}),o.mouseout(()=>{a=!1,setTimeout(u,5)}),o.on("remove",()=>{a=!1,setTimeout(()=>{u(),n.remove()},5)}),n.mouseover(()=>{s=!0}),n.mouseout(()=>{s=!1,setTimeout(u,5)})};const us=!!we.get("ismobile"),cs={view:(t,e)=>{e&&e.preventDefault();const o=new Image;o.onload=()=>{const n={};let s=!1;const a=new ye({remove_on_hide:!0});if(a.show(o),us)g(o).click(()=>{a.hide()});else{a.onRemove(()=>{g(o).off(Je.mouseDown,u),g(document).off(Je.mouseMove,h),g(document).off(Je.mouseUp,p)});const h=T=>{if(s){const v=T.pageX-s.x,m=T.pageY-s.y;s={x:T.pageX,y:T.pageY},a.$elements.hover.scrollLeft(a.$elements.hover.scrollLeft()-v),a.$elements.hover.scrollTop(a.$elements.hover.scrollTop()-m)}},u=T=>(n.x=T.pageX,n.y=T.pageY,s=n,!1),p=T=>{s=!1,n.x===T.pageX&&n.y===T.pageY&&a.hide()};g(o).on(Je.mouseDown,u),g(document).on(Je.mouseMove,h),g(document).on(Je.mouseUp,p)}},o.src=t}},Cn=250,fs=(()=>{let t=1;return()=>t++})(),mr=class mr{constructor(e,o,n){it(this,ki);it(this,fi);it(this,un);it(this,Mt,null);it(this,Vt,!1);it(this,ni,!1);it(this,Wi,null);it(this,Vi,{});it(this,Ii);mr.last_id++,this.container=g(`#${e}`),this.id=fs(this.container[0]),Me(this,un,g(`#${o}`)),Me(this,ni,!1),this.container.show(),this.width=this.container.outerWidth(),this.direction=this.container.hasClass("right-menu")?1:-1,this.background=g("div.mobile-menu-background",this.container).first(),Me(this,fi,this.width*this.direction),this.background.css("left",ve(this,fi)),Xn(this,ki,Do).call(this),Xn(this,ki,Mo).call(this,n),Xn(this,ki,Ro).call(this),this.container.hide(),ke.addListener(ke.closeall,s=>{if(ve(this,ni)&&s!==`menuController${this.id}`){this.background.stop();const a=ve(this,fi);Me(this,Vt,!0),Me(this,ni,!1),this.background.animate({left:a},Cn,()=>{Me(this,Vt,!1),this.container.hide()})}})}set screenLock(e){Me(this,Ii,e)}get screenLock(){return ve(this,Ii)===void 0&&Me(this,Ii,new gt),ve(this,Ii)}addMenu(e){ve(this,Vi)[e.id]=e}get defaultMenu(){return ve(this,Wi)}set defaultMenu(e){Me(this,Wi,e)}setMenu(e,o,n){if(o&&ve(this,Vt))return;let s=n;s||(s=1);const a=ve(this,Vi)[e];let h,u,p=0;if(ve(this,Mt))if(p=ve(this,fi)*s,o===!0){Me(this,Vt,!0);const T=ve(this,Mt).$element;h=p,ve(this,Mt).$element.animate({left:h},Cn,()=>{Me(this,Vt,!1),T.hide()})}else ve(this,Mt).$element.hide();Me(this,Mt,a),a&&(ve(this,Mt).$element.show(),ve(this,Mt).$element.scrollTop(0),o===!0?(u=p*-1,h=0,Me(this,Vt,!0),ve(this,Mt).$element.css("left",u),ve(this,Mt).$element.animate({left:h},Cn,()=>{Me(this,Vt,!1)})):ve(this,Mt).$element.css("left",0))}get menus(){return ve(this,Vi)}};fi=new WeakMap,un=new WeakMap,Mt=new WeakMap,Vt=new WeakMap,ni=new WeakMap,Wi=new WeakMap,Vi=new WeakMap,Ii=new WeakMap,ki=new WeakSet,Do=function(){let e=null,o=null,n=!1;const s=a=>{const h=a.originalEvent.touches[0].clientY,u=ve(this,Mt).$element.prop("scrollHeight")-this.container.innerHeight();if(u<1)return a.preventDefault(),!1;const p=h-e;e=h;const T=ve(this,Mt).$element.scrollTop();return T!==o&&!n&&(n=!0),(p>0&&T<1||p<0&&T>=u)&&!n?(a.preventDefault(),!1):!0};this.container.on("touchmove",s),this.container.on("touchstart",a=>{e=a.originalEvent.touches[0].clientY,o=ve(this,Mt).$element.scrollTop(),n=!1})},Mo=function(e){const o=this;g("*[data-menu-id]",this.container).each(function(){const n=new hs(g(this),o);e?Number.parseInt(n.id)===Number.parseInt(e)&&(o.defaultMenu=n):n.isRoot()&&(o.defaultMenu=n),o.addMenu(n)})},Ro=function(){ve(this,un).on("click",e=>{if(e.preventDefault(),ve(this,Vt))return;ke.dispatch(ke.closeall,`menuController${this.id}`),Me(this,Vt,!0);const o=ve(this,ni),n=o?0:ve(this,fi),s=o?ve(this,fi):0;Me(this,ni,!o),ve(this,ni)&&this.setMenu(ve(this,Wi).id,!1),this.background.css("left",n),this.container.show(),this.background.animate({left:s},Cn,()=>{Me(this,Vt,!1),ve(this,ni)?this.screenLock.lock():(this.container.hide(),this.screenLock.unlock())})})};let ur=mr;class hs{constructor(e,o){it(this,Xi);it(this,Mn,[]);it(this,Gi,null);this.$element=e,Me(this,Xi,e.attr("data-menu-id")),Me(this,Gi,e.attr("data-parent-id")),this.$element.hide(),g("*[data-open-menu]").each(function(){const n=g(this).attr("data-open-menu"),s=g(this).attr("data-direction")==="-1"?-1:1;g(this).on("click",()=>(o.setMenu(n,!0,s),!1))})}addChild(e){ve(this,Mn).push(e)}isRoot(){return!(ve(this,Gi)&&ve(this,Gi)!==ve(this,Xi))}get id(){return ve(this,Xi)}}Xi=new WeakMap,Mn=new WeakMap,Gi=new WeakMap;const Gr={};Gr.menuController=ur;const We={open_menu:null,interval:3e4,decay:0,timer:null,window_active:!0,active:!0,inactive_start:null,containers:{},init:function(){const t=g("#notification_icons");this.notification_bar=g("#notification-bar"),this.bar_color=this.notification_bar.css("backgroundColor"),this.flash_color="#fc0",t&&g("a[id^='notify']").each(function(){g(this).show();const s=g(this).attr("id").split("_"),a=s.shift(),h=s.join("_");We.containers[h]={toggles:a==="notifyonly",element:g(this),value:0}});const e=we.get("notification_init_values",null);e&&We.parse(e,!1),g(window).blur(()=>{We.active=!1,We.inactive_start=new Date}),window.setInterval(()=>{We.decay+=1e4},1e4);const o=()=>{We.decay>We.interval*4&&We.makeRequest(),We.decay=0},n=["mousedown","mousemove","keypress","scroll","touchstart"];for(const s of n)document.addEventListener(s,o,!0);g(window).focus(()=>{const s=new Date-We.inactive_start;We.active=!0,We.inactive_start=null,s>We.interval&&We.begin()}),window.setTimeout(this.begin.bind(this),We.interval)},begin:()=>{We.timer&&clearInterval(We.timer),We.makeRequest()},makeRequest:()=>{We.open_menu||(We.timer&&window.clearTimeout(We.timer),g.getJSONXD(we.get("notification_ajax_url","/checknotifications"),function(t){We.parse(t,!0),We.timer=window.setTimeout(We.load.bind(this),Number.parseInt(We.interval+We.decay,10))}))},load:()=>{We.active&&We.makeRequest()},parse:function(t,e){let o=!1;if(!t)return!1;for(const n in t)this.update(n,t[n],e)&&(o=!0);e&&o&&this.bar_color&&this.flash_color&&(this.notification_bar.stop(),ke.dispatch(ke.newNotifications),this.notification_bar.css("background-color",this.flash_color),this.notification_bar.animate({"background-color":this.bar_color},1e3,()=>{this.notification_bar.css("background-color","")}))},update:function(t,e){let o=e;if(We.values[t]=o,!this.containers[t])return;const n=this.containers[t].element,s=this.containers[t].value,a=g("span",n);return this.containers[t].value=o,o==="0"&&(o=""),a.html(o||""),o>s}};We.values={messages:0,interactions:0},We.setInteractionButton=class{constructor(t){this.$button=t,this.is_open=!1,this.interaction_blackout=new ye,this.interaction_blackout.onHide(()=>{this.is_open=!1}),this.$button.click(()=>this.toggle())}toggle(){if(this.is_open)this.interaction_blackout.hide();else{this.is_open=!0,this.interaction_blackout.show(ye.spinner);const t=this.$button.attr("href");g.getXD(t,"context=header",e=>{this.interaction_blackout.show(e)}),We.clearCount(this.$button)}return!1}},We.button=function(t,e){let n=e;this.$button=g(t);const s=this.$button.attr("data-detail"),a=g("#notification-buttons"),h=g("#header-dropdown-template").clone(),u=g(".menu-body",h).first(),p=g(".menu-footer",h).first();g("a",p).first().attr("href",this.$button.attr("href"));const v=g(".menu-scroll",h).first(),m=g(".loading-spinner",h).first();m.remove(),n?n.show().detach():n=m,this.is_open=!1;const f=this;this.open=function(){if(f.is_open)return;We.clearCount(this.$button),f.is_open=!0,We.open_menu=f,ke.dispatch(ke.topMenuOpen),g("body").append(h),u.html("").append(n);const d=a.offset().left+a.outerWidth();h.show().css("left",d-h.outerWidth()),h.height("");const b=u.outerHeight();h.height(0),h.animate({height:`${b}px`},250),p.hide(),v.css("height","100%"),s&&g.getJSONXD("/checknotifications",{detail:s},y=>{if(y.has)p.show();else if(p.hide(),y.redirect){window.location.href=y.redirect;return}v.css("height",""),u.html(y.partial),h.stop();const _=h.height();h.height("");let A=h.height();const w=u.innerHeight()+p.outerHeight();w<A&&(A=w),h.height(_),h.animate({height:A},250)}),h.off("click").on("click",y=>{y.stopPropagation()}),v.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",y=>{y.stopPropagation(),y.preventDefault();const _=v.scrollTop();y.originalEvent.wheelDelta>0||y.originalEvent.detail<0?v.scrollTop(_-12):v.scrollTop(_+12)})},this.close=()=>{f.is_open&&(f.is_open=!1,We.open_menu=null,h.animate({height:0},100,()=>{h.detach(),h.height("")}))},g(window).resize(this.close),f.$button.off("click").on("click",d=>(d.preventDefault(),We.open_menu&&We.open_menu!==f&&We.open_menu.close(),f.is_open?f.close():f.open(),!1)),f.$button.clickOutside(d=>{f.close()})},We.clearCount=t=>{g("span",t).html("")};let on=null;const Zr=()=>(on||(on=new ye({remove_on_hide:!0}),on._onfail=()=>{on.hide()}),on),Nn={};Nn.watch=()=>{const t=g("#playlist_add"),e=g("form",t),o=Zr();e.submit(function(){return g(this).ajaxSubmit(n=>{n!=null&&n.url?window.location.href=n.url:o.show(n)}),!1}),g("a.icon-close",t).click(()=>{o.hide()})},Nn.register=t=>{const e=Zr();t.click(function(){const o=this.href;return e.load(o,null,n=>{Nn.watch()}),!1})};const ds=t=>{const e=t;e.is("a")&&e.on("click",()=>{const o=e.attr("href");return g.post(o,()=>{e.on("click",()=>!1),e.html("Reported spam")}),!1})},rt={};rt.blackout=null,rt.form={},rt.form.blackout=null,rt.form.launch=!1,rt.form.votebar=null,rt.form.show_fields=t=>{let e=t;if(e&&g.isNumeric(e)){const o=e;e=()=>{const n=rt.getExisting(o);n!=null&&n.exists()&&n.hide()}}g("#review_fields").hasClass("collapsed")&&g("#review_fields").removeClass("collapsed"),typeof e=="function"&&e()},rt.form.hide_fields=t=>{let e=t;if(e&&g.isNumeric(e)){const o=e;e=()=>{const n=rt.getExisting(o);n!=null&&n.exists()&&(n.show(),g("#review_fields").hasClass("notempt")||g("#review_fields").addClass("notempt"))}}g("#review_fields").hasClass("collapsed")||g("#review_fields").addClass("collapsed"),typeof e=="function"&&e()},rt.getId=t=>t.attr("data-review-id"),rt.getExisting=t=>g("div.pod").find(`.review[data-review-id="${t}"]`),rt.form.watch=()=>{const t=g("#review_vote"),e=g("form",t),o=g("#review_fields"),n=s=>{g("#review_vote").exists()&&rt.form.hide_fields(()=>{g("#review_vote").replaceWith(g(s.edit))})};e.submit(function(s){const a=g("#review_agreed");return a.exists()&&!a.is(":checked")?(alert("You haven't agreed to the terms and conditions!"),!1):(g(this).ajaxSubmit(n),!1)}),e.find("button.cancel").off().click(function(){const s=g(this);return rt.form.hide_fields(s.attr("data-review-id")),!1}),g("textarea",o).focus(()=>{o.hasClass("collapsed")&&o.removeClass("collapsed")}),g(document).click(s=>{g(s.target).closest(o).length||g("textarea",o).exists()&&!g("textarea",o).val().length&&!o.hasClass("collapsed")&&o.addClass("collapsed")})},rt.getBlackout=()=>(rt.blackout===null&&(rt.blackout=new ye({remove_on_hide:!0})),rt.blackout),rt.paginate=(t,e)=>{const o=s=>{let a=s;window.location.pathname.indexOf("/reviews")===0&&(a=`${a}?include-title`),g.get(a,h=>{t.replaceWith(h),e?history.pushState({page:s},null,s):history.pushState({page:s},null,null)})};(()=>{g('.pagenav[id^="review-navigation-"] a').off().click(function(){const s=this.href;return s!=null&&s.length&&o(s),!1})})()},rt.registered={},rt.register=function(t,e){const o=this;o.launch=e===!0;let n=t;typeof n=="string"&&(n=g(n)),n.attr("id")in rt.registered&&n.off(),rt.registered[n.attr("id")]=n;const s=n.parents(".pod"),a=g(".review-options",n),h=g(".rev-resp-container",n),u=g('a[class$="pencil"]',a),p=g('a[class$="trash"]',a),T=g('a[class$="moderate"]',a),v=g('a[class="comment-count"]',n);g("time",n).couNtinGDate({format:"longDate"}),p.off().ajaxifyLink({confirmation:"Are you sure you want to delete this review?",success_func:f=>{const d=g("#review_vote");f!=null&&f.edit&&d.exists()&&d.replaceWith(g(f.edit));const b=g(f.success).find(".pod-body");n.replaceWith(b),b.on("remove",function(y){g(this).off(),s.attr("id")&&s.attr("id").indexOf("review_event_")===0?s.remove():g(".pod-body.review",s).length||s.remove();const _=g("#review_fields");_.exists()&&_.removeClass("notempt")})}}),u.off().click(function(){return o.launch===!1?(n.hide(),rt.form.show_fields()):(rt.form.blackout=new ye,rt.form.blackout.load(this.href),rt.form.blackout._onhide=()=>{window.location.reload(!0)}),!1}),T.off().click(function(){return rt.getBlackout().load(this.href,null,f=>{g(f)}),!1});const m=(f,d)=>{let b=d;typeof b>"u"&&(b=!1);const y=g(f.response_form);b&&h.hide(),y.insertAfter(n),rt.watch_response_form(g("form",y),rt.form.launch)};v.off().on("click",function(){const f=g(this);return g.get(this.href,d=>(f.remove(),m(d))),!1}),h.exists()&&(g('a[class$="pencil"]',h).click(function(){const f=g(this);return g.get(this.href,d=>{m(d,f.parents(".authresponse"))}),!1}),g('a[class$="trash"]',h).ajaxifyLink({confirmation:"Are you sure you want to remove this response?",success_func:f=>{const d=g(f.review),b=d.attr("data-review-id");rt.getExisting(b).replaceWith(d)}}))},rt.watch_response_form=t=>{const e=o=>{t.parent().remove();const n=g(o.review),s=n.attr("data-review-id");rt.getExisting(s).replaceWith(n)};t.find('button[class="cancel"]').off().click(()=>(g.get(t.attr("action"),e),!1)),t.off().on("submit",function(){return g(this).ajaxSubmit(e),!1})};const ps={initMobile:(t,e,o,n,s)=>{let a=!1,h=!!s;const u=g(`#${t}`),p=g(`#${e}`),T=g(`#${o}`),v=new gt,m=u.find("input").first();u.show();const f=u.outerHeight();h?u.css("top",p.outerHeight()):u.hide(),T.on("click",()=>{if(a)return!1;ke.dispatch(ke.closeall,"topsearch");const d=p.outerHeight(),b=d-f;a=!0;const y=h?d:b,_=h?b:d;return h=!h,u.css("top",y),u.show(),h&&(v.lock(),m.focus()),u.animate({top:_},n,()=>{a=!1,h||(u.hide(),v.unlock())}),!1}),ke.addListener(ke.resize,()=>{if(h){u.stop();const d=p.outerHeight();u.css("top",d)}}),ke.addListener(ke.closeall,d=>{if(console.log("closeall",d),v.unlock(),d!=="topsearch"&&h){u.stop();const y=p.outerHeight()-f;h=!1,a=!0,u.animate({top:y},n,()=>{a=!1,u.hide()})}})}},$n={};let cr=null;const ms=()=>(cr||(cr=new ye({remove_on_hide:!0})),cr);$n.watch=()=>{const t=o=>{const n=o.contentEditable,s=o.readOnly,a=o.disabled;o.contentEditable=!0,o.readOnly=!1,o.disabled=!1;const h=document.createRange();h.selectNodeContents(o);const u=window.getSelection();u.removeAllRanges(),u.addRange(h),o.setSelectionRange(0,999999),o.contentEditable=n,o.readOnly=s,o.disabled=a,document.execCommand("copy")},e=(o,n)=>{bt()?t(o[0]):(o.select(),document.execCommand("copy"),o.selectionEnd=o.selectionStart,o.blur()),n!=null&&n.length&&(n.show(),setTimeout(()=>{n.fadeOut(500)},750))};g("[data-action='copy-input']").each(function(){const o=g(this);o.removeAttr("data-action");const n=g("input",o),s=g("a",o),a=()=>{e(n,g(".check-fader",s))};iOS&&(n.prop("readonly",!0),n.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})),n.on("click",a),s.on("click",a),n.on("keypress",()=>!1)})},$n.register=t=>{const e=ms();t.click(function(){const o=this.href;return e.load(o,null,()=>$n.watch()),!1})};const ii=function(t,e,o,n,s){this.prefix=t,this.is_user_type=e;let a=o;g.type(a)==="string"?a.indexOf("#")!==0?this.$input=g(`#${a}`):(this.$input=g(a),a=a.substring(1)):(this.$input=a,a=this.$input.attr("id")),ii.instances[a]=this,this.$container=this.$input.closest(`div[id^="${this.prefix}_input"]`),this.$entry_template=g(g(`#${this.$container.attr("id")}_${t}`).html()),we.get("ng_developer_debug")&&(console.log("Entry template: "),console.log(`#${this.$container.attr("id")}_${t}`),console.log(this.$entry_template.exists())),this.names=[],this.max_length=n,this.max_entries=s||!1,this.options={},this.init()};ii.prototype={addToCollection:function(t){const e=this.$entry_template.clone(),o=t.substr(0,this.max_length);g("span",e).html(o),g("input",e).val(o),this.register(e);const n=g(".tag-collection",this.$container);n!=null&&n.exists()&&n.append(e),this.onAddEntry(e)},checkCollection:function(){const t=this.getCollection();if(ke.dispatch(ke.tagsUpdated,this),t!=null&&t.exists()){const e=g("div.tag",t).length;e===0?t.hide():t.show(),g(`#${this.$container.attr("id")}_used`).html(e)}},pushToCollection:function(t){let e=g("div",this.getCollection()).length,o=!1,n;const s=h=>g.strip_text(h,!this.is_user_type),a=t.length;for(let h=0;h<a&&(this.options&&this.options.strip!==!1?n=s(t[h]):n=t[h],n.length&&!g.rInArray(n.toLowerCase(),this.names)?(this.addToCollection(n),o=!0,e=e+1):n.length&&g.rInArray(n.toLowerCase(),this.names)&&(o=!0),!(this.max_entries!==!1&&e===this.max_entries));++h);return this.checkCollection(),o},disable:function(){this.$input.disable()},enable:function(){this.$input.enable(),g(document).focus(),this.init()},getCollection:function(){return g(".tag-collection",this.$container)},init:function(){const t=this;if(t.max_entries===null)throw"Please set max entries.";const e=function(){const o=this.value;if(!o.length)return!0;const n=o.split(",");t.pushToCollection(n)&&g(this).val(""),t.max_entries===!1||g("div",t.getCollection()).length<t.max_entries?g(this).focus():(g(this).prop("disabled",!0),t.tabProgressesTo())};t.$input.off().on("blur",e).on("paste",function(){setTimeout(e.bind(this),0)}).on("keydown",function(o){if((o==null?void 0:o.which)===13){setTimeout(()=>{this.value.length&&(g(this).blur(),this.focus())},0),o.preventDefault();return}if((o==null?void 0:o.which)===9)if(g(this).data("tablock"))g(this).data("tablock",!1),setTimeout(()=>{g(this).prop("disabled")?t.tabProgressesTo():g(this).focus()},0);else{if(this.value.length)return g(this).blur(),!1;t.tabProgressesTo()}})},onAddEntry:t=>{console.debug("taghelper.onAddEntry must be overwritten.")},onRemoveEntry:(t,e)=>{console.debug("taghelper.onAddEntry must be overwritten.")},pushName:function(t){this.names.push(t.toLowerCase())},register:function(t){const e=this;let o=t;if(g.isString(o)&&(o=g(`#${o}`)),!o.exists())return console.warn("Can't register element, it doesn't exist."),console.log(o),!1;e.names.push(g("span",o).html().trim()),o.click(n=>{g(n.target).is("span")&&e.removeEntry(o,!0)}),g('a[class$="close"]',o).click(function(){e.removeEntry(g(this))})},removeEntry:function(t,e){let o=t;const n=e||!1;o.is("a")&&(o=o.closest("div"));const s=g("input",o).val(),a=this.names,h=a.indexOf(s);h!==-1&&(a.splice(h,1),this.names=a),this.$input.prop("disabled",!1),n&&this.$input.val(g("span",o).html().trim()).focus();const u=o;o.remove(),this.onRemoveEntry(u,n),this.checkCollection()},tabProgressesTo:()=>{setTimeout(()=>{g("div[contenteditable]").first().focus()},0)},setStrip:function(t){return this.options.strip=t,this}},ii.prototype.constructor=ii,ii.instances={},ii.getInstance=t=>{if(t===void 0)return null;let e=t;return g.type(e)!=="string"&&(e=e.attr("id")),ii.instances[e]?ii.instances[e]:null};const Qr=async function(t){$(this).addClass("open"),$("input",$(this)).filter('[data-subscription-only!="1"]').enable(),$("button",t.getForm()).enable()},gs=function(t,e){if($(this).hasClass("open"))return;const o=t.getForm(),n=e!==!1,s=t.getPurchasePod(!0).not($(this));s.removeClass("open"),s.find("input").disable(),s.find("button").hide(),Qr.call(this,t);const a=t.purchasee!==null?t.purchasee.getHelper():null,h=$('input[name="user"]',o);if(a!==null&&!h.val().length)a.$input.attr("required","required");else if(a!==null?(a.$input.removeAttr("required"),PHP.get("user_logged_in")===!0&&s.find("button").show()):s.find("button").show(),n){let u=$("button",o);u.disable(),t.saveChanges(()=>{u.enable()})}return t.moveStripeToPod($(this)),PHP.get("ismobile")&&n&&$(this).scrollTo(),t},vs=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),Pn=function(){this.names={},this.default_prices={},this.contribution_texts={},this.short_descriptions={},this.types={}};Pn.prototype={setNames:function(t,e){return this.names[t]=e,this},setDefaultPrice:function(t,e){return this.default_prices[t]=e,this},setContributionTexts:function(t,e){return this.contribution_texts[t]=e,this},setShortDescriptions:function(t,e){return this.short_descriptions[t]=e,this},setTypes:function(t,e){return this.types[t]=e,this}},Pn.prototype.constructor=Pn;const In=function(t){this._id=t,this.paymentRequest=null,this.meta=new Pn,this.has_purchase_options=!1,this.purchasee=null};In.prototype={getContainer:function(){return $(`#${this._id}`)},getForm:function(){let t=this;return $("form",t.getContainer())},getFormData:function(){const t=this.getForm().serializeArray(),e={};return $.map(t,function(o){e[o.name]=o.value}),e},getRecurCheckboxes:function(){return this.getForm().find('input[type="checkbox"][name="recur"]')},getPurchasePod:function(t){let e=this;return t===void 0?$("div.supporter-purchase.open",e.getForm()).first():t===!0?$("div.supporter-purchase",e.getForm()):$(`div.supporter-purchase[data-param="${t}"]`,e.getForm())},saveChanges:function(t){if(PHP.get("user_logged_in")!==!0)return;const o=this.getForm(),n=o.serializeArray();$.post(o.attr("action"),n,t).fail(()=>{$("button",o).enable()})},setClickables:function(){let t=this,e=t.getPurchasePod(!0);e.toArray().filter(n=>$(n).hasClass("open")).length===0&&Qr.call(e.first().get(0),t),e.off().on("click",function(n){!$(n.target).is(":radio")&&!$(n.target).is("a")&&gs.call(this,t,n)});let o=t.getPurchasePod();o!==void 0&&t.moveStripeToPod(o)},init:function(){let t=this;return t.initStripe().initializePurchasables(),t},initializePurchasables:async function(){let t=this;await(async()=>{t.getPurchasePod(!0).each(async function(){await ke.dispatch(`ngSupporter-${$(this).attr("data-param")}`,t)})})(),t.setClickables(),t.has_purchase_options===!1&&$("p.supporter-comment",t.getForm()).first().hide();const e=s=>{console.log("toggline"),$("button",t.getForm()).prop("disabled",!s);const h=$('[data-stripe="payment-request-button"]',t.getForm());s?h.show():h.hide()};$("button",t.getForm()).off().click(function(){$("button",t.getForm());let s;const a=()=>{e(!0)};return $(this).hasClass("credit-card")?s=function(){ys(a)}:s=function(){window.onunload=a,window.location.href="/supporter/payment"},e(!1),t.saveChanges(s),!1}),t.getRecurCheckboxes().off().click(function(){const s=$(this).closest("[data-param]"),a=s.attr("data-param"),h=this.checked?1:0;$("h4",s).html(t.meta.names[a][h]),$("h4",s).next("span").html(t.meta.short_descriptions[a][h]),$('input[name="type"]',s).val(t.meta.types[a][h]),$("strong.contribution_text",s).html(t.meta.contribution_texts[a][h]),t.updateStripeTotal(s),t.saveChanges()});let o="";const n=function(){const s=$(this).up("[data-param]");let a=parseFloat(this.value.replace(/[^0-9.]/,""));a>1e4&&(a=o),o=a,e(!0),$('[data-price="contribution"]',s).html(vs(a)),$('[data-price="user-amount"]',s).val(a.toFixed(2)),$('input[name="amount"]',s).val(a.toFixed(2)),t.updateStripeTotal(s)};return $('input[type="radio"]',t.getForm()).off().click(function(){const s=$(this).up("[data-param]");$('[data-price="user-amount"]',s).val(this.value),n.call(this)}),$('[data-price="options"] a',t.getForm()).off().click(function(s){s.preventDefault();const a=$(this).up("[data-param]");$('[data-price="options"]',a).hide(),e(!1),$('[data-price="user-options"]',a).show();const u=$('[data-price="user-amount"]',a);return u.focus(),n.call(u[0]),!1}),$('[data-price="user-options"] a',t.getForm()).click(function(s){s.preventDefault();const a=$(this).up("[data-param]");$('[data-price="user-options"]',a).hide(),e(!1);const u=$('[data-price="options"]',a);u.show();let p=$('input[type="radio"]:checked',u);return p.length<1&&(p=$('input[type="radio"]',u).first().prop("checked",!0)),n.call(p[0]),t.saveChanges(),!1}),$('[data-price="user-options"] input[type="text"]',t.getForm()).on("blur",function(s){const a=$(this),h=a.closest('[data-price="user-options"]'),u=function(){const p=a.closest('[data-price="options"]'),T=p.find("input");p.show(),h.hide(),T[0].checked=!0,n.call(T[0])};if(!this.value.length)s.type==="blur"&&u.call(this);else{const p=parseFloat(this.value.replace(/[^0-9.]/,"")),T=parseFloat($(this).attr("data-min-price"));if(isNaN(p))return this.value=o,!1;if(p<T)return!1;this.value!==$(this).data("contribution")&&($(this).data("contribution",this.value),n.call(this))}}),$("input",t.getForm()).change(function(){this.name.length&&this.name}),t.saveChanges(),window.onunload=t.saveChanges.bind(t),t},initPurchasee:function(t){return t=typeof t<"u"?t:{},t.hasOwnProperty("form")||(t.form=this.getForm()),t.supporter=this,this.purchasee=new Ln(t),this.purchasee.initPurchaser(),this},initStripe:function(){let t=this;const e=Stripe(PHP.req("stripe_pk")),o=h=>{let u=$('div[data-stripe="payment-request-errors"]',t.getForm());h?($("span",u).text(h),u.show()):u.hide()},n=e.paymentRequest({currency:"usd",country:"US",requestPayerName:!0,requestPayerEmail:!0,total:{label:"Arbitrary amount.",amount:100}}),a=e.elements().create("paymentRequestButton",{paymentRequest:n,style:{paymentRequestButton:{height:PHP.get("ismobile")?"70px":"40px"}}});return n.canMakePayment().then(h=>{let u=$('[data-stripe="payment-request-button"]',t.getForm());h&&u.get(0)!==void 0?a.mount(u.get(0)):(u.hide(),$(".stripe-holder",t.getForm()).slideUp("fast",p=>$(p).remove()))}),n.on("paymentmethod",async h=>{const u=t.getForm(),p=new FormData(u.get(0));p.append("email",typeof h.payerEmail<"u"?h.payerEmail:null),p.append("walletName",h.walletName),o(!1);const{client_secret:T}=await fetch("/supporter/intent",{method:"POST",body:p}).then(f=>f.json()),{error:v,paymentIntent:m}=await e.confirmCardPayment(T,{payment_method:h.paymentMethod.id},{handleActions:!1});if(v){o(v),h.complete("fail");return}if(h.complete("success"),m.status==="requires_action"){const{error:f,paymentIntent:d}=await e.confirmCardPayment(T);if(f){o(f);return}}$.get("/supporter/intent?success",f=>{if(PHP.get("ismobile")){let d=$("#body-main");$(".column",d).remove(),d.append(f)}else $(".body-guts").html(f)})}),t.paymentRequest=n,t},getStripeTotal:function(t){let e=this;t=t!==void 0?t:e.getPurchasePod();const o=e.meta,n=t.attr("data-param"),s=$('input[name="recur"]',t),a=+(s.exists()&&s.is(":checked"));return{label:o.names[n][a],amount:parseInt($('input[name="amount"]',t).val()*100,10)}},updateStripeTotal:function(t){let e=this;t=t!==void 0?t:e.getPurchasePod();const o=e.getStripeTotal(t);return e.paymentRequest.update({total:o}),e},moveStripeToPod:function(t){let e=this;const o=$('[data-stripe="payment-request"]',e.getContainer()).detach(),n=$("div[data-stripe-destination]",t);if(!n.exists()){o.remove();return}return n.append(o),e.updateStripeTotal(t)}},In.prototype.constructor=In;const Ln=function(t){this.supportObj=t.supporter,this.helper=null,this.$form=typeof t.form<"u"?t.form:null,this.$suggest_input=typeof t.input<"u"?t.input:null},ys=t=>{const e=function(n){console.dir(n),n.status===302?alert("Looks like you may have logged out? You must be logged in to purchase anything!"):alert("Sorry, that request failed!"),this.hide()};return new ye({remove_on_hide:!0,remove_on_click_outside:!1,_onfail:e}).load("/supporter/credit-card",null,t),!1};Ln.prototype={getHelper:function(){return this.helper},initPurchaser:function(){let t=this;const e=t.supportObj.getForm(),o=$('input[type="hidden"][name="user"]',e),n=ii.getInstance($('input[name="user_purchase"]',e));n.onAddEntry=function(a){n.$container.hide(),$.post("/supporter/purchase-options",{user:$('input[type="hidden"]',a).val()},function(h){e.parent("div").replaceWith(h),t.supportObj}).fail(function(){n.$container.show()})};const s=$('[data-container="purchase-for"]',e);$('a[class^="ngicon-"]',s).off().click(function(){s.hide(),t.supportObj.getPurchasePod(!0).hide(),$("p.supporter-comment",e).hide(),$('[data-container="gifting"]',e).hide(),n.$container.show()}),o.val().length&&n.$container.hide()}},Ln.prototype.constructor=Ln;const fr={};fr.block={onClickTogglePreview:(t,e)=>{t.preventDefault();const o=g(e).closest("[data-block-target]");o.hasClass("preview-blocked")?o.removeClass("preview-blocked"):o.addClass("preview-blocked")},handleUpdates:t=>{function e(n,s,a,h){const u=g(`[data-block-target="${n}"]`);if(u.length<1)return!1;u.removeClass("preview-blocked"),h?u.addClass("user-is-blocked").removeClass("user-not-blocked"):u.addClass("user-not-blocked").removeClass("user-is-blocked");const p={user_id:a.user_id,page:s,blocked:h,exemptions:a.exemptions};function T(v){ke.dispatch(g(v).attr("data-block-event"),p)}return u.each(function(){g(this).attr("data-block-event")&&T(g(this))}),g("[data-block-event]",u).each(T),p}let o=!1;for(const n in t.exemptions)if(!t.exemptions[n]){o=!0;break}e(t.user_id,null,t,o);for(const n in t.exemptions){const s=`${n}-${t.user_id}`;o=!t.exemptions[n];const a=e(s,n,t,o);a&&ke.dispatch(ke.userBlockUpdated,a)}}},ke.addListener(ke.userBlocksUpdated,fr.block.handleUpdates);const As=function(t,e){const o=this,n=!!we.get("ismobile");let s=t,a=e,h=!1,u=!1;typeof s=="string"&&(s=g(s)),typeof a>"u"?a=null:a==="invalid"&&(a=null,u=!0);const p=s.parents("form"),T=g("div.star-reaction",s).first();let v;this.voteCallback=d=>{},this.getSelectedInput=()=>g("input[type=radio]:checked",s),this.getRealValue=function(){const d=this.getSelectedInput();return d?Number.parseInt(d.val(),10):null},this.getValue=function(){const d=this.getRealValue();return Number.parseInt(d)};let m=this.getRealValue(),f=this.getSelectedInput();if(this.showXp=()=>{if(!v.exists())return!1;const d=Number.parseInt(v.attr("data-attr-vote"),10),y=g('label[for="votebar-0"]',s).width(),_=d>0&&d%2===0?d-1:d,w=g(`label[for="votebar-${_}"]`,s).offset(),O=v.width(),k=v.height();let S=w.top;n?S=S+k/2:S=S-k;let R=w.left;d>0&&(R=w.left+Math.floor((d-1)/10*5)*y),R+=(y-O)/2,g("body:first").append(v),v.css({top:`${S}px`,left:`${R}px`}),g({brightness:5}).animate({brightness:1},{duration:500,easing:"swing",step:function(){v.css({"-webkit-filter":`brightness(${this.brightness})`,filter:`brightness(${this.brightness})`})},complete:()=>{v.fadeOut(100,()=>{v.remove()})}}),v.animate({top:S-40},{duration:500,easing:"swing"})},this.clickHandler=function(d,b,y){if(u){d.preventDefault(),g.postXD(`${we.get("www_root")}/validate-content-permission`,()=>{});return}const _=g(`#${b.attr("for")}`).val();this.castVote(d,_)&&this.showFromLabel(b,y)},this.castVote=function(d,b){if(!p.exists())return!1;const y=Number.parseInt(b,10);if(h||y===m)return this.getSelectedInput().prop("checked",!1),f.prop("checked",!0),!1;const _={show_fields:g("textarea",p).exists()&&g("textarea",p).is(":visible")?1:0,vote:y,userkey:we.get("uek")},A=s.attr("data-attr-url"),w={};g('input[type="checkbox"], textarea',p).each(function(){g(this).is("textarea")?w[this.name]=this.value:w[this.name]=this.checked});const O=k=>{var M,P;m=y,f=o.getSelectedInput(),h=!1;const R=`dl.sidestats[data-statistics="${`${_.generic_id}_${_.type_id}`}"]`,l=g(R);let C;if(l.exists()&&(C=g(k.sidestats).filter(R),l.replaceWith(C)),(M=k.edit)!=null&&M.length){const N=g(k.edit),D=g("[data-review-id]:first",N).attr("data-review-id"),B=g(".star-score",g(`[data-review-id="${D}"]`));g("span:first",B).css("width",`${y*10}%`),B.attr("title",`${(y/2).toFixed(2)}/5.00`),v&&v.remove(),v=g(".xp-info",N),v.exists()&&o.showXp()}if(k.replace_sidestats&&g("#sidestats").replaceWith(k.sidestats),(P=k.info)!=null&&P.length){const N=k.info,D=new ye,B=g(N.pod);g(".pod-body",B).append(g(N.contents)),(N.blam||N.protect)&&(D._onhide=()=>{window.location.href=N.redirect}),B.click(()=>{D.hide()}),D.show(B)}this.voteCallback(k)};return h=!0,g.post(A,_,O).fail(()=>{h=!1}),!0},this.showFromLabel=function(d,b){const y=g(`#${d.attr("for")}`),_=Number.parseInt(y.attr("value"));if(b){a=_;let A=5;const w=O=>{const k=O>1?`brightness(${O})`:"";d.css({filter:k,"-webkit-filter":k})};w(A),g({brightness:A}).animate({brightness:1},{duration:300,easing:"swing",step:function(){w(this.brightness),A=this.brightness}})}this.show(_)},this.clear=function(){this.show(a)},this.show=d=>{let b="star-reaction";d!==null&&(b+=` reaction-${d}`),T.attr("class",b)},!n)g("label",s).click(function(d){o.clickHandler(d,g(this),!0)}),g("label",s).hover(function(){o.showFromLabel(g(this))},()=>{o.clear()});else{let d=null,b=[];const y=()=>{b=[],g("label",s).each(function(){const A=g(this).offset().left+g(this).outerWidth();b.push({label:g(this),right:A})}),b.sort((A,w)=>A.right>w.right?1:-1)},_=A=>{A.preventDefault(),A.stopPropagation(),d&&d.removeClass("hover"),d=b[b.length-1].label;const w=A.originalEvent.touches[0].pageX;for(let O=b.length-1;O>=0&&w<=b[O].right;O--)d=b[O].label;d&&d.addClass("hover"),o.showFromLabel(d)};s.on("touchstart",A=>{y(),_(A)}),s.on("touchmove",A=>{_(A)}),g(document).off("touchend").on("touchend",A=>{d&&(g(`#${d.attr("for")}`,s).prop("checked",!0),o.clickHandler(A,d,!0),d=null,b=[],g("label",s).removeClass("hover"))})}s.on("remove",function(){g(this).off()})},bs=(t,e)=>Math.floor(Math.random()*(e-t+1)+t),_s=(t,e,o,n)=>{const s=n||`newwin${bs(1e6,9999999)}`,a=`height=${e},width=${o},top=${(screen.height-e)/2},left=${(screen.width-o)/2},status=yes,scrollbars=yes,resizable=yes,toolbar=no,location=no,menubar=no`,h=window.open(t,s,a);return h.window.focus(),h},ws=()=>{window.location.reload(!0)},ks=t=>{t.length&&/[^0-9]+/.exec(t)},xs=t=>String(t).replace(/(^\s*|\s*$)/g,""),Ts=(t,e)=>{const n=10**(e||0);return Math.round(t*n)/n},Es=t=>typeof t=="string"?Number.format(t.replace(/,/g,"")):typeof t=="number"?t:null,hr=t=>{const e=Es(t);if(e===null)return 0;const o=new Intl.NumberFormat("en-US").format(e);return Number.isNaN(o)||Number.POSITIVE_INFINITY===o?null:o};function dr(t,e,o){if(we.get("DEBUG")&&!t){window.console&&console.log&&console.log("missing textarea for CharsRemaining() in ng.js");return}if(!t){console.warn("missing textarea for CharsRemaining() in ng.js");return}let n=o,s=e-t.value.length;s<0&&(t.value=t.value.substring(0,e),s=0),n||(n=document.getElementById(`${t.id}_chars_remaining`)),n.innerHTML=hr(s)}function Yr(t,e,o){dr(t,o);let n=e-t.value.replace(/<\/?(a|i(ns)?|b|u|em|strong).*?>/gi,"").length;n<0&&(n=0),document.getElementById(`${t.id}_chars_remaining_minus_html`).innerHTML=hr(n)}const Kr=(t,e,o)=>{o>0?Yr(document.getElementById(t),e,o):dr(document.getElementById(t),e),setTimeout(()=>{Kr(t,e,o)},1500)};function Os(t,e){for(let o=0,n=e.length;o<n;o++)if(t===e[o])return!0;return!1}function Ss(t,e){const o=g.inArray(t,e);return o>=0&&e.splice(o,1),e}const St=(t=>{const e="blackout-on",o="nodim",n="visibility";let a,h,u,p,T=!1,v=!0,m=null;const f=()=>(h||(h=t(".adunit")),h),d=()=>{f().css(n,"hidden")},b=()=>{f().css(n,"visible")},y=A=>{if(A.which===27)return St.hide(),_(),!1},_=()=>{v&&T?t("body").keydown(y):t("body").off("keydown",y)};return{autohide:!0,onClosed:null,init:()=>{u=t("#blackout"),p=t("#blackout_center"),blackout_hover=t("#blackout_hover"),t("#blackout-bg").click(()=>(we.get("ng_design",2012)!==2012&&St.hide(),!1));const w=p.html().trim();return w.length&&(m=w),St},load:(A,w,O)=>{let k=w;return(!u||!p)&&St.init(),A.detach(),p.append(A).loaded(()=>{typeof k=="function"?a=k(p,u):typeof k>"u"?k=A.height():a=k,O&&O()}),St},replace:(A,w,O)=>((!u||!p)&&St.init(),p.down().remove(),typeof w<"u"&&(a=w),St.load(A,w,O),St),restore:()=>((!u||!p)&&St.init(),m&&(p.html(m),a=p.down().height()),St),show:A=>{(!u||!p)&&St.init();const w=!!A,O=A?t.$(A):p.down();let k,S;return O&&setTimeout(()=>{if(a||(a=O.height()),a){S=Math.max(t("html").scrollTop(),t(window).scrollTop()),k=t(window).height();const R=t("#notification-bar");R.outerHeight()&&(k-=R.outerHeight()),a>k?p.css("margin-top",`${S}px`):p.css("margin-top",`${S+(k-a)/2}px`)}else t(O).addClass()},1),d(),u.addClass(e),u.show(),blackout_hover.show(),O&&w&&O.addClass(o),O&&O.show(),T=!0,v&&_(),t(document).trigger("NiGhtBox:on"),St},hide:A=>{const w=!!A;(!u||!p)&&St.init();const O=A?t.$(A):p.down();return b(),u.removeClass(e),u.hide(),blackout_hover.hide(),O&&w&&O.removeClass(o),T=!1,v&&_(),t(document).trigger("NiGhtBox:off"),St},toggle:A=>((!u||!p)&&St.init(),u.hasClass(e)?St.hide(A):St.show(A)),visible:()=>T,hideOnEsc:A=>(v=A,_(),St)}})(g),Jr=function(t,e){let o,n=[],s;const a=g(t);if(!a.length)throw"Form not found in NgFormValidator()";const h=m=>{n.push({name:m.name||m[0],msg:m.msg||m[m.length-1]})},u=m=>g.any(n,f=>m===f.name),p=(m,f,d)=>{const b=f.name||f[0],y=d.filter(`[name='${b}']`);let _,A,w,O;if(y.length===0)return!0;if(y.length===1?y.attr("type")==="checkbox"?_=y.filter(":checked").val():_=y.val():_=y.filter(":checked").first().val(),we!=null&&we.get("DEBUG")&&!y.exists()&&m!=="checked")throw`Required input does not exist: ${b}`;switch(m){case"require":A=!!(_!=null&&_.length);break;case"regex":A=!_||_.match(f.regex||f[1]);break;case"min_length":A=_&&_.length>=(f.length_requirement||f[1]);break;case"max_length":A=!_||_.length<=(f.length_requirement||f[1]);break;case"checked":A=!y.exists()||y.is(":checked");break;case"equals":A=!_||_===d.filter(`[name='${f.second_value||f[1]}']`).val();break;case"one_of":for(others=f,A=!!(_!=null&&_.length),w=1,O=others.length-1;w<O;++w)_=d.filter(`[name='${others[w]}']`).val(),A=A||!!(_!=null&&_.length);break;case"greater_than":A=_&&Number.parseInt(_,10)>Number.parseInt(f.min||f[1],10);break;default:throw`Unknown validation type: ${m}`}A||h(f)},T=m=>{if(m.depends&&!Array.isArray(m.depends))throw"'depends' property of validator must be an array";return!m.depends||!g.any(m.depends,f=>u(f))},v=()=>{s&&s()};this.validate=()=>{n=[],o=a.find("input:enabled, textarea:enabled, select:enabled"),o!=null&&o.length?g.each(e,(f,d)=>{const b=d.length;for(let y=0;y<b;++y)T(d[y])&&p(f,d[y],o)}):we.get("DEBUG")&&window.console&&console.log&&console.log("no inputs found");const m=n.length===0;return m||v(),m},this.getErrors=()=>n,this.isValid=()=>n.length===0,this.getErrorMessages=()=>n.map(m=>m.msg),this.getFailedInputs=()=>n.map(m=>m.name),this.sendFocusTo=m=>{if(typeof m>"u")o.filter(`[name='${n.pop().name}']`).focus();else{if(we.get("DEBUG")&&!o.filter(`[name='${m}']`).exists())throw`Cannot focus on this, as it does not exist: ${m}`;o.filter(`[name='${m}']`).focus()}},this.setCallback=m=>{s=m}};Jr.prototype.inform=function(){alert(this.getErrorMessages().join(`
`))};const eo=function(t){this._xml=t};eo.prototype={isValidDom:function(){var t;return this._is_valid_dom===void 0&&(this._is_valid_dom=!!((t=this._xml)!=null&&t.documentElement)),this._is_valid_dom},getXml:function(){return this._xml},getField:function(t){if(this.isValidDom()){const e=this._xml.documentElement.getElementsByTagName(t);if(e&&e.length===1&&e[0].firstChild)return e[0].firstChild.data}},hasField:function(t){if(this.isValidDom()){const e=this._xml.documentElement.getElementsByTagName(t);return e&&e.length===1&&e[0].firstChild}},STATUS_ERROR:0,STATUS_SUCCESS:1,STATUS_ERROR_SILENT:2,validate:function(t){const e=this.getField("status");if(!e&&e!==0)return alert("Server error.  Please wait a moment and try again."),t&&t(this),!1;switch(Number.parseInt(e,10)){case this.STATUS_SUCCESS:return!0;case this.STATUS_ERROR:return alert(`Error - ${this.getField("errormsg")}`),t&&t(this),!1;case this.STATUS_ERROR_SILENT:return!1}}};function to(){if(g("div.select select").off===void 0)return;const e=n=>{const s=g(n);s.prev().text(s.getSelected().text())},o=function(){e(this)};g("div.select select").off("change",o).on("change",o).off("keyup",o).on("keyup",o).off("keydown",o).on("keydown",o).Each(e)}g(t=>{const e=()=>{const u=p=>`<li><a href="${p.getLink()}"><img title="" alt="Ad Icon" src="${p.getImageUrl(70,70)}" width="70" height="39" /></a><div><div><div><a href="${p.getLink()}">${p.getTitle()}</a><span>${p.getDescription(100)}</span></div></div></div></li>`;if(window.cpmStar){const p=t("div#webfeature"),T=t('<ul class="centeredblocks webfeature"></ul>'),v=8;let m;for(m=v-1;m;--m)T.append(u(cpmStar)),cpmStar.nextAd();T.append(u(cpmStar)),p.append(T)}};t("div.podtop a.min").click(function(){if(t(this).hasClass("ignore"))return!1;const p=t(this).parents("div.podtop:first");return p.hasClass("minimized")||p.addClass("minimized"),!1}),t("div.podtop a.max").click(function(){if(t(this).hasClass("ignore"))return!1;const u=t(this).parents("div.podtop:first");return u.hasClass("minimized")&&u.removeClass("minimized"),!1}),t('input[type="reset"]').click(()=>confirm("Are you sure you want to reset this form?")),t('input[type="file"]').change(function(){t(this).setUploadVal()}),t("table.alternate tr:odd").addClass("alt"),we.get("is_ie")&&t("label").click(u=>{t(`#${u.closest("label").attr("for")}`).click(),u.preventDefault()}),(()=>{let u=[],p=!1,T=0;const v=f=>{u=Ss(f,u)},m=f=>!Os(f,u);t("#header_nav > dl").each(function(){this.my_dds=t(this).children("dd"),this.uniq=++T}).mouseenter(function(){const f=this.uniq,d=this.my_dds;return p=f,m(f)&&(u.push(f),currently_shown={dds:d,uniq:f},this.my_dds.slideDown(50,()=>{v(f),f!==p&&d.hide()})),!1}).mouseleave(function(){const f=this.uniq,d=this.my_dds;return p=!1,m(f)&&(u.push(f),this.my_dds.slideUp("fast",()=>{v(f),f===p&&d.show()})),!1})})(),t("#topsearch").submit(u=>{u.preventDefault();const p=t("#topsearch_text").val().replace("/"," "),T=`${we.get("search_urls")[t("#topsearch_type").getSelected().val()]}/${encodeURIComponent(p)}`;document.location=T});const o=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/);we.set("is_iphone_ipad_or_ipod",o);const n=t("#header_label_username");if(n.length){const u=t("#header_label_password"),p=t("#username"),T=t("#password"),v=t("#remember"),m=(d,b)=>{b.click(function(){t(this).hide(),d.focus()})},f=(d,b)=>{const y=()=>{d.val()?b.hide():b.show()};d.focus(()=>{b.hide()}).blur(y).blur(),setTimeout(y,100)};f(p,n),f(T,u),o&&(m(p,n),m(T,u),v.css("z-index","9999")),v.next("span").click(()=>{v.checked=!v.checked})}let s={},a=!0;const h=()=>{St.toggle(),a?(a=!1,t('div[id^="adcode_iframe_"]').each(function(){const u=t(this).attr("id"),p=t(this).html();s[u]=p,t(this).html("")})):(a=!0,t('div[id^="adcode_iframe_"]').each(function(){const u=t(this).attr("id"),p=s[u];t(this).html(p)}),s={})};t(".podtop").on("click",function(u){const p=t(u.closest("a"));if(p.length){if(p.hasClass("dim"))h();else if(p.hasClass("max"))t(this).removeClass("minimized");else if(p.hasClass("min"))p.addClass("minimized");else return;u.preventDefault()}}),(()=>{const u=t("#playlist_add"),p=u.exists();t(".pl-add, .icon-playlist").click(()=>{if(p)return u.toggle(),!1})})(),to(),e()});function Cs(t,e,o){return t.addEventListener?(t.addEventListener(e,o,!1),!0):t.attachEvent?(t.attachEvent(`on${e}`,o),!0):(console.log("Your browser does not support event listeners"),!1)}const Ns=(()=>{const t=f=>{const d=new URLSearchParams(f.serialize());d.remove("advanced"),window.location.href=`${f.attr("action")}?${d.toString()}`},e=(f,d,b)=>{f.field&&f.options.callbacks&&f.options.callbacks.field&&f.options.callbacks.field(b,f.field);for(const y in d)g(`[data-html="${y}"]`,b).text(d[y]),g(`[data-src="${y}"]`,b).attr("src",d[y]),g(`[data-href="${y}"]`,b).attr("href",d[y]),g(`[data-hidden="${y}"]`,b).val(d[y])};let o=null;const n=(f,d)=>(o&&o.removeClass("selected"),o=g(`#${d.item.id}`),o.addClass("selected"),!1),s=(f,d)=>{if(d.item.url)return window.location=d.item.url,!1;let b=d.item.text;if((b===void 0||!b.length)&&(b=d.item.title),b.length){field.val(b);const y=g(f.target).parent("form");y.length&&y.trigger("submit")}return!1},a=f=>{if(typeof f.prefix>"u"||f.prefix===null)return null;const d=f.prefix,b=g(`#${d}_after`),y=g(`#${d}_before`);return!b.exists()||!y.exists()?null:[b,y]},h=f=>{const d=a(f);d!==null&&(ngutils.forms.registerDateInput(d[0].attr("id")),ngutils.forms.registerDateInput(d[1].attr("id")))},u=f=>{if(we.get("ismobile")){h(f);return}const d=a(f);if(d===null)return;const b=d[0],y=d[1],_={dateFormat:"yy-mm-dd",minDate:we.get(`${f.prefix}_min_date`),maxDate:we.get(`${f.prefix}_max_date`),onSelect:(A,w)=>{const O=w.id.split("_"),k=O[O.length-1];let S;const R=new Date(A);k==="before"&&b.val().length?(S=new Date(b.val()),typeof S=="string"&&S.indexOf("Invalid")===0&&(S=new Date),S>=R&&(S=R,S.setDate(S.getDate()-1),S<new Date(w.settings.minDate)?b.val(""):b.val(g.datepicker.formatDate("yy-mm-dd",S)))):k==="after"&&y.val().length&&(S=new Date(y.val()),typeof S=="string"&&S.indexOf("Invalid")===0&&(S=new Date),R>=S&&(S=R,S.setDate(S.getDate()+1),S>new Date(w.settings.maxDate)?y.val(""):y.val(g.datepicker.formatDate("yy-mm-dd",S))))}};b.datepicker(_),y.datepicker(_)},p=f=>{var P,N,D;const d=f.field,b=f.form,y=f.suggestion_endpoint,_=f.template_id,A=f.getTemplate(),w=(B,F)=>{var G;return(G=f.options.callbacks)!=null&&G[B]?f.options.callbacks[B]:null},O=(B,F)=>{if(typeof F.template>"u"||typeof A[F.template]>"u")return console.error("missing template for item",F),g("<li>").appendTo(B);const G=w("omit");if(G!==null&&G(F))return B;const Y=A[F.template].clone();return typeof F.break<"u"&&F.break&&Y.addClass("ui-autocomplete-break"),Y.attr("id",F.id),e(f,F,Y),Y.appendTo(B)},k=(B,F)=>{var Y;let G;if((Y=f.options)!=null&&Y.search_params)if(typeof f.options.search_params=="function")G=f.options.search_params();else throw"Untested";else f.options.ignore_form!==!0?G=b.serializeArray():G=[{name:f.options.field_name?f.options.field_name:d[0].name,value:d[0].value}];if(f.options.data){if(G!==void 0&&!Array.isArray(G))throw"data must be an array at this point.";G=G.concat(f.options.data)}return f.options.additionalDataCallback&&typeof f.options.additionalDataCallback=="function"&&(G=G.concat(f.options.additionalDataCallback(f))),g.post(y,G,H=>{let ee=H,V,U=0;const q=[];if(!(ee.data!==void 0&&(ee=ee.data,ee===null))){for(V in ee.taglike_results)U++,q.push({template:"tags",text:ee.taglike_results[V],id:`${_}-${U}`});for(V in ee.terms)U++,q.push({template:"terms",text:ee.terms[V],id:`${_}-${U}`});for(V in ee.suggestions)V===0&&(ee.suggestions[V].break=!0),U++,ee.suggestions[V].id=`${_}-${U}`,ee.suggestions[V].template=`content-${ee.suggestions[V].content_type}`,q.push(ee.suggestions[V]);for(V in ee.more_links)V===0&&(ee.more_links[V].break=!0),U++,ee.more_links[V].id=`${_}-${U}`,ee.more_links[V].template="links",q.push(ee.more_links[V]);F(q)}}),!1};let S=null;(P=f.options.callbacks)!=null&&P.close&&(S=f.options.callbacks.close);const R=w("open");let l=n;(N=f.options.callbacks)!=null&&N.focus&&(l=f.options.callbacks.focus);let C=s;(D=f.options.callbacks)!=null&&D.select&&(C=f.options.callbacks.select);const M=w("response");f.field.autocomplete({delay:300,source:k,autoFocus:f.options.auto_focus||!1,open:function(B,F){g("#blackout").exists()&&g(this).data("ui-autocomplete").menu.element.css("z-index",g("#blackout").css("z-index")+5e3),R!==null&&R.call(this,B,F)},close:S,focus:l,select:C,response:M}).data("ui-autocomplete")._renderItem=O},T=f=>{const d=f.form,b=d.find('input[name="advanced"]'),y=d.find("a[data-toggle-advanced]"),_=d.find("div[data-advanced-options]");let A=we.get("is_advanced_search",!1);b.exists()&&_.exists()&&y.exists()&&y.click(()=>(A=!A,A?(_.show(),b.val(1)):(_.hide(),b.val(0)),!1)),d.submit(()=>(t(d),!1))},v=f=>{const d=f.form,b=d.find("nav");if(!d.exists()||!b.exists())return;const y=we.get(`${f.prefix}_current_nav`);y&&g(`a:contains(${y})`,b).addClass("current"),b.find("a").on("click",_=>{_.preventDefault();const A=new Zn(window.location.href).replaceParam("terms",d.find('input[name="terms"]').val());window.location.href=A.toString()})},m=function(){this.form=null,this.field=null,this.suggestion_endpoint=null,this.template=null,this.template_id=null,this.autocomplete=!0,this.DEFAULT_TEMPLATE="search_suggestion_template"};return m.prototype={getField:function(){return this.field},getTemplate:function(){if(this.template_id===null&&(this.template_id=this.DEFAULT_TEMPLATE),this.template===null||typeof this.template[this.template_id]>"u"){this.template[this.template_id]={};const f=g(g.trim(g(`#${this.template_id}`).html())),d=this;g('li[class^="ui-autocomplete-"]',f).each(function(){const b=g(this).attr("class").replace("ui-autocomplete-","");d.template[d.template_id][b]=g(this)});return}return this.template[this.template_id]},initialize:function(f,d,b,y,_){let A;this.template=this.template||{},this.autocomplete=typeof y>"u"?!0:y,this.options=_||{};let w;g.type(f)==="string"?(A=f.split("_"),w=g(`#${f}`)):(w=f,A=w.attr("id").split("_"));const O=w.parents("form");if(!O)throw"Can't find form for field.";return this.field=w,this.form=O,this.prefix=A[0],this.autocomplete&&(typeof d<"u"&&d!==null?this.suggestion_endpoint=d:this.suggestion_endpoint=O.attr("action"),typeof b<"u"&&b!==null&&(this.template_id=b),this.getTemplate(),p(this)),u(this),this.options.ignore_form===void 0||this.options.ignore_form!==!0?T(this):v(this),this}},m.init=(f,d,b,y,_)=>new m().initialize(f,d,b,y,_),{init:m.init}})(),io={body:void 0,record:!1,placeholder:"Enter text here...",formats:["bold","italic","underline","link"],external_gifs:!1,max_lines:0,max_text:8192,min_text:1,image_upload_paths:[],max_images:0,max_embeds:0,embed_allowlist:void 0,max_image_width:764,max_image_height:void 0,max_image_size:1e5,max_gif_size:5e6,strip_whitespace:!0,count_urls:!0,posting_to_userpage:!1,allow_animated_gifs:!1,tabindex:!1,new_quill_event_name:"new_ngquill"},$s=t=>{let e=t||{};typeof e=="string"&&(e=JSON.parse(e));const o=new Set(Object.keys(io)),n={...io};for(const s of Object.keys(e))o.has(s)&&(n[s]=e[s]);if(typeof(e==null?void 0:e.embed_allowlist)=="string")try{n.embed_allowlist=JSON.parse(e.embed_allowlist)}catch(s){console.error("Failed to parse embed_allowlist"),console.error(s),n.embed_allowlist=null}return typeof(e==null?void 0:e.embed_allowlist)>"u"&&(n.max_embeds=0),n},Ps=["bold","italic","underline","strike"],Is=["blockquote","code-block"],Ls=["divider","image","link","video","embed"];class Ds{constructor(e,o){it(this,Gt,[]);it(this,Yt,[]);it(this,cn);it(this,fn,[]);it(this,hn,[]);it(this,dn,[]);it(this,pn,[]);Me(this,Yt,e),Me(this,cn,o),this.initialize()}initialize(){Me(this,Gt,[]),this.initializeStyle(),this.initializeBlocks(),this.initializeLayout(),this.initializeHeaders(),this.initializeEmbeds()}initializeStyle(){const e=ve(this,Yt).filter(o=>Ps.includes(o));e.length&&(Me(this,fn,e),ve(this,Gt).push(ve(this,fn)))}initializeBlocks(){const e=ve(this,Yt).filter(o=>Is.includes(o));e.length&&(Me(this,hn,e),ve(this,Gt).push(ve(this,hn)))}initializeLayout(){const e=[];if(ve(this,Yt).includes("align")&&e.push({align:[]}),ve(this,Yt).includes("list"))for(const o of["ordered","bullet"])e.push({list:o});e.length&&(Me(this,dn,e),ve(this,Gt).push(ve(this,dn)))}initializeHeaders(){var n;if(!ve(this,Yt).includes("header"))return;const e=((n=ve(this,cn))==null?void 0:n.headers)||2,o=[];for(const s of Array.from({length:e},(a,h)=>h+1))o.push({header:s});ve(this,Gt).push(o)}initializeEmbeds(){const e=ve(this,Yt).filter(o=>Ls.includes(o));e.length&&(Me(this,pn,e),ve(this,Gt).push(ve(this,pn)))}hasFormat(e){return ve(this,Yt).includes(e)}get buttonCount(){return ve(this,Gt).reduce((e,o)=>e+o.length,0)}get all(){return ve(this,Gt).reduce((e,o)=>e.concat(o),[])}get container(){return ve(this,Gt)}}Gt=new WeakMap,Yt=new WeakMap,cn=new WeakMap,fn=new WeakMap,hn=new WeakMap,dn=new WeakMap,pn=new WeakMap;var Dn={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var Ms=Dn.exports,no;function Rs(){return no||(no=1,function(t,e){(function(n,s){t.exports=s()})(typeof self<"u"?self:Ms,function(){return function(o){var n={};function s(a){if(n[a])return n[a].exports;var h=n[a]={i:a,l:!1,exports:{}};return o[a].call(h.exports,h,h.exports,s),h.l=!0,h.exports}return s.m=o,s.c=n,s.d=function(a,h,u){s.o(a,h)||Object.defineProperty(a,h,{configurable:!1,enumerable:!0,get:u})},s.n=function(a){var h=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(h,"a",h),h},s.o=function(a,h){return Object.prototype.hasOwnProperty.call(a,h)},s.p="",s(s.s=109)}([function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(17),h=s(18),u=s(19),p=s(45),T=s(46),v=s(47),m=s(48),f=s(49),d=s(12),b=s(32),y=s(33),_=s(31),A=s(1),w={Scope:A.Scope,create:A.create,find:A.find,query:A.query,register:A.register,Container:a.default,Format:h.default,Leaf:u.default,Embed:m.default,Scroll:p.default,Block:v.default,Inline:T.default,Text:f.default,Attributor:{Attribute:d.default,Class:b.default,Style:y.default,Store:_.default}};n.default=w},function(o,n,s){var a=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var O in w)w.hasOwnProperty(O)&&(A[O]=w[O])};return function(A,w){_(A,w);function O(){this.constructor=A}A.prototype=w===null?Object.create(w):(O.prototype=w.prototype,new O)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=function(_){a(A,_);function A(w){var O=this;return w="[Parchment] "+w,O=_.call(this,w)||this,O.message=w,O.name=O.constructor.name,O}return A}(Error);n.ParchmentError=h;var u={},p={},T={},v={};n.DATA_KEY="__blot";var m;(function(_){_[_.TYPE=3]="TYPE",_[_.LEVEL=12]="LEVEL",_[_.ATTRIBUTE=13]="ATTRIBUTE",_[_.BLOT=14]="BLOT",_[_.INLINE=7]="INLINE",_[_.BLOCK=11]="BLOCK",_[_.BLOCK_BLOT=10]="BLOCK_BLOT",_[_.INLINE_BLOT=6]="INLINE_BLOT",_[_.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",_[_.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",_[_.ANY=15]="ANY"})(m=n.Scope||(n.Scope={}));function f(_,A){var w=b(_);if(w==null)throw new h("Unable to create "+_+" blot");var O=w,k=_ instanceof Node||_.nodeType===Node.TEXT_NODE?_:O.create(A);return new O(k,A)}n.create=f;function d(_,A){return A===void 0&&(A=!1),_==null?null:_[n.DATA_KEY]!=null?_[n.DATA_KEY].blot:A?d(_.parentNode,A):null}n.find=d;function b(_,A){A===void 0&&(A=m.ANY);var w;if(typeof _=="string")w=v[_]||u[_];else if(_ instanceof Text||_.nodeType===Node.TEXT_NODE)w=v.text;else if(typeof _=="number")_&m.LEVEL&m.BLOCK?w=v.block:_&m.LEVEL&m.INLINE&&(w=v.inline);else if(_ instanceof HTMLElement){var O=(_.getAttribute("class")||"").split(/\s+/);for(var k in O)if(w=p[O[k]],w)break;w=w||T[_.tagName]}return w==null?null:A&m.LEVEL&w.scope&&A&m.TYPE&w.scope?w:null}n.query=b;function y(){for(var _=[],A=0;A<arguments.length;A++)_[A]=arguments[A];if(_.length>1)return _.map(function(k){return y(k)});var w=_[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new h("Invalid definition");if(w.blotName==="abstract")throw new h("Cannot register abstract class");if(v[w.blotName||w.attrName]=w,typeof w.keyName=="string")u[w.keyName]=w;else if(w.className!=null&&(p[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(k){return k.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var O=Array.isArray(w.tagName)?w.tagName:[w.tagName];O.forEach(function(k){(T[k]==null||w.className==null)&&(T[k]=w)})}return w}n.register=y},function(o,n,s){var a=s(51),h=s(11),u=s(3),p=s(20),T="\0",v=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};v.prototype.insert=function(m,f){var d={};return m.length===0?this:(d.insert=m,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d))},v.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},v.prototype.retain=function(m,f){if(m<=0)return this;var d={retain:m};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d)},v.prototype.push=function(m){var f=this.ops.length,d=this.ops[f-1];if(m=u(!0,{},m),typeof d=="object"){if(typeof m.delete=="number"&&typeof d.delete=="number")return this.ops[f-1]={delete:d.delete+m.delete},this;if(typeof d.delete=="number"&&m.insert!=null&&(f-=1,d=this.ops[f-1],typeof d!="object"))return this.ops.unshift(m),this;if(h(m.attributes,d.attributes)){if(typeof m.insert=="string"&&typeof d.insert=="string")return this.ops[f-1]={insert:d.insert+m.insert},typeof m.attributes=="object"&&(this.ops[f-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof d.retain=="number")return this.ops[f-1]={retain:d.retain+m.retain},typeof m.attributes=="object"&&(this.ops[f-1].attributes=m.attributes),this}}return f===this.ops.length?this.ops.push(m):this.ops.splice(f,0,m),this},v.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},v.prototype.filter=function(m){return this.ops.filter(m)},v.prototype.forEach=function(m){this.ops.forEach(m)},v.prototype.map=function(m){return this.ops.map(m)},v.prototype.partition=function(m){var f=[],d=[];return this.forEach(function(b){var y=m(b)?f:d;y.push(b)}),[f,d]},v.prototype.reduce=function(m,f){return this.ops.reduce(m,f)},v.prototype.changeLength=function(){return this.reduce(function(m,f){return f.insert?m+p.length(f):f.delete?m-f.delete:m},0)},v.prototype.length=function(){return this.reduce(function(m,f){return m+p.length(f)},0)},v.prototype.slice=function(m,f){m=m||0,typeof f!="number"&&(f=1/0);for(var d=[],b=p.iterator(this.ops),y=0;y<f&&b.hasNext();){var _;y<m?_=b.next(m-y):(_=b.next(f-y),d.push(_)),y+=p.length(_)}return new v(d)},v.prototype.compose=function(m){var f=p.iterator(this.ops),d=p.iterator(m.ops),b=[],y=d.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var _=y.retain;f.peekType()==="insert"&&f.peekLength()<=_;)_-=f.peekLength(),b.push(f.next());y.retain-_>0&&d.next(y.retain-_)}for(var A=new v(b);f.hasNext()||d.hasNext();)if(d.peekType()==="insert")A.push(d.next());else if(f.peekType()==="delete")A.push(f.next());else{var w=Math.min(f.peekLength(),d.peekLength()),O=f.next(w),k=d.next(w);if(typeof k.retain=="number"){var S={};typeof O.retain=="number"?S.retain=w:S.insert=O.insert;var R=p.attributes.compose(O.attributes,k.attributes,typeof O.retain=="number");if(R&&(S.attributes=R),A.push(S),!d.hasNext()&&h(A.ops[A.ops.length-1],S)){var l=new v(f.rest());return A.concat(l).chop()}}else typeof k.delete=="number"&&typeof O.retain=="number"&&A.push(k)}return A.chop()},v.prototype.concat=function(m){var f=new v(this.ops.slice());return m.ops.length>0&&(f.push(m.ops[0]),f.ops=f.ops.concat(m.ops.slice(1))),f},v.prototype.diff=function(m,f){if(this.ops===m.ops)return new v;var d=[this,m].map(function(w){return w.map(function(O){if(O.insert!=null)return typeof O.insert=="string"?O.insert:T;var k=w===m?"on":"with";throw new Error("diff() called "+k+" non-document")}).join("")}),b=new v,y=a(d[0],d[1],f),_=p.iterator(this.ops),A=p.iterator(m.ops);return y.forEach(function(w){for(var O=w[1].length;O>0;){var k=0;switch(w[0]){case a.INSERT:k=Math.min(A.peekLength(),O),b.push(A.next(k));break;case a.DELETE:k=Math.min(O,_.peekLength()),_.next(k),b.delete(k);break;case a.EQUAL:k=Math.min(_.peekLength(),A.peekLength(),O);var S=_.next(k),R=A.next(k);h(S.insert,R.insert)?b.retain(k,p.attributes.diff(S.attributes,R.attributes)):b.push(R).delete(k);break}O-=k}}),b.chop()},v.prototype.eachLine=function(m,f){f=f||`
`;for(var d=p.iterator(this.ops),b=new v,y=0;d.hasNext();){if(d.peekType()!=="insert")return;var _=d.peek(),A=p.length(_)-d.peekLength(),w=typeof _.insert=="string"?_.insert.indexOf(f,A)-A:-1;if(w<0)b.push(d.next());else if(w>0)b.push(d.next(w));else{if(m(b,d.next(1).attributes||{},y)===!1)return;y+=1,b=new v}}b.length()>0&&m(b,{},y)},v.prototype.transform=function(m,f){if(f=!!f,typeof m=="number")return this.transformPosition(m,f);for(var d=p.iterator(this.ops),b=p.iterator(m.ops),y=new v;d.hasNext()||b.hasNext();)if(d.peekType()==="insert"&&(f||b.peekType()!=="insert"))y.retain(p.length(d.next()));else if(b.peekType()==="insert")y.push(b.next());else{var _=Math.min(d.peekLength(),b.peekLength()),A=d.next(_),w=b.next(_);if(A.delete)continue;w.delete?y.push(w):y.retain(_,p.attributes.transform(A.attributes,w.attributes,f))}return y.chop()},v.prototype.transformPosition=function(m,f){f=!!f;for(var d=p.iterator(this.ops),b=0;d.hasNext()&&b<=m;){var y=d.peekLength(),_=d.peekType();if(d.next(),_==="delete"){m-=Math.min(y,m-b);continue}else _==="insert"&&(b<m||!f)&&(m+=y);b+=y}return m},o.exports=v},function(o,n){var s=Object.prototype.hasOwnProperty,a=Object.prototype.toString,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,p=function(d){return typeof Array.isArray=="function"?Array.isArray(d):a.call(d)==="[object Array]"},T=function(d){if(!d||a.call(d)!=="[object Object]")return!1;var b=s.call(d,"constructor"),y=d.constructor&&d.constructor.prototype&&s.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!b&&!y)return!1;var _;for(_ in d);return typeof _>"u"||s.call(d,_)},v=function(d,b){h&&b.name==="__proto__"?h(d,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):d[b.name]=b.newValue},m=function(d,b){if(b==="__proto__")if(s.call(d,b)){if(u)return u(d,b).value}else return;return d[b]};o.exports=function f(){var d,b,y,_,A,w,O=arguments[0],k=1,S=arguments.length,R=!1;for(typeof O=="boolean"&&(R=O,O=arguments[1]||{},k=2),(O==null||typeof O!="object"&&typeof O!="function")&&(O={});k<S;++k)if(d=arguments[k],d!=null)for(b in d)y=m(O,b),_=m(d,b),O!==_&&(R&&_&&(T(_)||(A=p(_)))?(A?(A=!1,w=y&&p(y)?y:[]):w=y&&T(y)?y:{},v(O,{name:b,newValue:f(R,w,_)})):typeof _<"u"&&v(O,{name:b,newValue:_}));return O}},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var a=function(){function N(D,B){for(var F=0;F<B.length;F++){var G=B[F];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,B,F){return B&&N(D.prototype,B),F&&N(D,F),D}}(),h=function N(D,B,F){D===null&&(D=Function.prototype);var G=Object.getOwnPropertyDescriptor(D,B);if(G===void 0){var Y=Object.getPrototypeOf(D);return Y===null?void 0:N(Y,B,F)}else{if("value"in G)return G.value;var H=G.get;return H===void 0?void 0:H.call(F)}},u=s(3),p=O(u),T=s(2),v=O(T),m=s(0),f=O(m),d=s(16),b=O(d),y=s(6),_=O(y),A=s(7),w=O(A);function O(N){return N&&N.__esModule?N:{default:N}}function k(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function S(N,D){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:N}function R(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);N.prototype=Object.create(D&&D.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(N,D):N.__proto__=D)}var l=1,C=function(N){R(D,N);function D(){return k(this,D),S(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return a(D,[{key:"attach",value:function(){h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new v.default().insert(this.value(),(0,p.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(F,G){var Y=f.default.query(F,f.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,G)}},{key:"formatAt",value:function(F,G,Y,H){this.format(Y,H)}},{key:"insertAt",value:function(F,G,Y){if(typeof G=="string"&&G.endsWith(`
`)){var H=f.default.create(M.blotName);this.parent.insertBefore(H,F===0?this:this.next),H.insertAt(0,G.slice(0,-1))}else h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,F,G,Y)}}]),D}(f.default.Embed);C.scope=f.default.Scope.BLOCK_BLOT;var M=function(N){R(D,N);function D(B){k(this,D);var F=S(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,B));return F.cache={},F}return a(D,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(F,G){return G.length()===0?F:F.insert(G.value(),P(G))},new v.default).insert(`
`,P(this))),this.cache.delta}},{key:"deleteAt",value:function(F,G){h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,F,G),this.cache={}}},{key:"formatAt",value:function(F,G,Y,H){G<=0||(f.default.query(Y,f.default.Scope.BLOCK)?F+G===this.length()&&this.format(Y,H):h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,F,Math.min(G,this.length()-F-1),Y,H),this.cache={})}},{key:"insertAt",value:function(F,G,Y){if(Y!=null)return h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,F,G,Y);if(G.length!==0){var H=G.split(`
`),ee=H.shift();ee.length>0&&(F<this.length()-1||this.children.tail==null?h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,Math.min(F,this.length()-1),ee):this.children.tail.insertAt(this.children.tail.length(),ee),this.cache={});var V=this;H.reduce(function(U,q){return V=V.split(U,!0),V.insertAt(0,q),q.length},F+ee.length)}}},{key:"insertBefore",value:function(F,G){var Y=this.children.head;h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,F,G),Y instanceof b.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"length",this).call(this)+l),this.cache.length}},{key:"moveChildren",value:function(F,G){h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"moveChildren",this).call(this,F,G),this.cache={}}},{key:"optimize",value:function(F){h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,F),this.cache={}}},{key:"path",value:function(F){return h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,F,!0)}},{key:"removeChild",value:function(F){h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"removeChild",this).call(this,F),this.cache={}}},{key:"split",value:function(F){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G&&(F===0||F>=this.length()-l)){var Y=this.clone();return F===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var H=h(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"split",this).call(this,F,G);return this.cache={},H}}}]),D}(f.default.Block);M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[_.default,f.default.Embed,w.default];function P(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return N==null||(typeof N.formats=="function"&&(D=(0,p.default)(D,N.formats())),N.parent==null||N.parent.blotName=="scroll"||N.parent.statics.scope!==N.statics.scope)?D:P(N.parent,D)}n.bubbleFormats=P,n.BlockEmbed=C,n.default=M},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},h=function(){function V(U,q){var z=[],X=!0,re=!1,J=void 0;try{for(var W=U[Symbol.iterator](),te;!(X=(te=W.next()).done)&&(z.push(te.value),!(q&&z.length===q));X=!0);}catch(se){re=!0,J=se}finally{try{!X&&W.return&&W.return()}finally{if(re)throw J}}return z}return function(U,q){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return V(U,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function V(U,q){for(var z=0;z<q.length;z++){var X=q[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(U,X.key,X)}}return function(U,q,z){return q&&V(U.prototype,q),z&&V(U,z),U}}();s(50);var p=s(2),T=P(p),v=s(14),m=P(v),f=s(8),d=P(f),b=s(9),y=P(b),_=s(0),A=P(_),w=s(15),O=P(w),k=s(3),S=P(k),R=s(10),l=P(R),C=s(34),M=P(C);function P(V){return V&&V.__esModule?V:{default:V}}function N(V,U,q){return U in V?Object.defineProperty(V,U,{value:q,enumerable:!0,configurable:!0,writable:!0}):V[U]=q,V}function D(V,U){if(!(V instanceof U))throw new TypeError("Cannot call a class as a function")}var B=(0,l.default)("quill"),F=function(){u(V,null,[{key:"debug",value:function(q){q===!0&&(q="log"),l.default.level(q)}},{key:"find",value:function(q){return q.__quill||A.default.find(q)}},{key:"import",value:function(q){return this.imports[q]==null&&B.error("Cannot import "+q+". Are you sure it was registered?"),this.imports[q]}},{key:"register",value:function(q,z){var X=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof q!="string"){var J=q.attrName||q.blotName;typeof J=="string"?this.register("formats/"+J,q,z):Object.keys(q).forEach(function(W){X.register(W,q[W],z)})}else this.imports[q]!=null&&!re&&B.warn("Overwriting "+q+" with",z),this.imports[q]=z,(q.startsWith("blots/")||q.startsWith("formats/"))&&z.blotName!=="abstract"?A.default.register(z):q.startsWith("modules")&&typeof z.register=="function"&&z.register()}}]);function V(U){var q=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(this,V),this.options=G(U,z),this.container=this.options.container,this.container==null)return B.error("Invalid Quill container",U);this.options.debug&&V.debug(this.options.debug);var X=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=A.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m.default(this.scroll),this.selection=new O.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(J){J===d.default.events.TEXT_CHANGE&&q.root.classList.toggle("ql-blank",q.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(J,W){var te=q.selection.lastRange,se=te&&te.length===0?te.index:void 0;Y.call(q,function(){return q.editor.update(null,W,se)},J)});var re=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+X+"<p><br></p></div>");this.setContents(re),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return u(V,[{key:"addContainer",value:function(q){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof q=="string"){var X=q;q=document.createElement("div"),q.classList.add(X)}return this.container.insertBefore(q,z),q}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(q,z,X){var re=this,J=H(q,z,X),W=h(J,4);return q=W[0],z=W[1],X=W[3],Y.call(this,function(){return re.editor.deleteText(q,z)},X,q,-1*z)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(q),this.container.classList.toggle("ql-disabled",!q)}},{key:"focus",value:function(){var q=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=q,this.scrollIntoView()}},{key:"format",value:function(q,z){var X=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return Y.call(this,function(){var J=X.getSelection(!0),W=new T.default;if(J==null)return W;if(A.default.query(q,A.default.Scope.BLOCK))W=X.editor.formatLine(J.index,J.length,N({},q,z));else{if(J.length===0)return X.selection.format(q,z),W;W=X.editor.formatText(J.index,J.length,N({},q,z))}return X.setSelection(J,d.default.sources.SILENT),W},re)}},{key:"formatLine",value:function(q,z,X,re,J){var W=this,te=void 0,se=H(q,z,X,re,J),oe=h(se,4);return q=oe[0],z=oe[1],te=oe[2],J=oe[3],Y.call(this,function(){return W.editor.formatLine(q,z,te)},J,q,0)}},{key:"formatText",value:function(q,z,X,re,J){var W=this,te=void 0,se=H(q,z,X,re,J),oe=h(se,4);return q=oe[0],z=oe[1],te=oe[2],J=oe[3],Y.call(this,function(){return W.editor.formatText(q,z,te)},J,q,0)}},{key:"getBounds",value:function(q){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,X=void 0;typeof q=="number"?X=this.selection.getBounds(q,z):X=this.selection.getBounds(q.index,q.length);var re=this.container.getBoundingClientRect();return{bottom:X.bottom-re.top,height:X.height,left:X.left-re.left,right:X.right-re.left,top:X.top-re.top,width:X.width}}},{key:"getContents",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,X=H(q,z),re=h(X,2);return q=re[0],z=re[1],this.editor.getContents(q,z)}},{key:"getFormat",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof q=="number"?this.editor.getFormat(q,z):this.editor.getFormat(q.index,q.length)}},{key:"getIndex",value:function(q){return q.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(q){return this.scroll.leaf(q)}},{key:"getLine",value:function(q){return this.scroll.line(q)}},{key:"getLines",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof q!="number"?this.scroll.lines(q.index,q.length):this.scroll.lines(q,z)}},{key:"getModule",value:function(q){return this.theme.modules[q]}},{key:"getSelection",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return q&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-q,X=H(q,z),re=h(X,2);return q=re[0],z=re[1],this.editor.getText(q,z)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(q,z,X){var re=this,J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:V.sources.API;return Y.call(this,function(){return re.editor.insertEmbed(q,z,X)},J,q)}},{key:"insertText",value:function(q,z,X,re,J){var W=this,te=void 0,se=H(q,0,X,re,J),oe=h(se,4);return q=oe[0],te=oe[2],J=oe[3],Y.call(this,function(){return W.editor.insertText(q,z,te)},J,q,z.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(q,z,X){this.clipboard.dangerouslyPasteHTML(q,z,X)}},{key:"removeFormat",value:function(q,z,X){var re=this,J=H(q,z,X),W=h(J,4);return q=W[0],z=W[1],X=W[3],Y.call(this,function(){return re.editor.removeFormat(q,z)},X,q)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(q){var z=this,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return Y.call(this,function(){q=new T.default(q);var re=z.getLength(),J=z.editor.deleteText(0,re),W=z.editor.applyDelta(q),te=W.ops[W.ops.length-1];te!=null&&typeof te.insert=="string"&&te.insert[te.insert.length-1]===`
`&&(z.editor.deleteText(z.getLength()-1,1),W.delete(1));var se=J.compose(W);return se},X)}},{key:"setSelection",value:function(q,z,X){if(q==null)this.selection.setRange(null,z||V.sources.API);else{var re=H(q,z,X),J=h(re,4);q=J[0],z=J[1],X=J[3],this.selection.setRange(new w.Range(q,z),X),X!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(q){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,X=new T.default().insert(q);return this.setContents(X,z)}},{key:"update",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,z=this.scroll.update(q);return this.selection.update(q),z}},{key:"updateContents",value:function(q){var z=this,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return Y.call(this,function(){return q=new T.default(q),z.editor.applyDelta(q,X)},X,!0)}}]),V}();F.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},F.events=d.default.events,F.sources=d.default.sources,F.version="1.3.7",F.imports={delta:T.default,parchment:A.default,"core/module":y.default,"core/theme":M.default};function G(V,U){if(U=(0,S.default)(!0,{container:V,modules:{clipboard:!0,keyboard:!0,history:!0}},U),!U.theme||U.theme===F.DEFAULTS.theme)U.theme=M.default;else if(U.theme=F.import("themes/"+U.theme),U.theme==null)throw new Error("Invalid theme "+U.theme+". Did you register it?");var q=(0,S.default)(!0,{},U.theme.DEFAULTS);[q,U].forEach(function(re){re.modules=re.modules||{},Object.keys(re.modules).forEach(function(J){re.modules[J]===!0&&(re.modules[J]={})})});var z=Object.keys(q.modules).concat(Object.keys(U.modules)),X=z.reduce(function(re,J){var W=F.import("modules/"+J);return W==null?B.error("Cannot load "+J+" module. Are you sure you registered it?"):re[J]=W.DEFAULTS||{},re},{});return U.modules!=null&&U.modules.toolbar&&U.modules.toolbar.constructor!==Object&&(U.modules.toolbar={container:U.modules.toolbar}),U=(0,S.default)(!0,{},F.DEFAULTS,{modules:X},q,U),["bounds","container","scrollingContainer"].forEach(function(re){typeof U[re]=="string"&&(U[re]=document.querySelector(U[re]))}),U.modules=Object.keys(U.modules).reduce(function(re,J){return U.modules[J]&&(re[J]=U.modules[J]),re},{}),U}function Y(V,U,q,z){if(this.options.strict&&!this.isEnabled()&&U===d.default.sources.USER)return new T.default;var X=q==null?null:this.getSelection(),re=this.editor.delta,J=V();if(X!=null&&(q===!0&&(q=X.index),z==null?X=ee(X,J,U):z!==0&&(X=ee(X,q,z,U)),this.setSelection(X,d.default.sources.SILENT)),J.length()>0){var W,te=[d.default.events.TEXT_CHANGE,J,re,U];if((W=this.emitter).emit.apply(W,[d.default.events.EDITOR_CHANGE].concat(te)),U!==d.default.sources.SILENT){var se;(se=this.emitter).emit.apply(se,te)}}return J}function H(V,U,q,z,X){var re={};return typeof V.index=="number"&&typeof V.length=="number"?typeof U!="number"?(X=z,z=q,q=U,U=V.length,V=V.index):(U=V.length,V=V.index):typeof U!="number"&&(X=z,z=q,q=U,U=0),(typeof q>"u"?"undefined":a(q))==="object"?(re=q,X=z):typeof q=="string"&&(z!=null?re[q]=z:X=q),X=X||d.default.sources.API,[V,U,re,X]}function ee(V,U,q,z){if(V==null)return null;var X=void 0,re=void 0;if(U instanceof T.default){var J=[V.index,V.index+V.length].map(function(oe){return U.transformPosition(oe,z!==d.default.sources.USER)}),W=h(J,2);X=W[0],re=W[1]}else{var te=[V.index,V.index+V.length].map(function(oe){return oe<U||oe===U&&z===d.default.sources.USER?oe:q>=0?oe+q:Math.max(U,oe+q)}),se=h(te,2);X=se[0],re=se[1]}return new w.Range(X,re-X)}n.expandConfig=G,n.overload=H,n.default=F},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function _(A,w){for(var O=0;O<w.length;O++){var k=w[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,w,O){return w&&_(A.prototype,w),O&&_(A,O),A}}(),h=function _(A,w,O){A===null&&(A=Function.prototype);var k=Object.getOwnPropertyDescriptor(A,w);if(k===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:_(S,w,O)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(O)}},u=s(7),p=m(u),T=s(0),v=m(T);function m(_){return _&&_.__esModule?_:{default:_}}function f(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function d(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function b(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var y=function(_){b(A,_);function A(){return f(this,A),d(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"formatAt",value:function(O,k,S,R){if(A.compare(this.statics.blotName,S)<0&&v.default.query(S,v.default.Scope.BLOT)){var l=this.isolate(O,k);R&&l.wrap(S,R)}else h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,O,k,S,R)}},{key:"optimize",value:function(O){if(h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,O),this.parent instanceof A&&A.compare(this.statics.blotName,this.parent.statics.blotName)>0){var k=this.parent.isolate(this.offset(),this.length());this.moveChildren(k),k.wrap(this)}}}],[{key:"compare",value:function(O,k){var S=A.order.indexOf(O),R=A.order.indexOf(k);return S>=0||R>=0?S-R:O===k?0:O<k?-1:1}}]),A}(v.default.Inline);y.allowedChildren=[y,v.default.Embed,p.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(0),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function T(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function v(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var m=function(f){v(d,f);function d(){return p(this,d),T(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(h.default.Text);n.default=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function w(O,k){for(var S=0;S<k.length;S++){var R=k[S];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,k,S){return k&&w(O.prototype,k),S&&w(O,S),O}}(),h=function w(O,k,S){O===null&&(O=Function.prototype);var R=Object.getOwnPropertyDescriptor(O,k);if(R===void 0){var l=Object.getPrototypeOf(O);return l===null?void 0:w(l,k,S)}else{if("value"in R)return R.value;var C=R.get;return C===void 0?void 0:C.call(S)}},u=s(54),p=m(u),T=s(10),v=m(T);function m(w){return w&&w.__esModule?w:{default:w}}function f(w,O){if(!(w instanceof O))throw new TypeError("Cannot call a class as a function")}function d(w,O){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:w}function b(w,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);w.prototype=Object.create(O&&O.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(w,O):w.__proto__=O)}var y=(0,v.default)("quill:events"),_=["selectionchange","mousedown","mouseup","click"];_.forEach(function(w){document.addEventListener(w,function(){for(var O=arguments.length,k=Array(O),S=0;S<O;S++)k[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(R){if(R.__quill&&R.__quill.emitter){var l;(l=R.__quill.emitter).handleDOM.apply(l,k)}})})});var A=function(w){b(O,w);function O(){f(this,O);var k=d(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return k.listeners={},k.on("error",y.error),k}return a(O,[{key:"emit",value:function(){y.log.apply(y,arguments),h(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var R=arguments.length,l=Array(R>1?R-1:0),C=1;C<R;C++)l[C-1]=arguments[C];(this.listeners[S.type]||[]).forEach(function(M){var P=M.node,N=M.handler;(S.target===P||P.contains(S.target))&&N.apply(void 0,[S].concat(l))})}},{key:"listenDOM",value:function(S,R,l){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:R,handler:l})}}]),O}(p.default);A.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},A.sources={API:"api",SILENT:"silent",USER:"user"},n.default=A},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});function a(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}var h=function u(p){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,u),this.quill=p,this.options=T};h.DEFAULTS={},n.default=h},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=["error","warn","log","info"],h="warn";function u(T){if(a.indexOf(T)<=a.indexOf(h)){for(var v,m=arguments.length,f=Array(m>1?m-1:0),d=1;d<m;d++)f[d-1]=arguments[d];(v=console)[T].apply(v,f)}}function p(T){return a.reduce(function(v,m){return v[m]=u.bind(console,m,T),v},{})}u.level=p.level=function(T){h=T},n.default=p},function(o,n,s){var a=Array.prototype.slice,h=s(52),u=s(53),p=o.exports=function(f,d,b){return b||(b={}),f===d?!0:f instanceof Date&&d instanceof Date?f.getTime()===d.getTime():!f||!d||typeof f!="object"&&typeof d!="object"?b.strict?f===d:f==d:m(f,d,b)};function T(f){return f==null}function v(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function m(f,d,b){var y,_;if(T(f)||T(d)||f.prototype!==d.prototype)return!1;if(u(f))return u(d)?(f=a.call(f),d=a.call(d),p(f,d,b)):!1;if(v(f)){if(!v(d)||f.length!==d.length)return!1;for(y=0;y<f.length;y++)if(f[y]!==d[y])return!1;return!0}try{var A=h(f),w=h(d)}catch{return!1}if(A.length!=w.length)return!1;for(A.sort(),w.sort(),y=A.length-1;y>=0;y--)if(A[y]!=w[y])return!1;for(y=A.length-1;y>=0;y--)if(_=A[y],!p(f[_],d[_],b))return!1;return typeof f==typeof d}},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(1),h=function(){function u(p,T,v){v===void 0&&(v={}),this.attrName=p,this.keyName=T;var m=a.Scope.TYPE&a.Scope.ATTRIBUTE;v.scope!=null?this.scope=v.scope&a.Scope.LEVEL|m:this.scope=a.Scope.ATTRIBUTE,v.whitelist!=null&&(this.whitelist=v.whitelist)}return u.keys=function(p){return[].map.call(p.attributes,function(T){return T.name})},u.prototype.add=function(p,T){return this.canAdd(p,T)?(p.setAttribute(this.keyName,T),!0):!1},u.prototype.canAdd=function(p,T){var v=a.query(p,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return v==null?!1:this.whitelist==null?!0:typeof T=="string"?this.whitelist.indexOf(T.replace(/["']/g,""))>-1:this.whitelist.indexOf(T)>-1},u.prototype.remove=function(p){p.removeAttribute(this.keyName)},u.prototype.value=function(p){var T=p.getAttribute(this.keyName);return this.canAdd(p,T)&&T?T:""},u}();n.default=h},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var a=function(){function C(M,P){var N=[],D=!0,B=!1,F=void 0;try{for(var G=M[Symbol.iterator](),Y;!(D=(Y=G.next()).done)&&(N.push(Y.value),!(P&&N.length===P));D=!0);}catch(H){B=!0,F=H}finally{try{!D&&G.return&&G.return()}finally{if(B)throw F}}return N}return function(M,P){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return C(M,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function C(M,P){for(var N=0;N<P.length;N++){var D=P[N];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(M,D.key,D)}}return function(M,P,N){return P&&C(M.prototype,P),N&&C(M,N),M}}(),u=function C(M,P,N){M===null&&(M=Function.prototype);var D=Object.getOwnPropertyDescriptor(M,P);if(D===void 0){var B=Object.getPrototypeOf(M);return B===null?void 0:C(B,P,N)}else{if("value"in D)return D.value;var F=D.get;return F===void 0?void 0:F.call(N)}},p=s(2),T=w(p),v=s(0),m=w(v),f=s(4),d=w(f),b=s(6),y=w(b),_=s(7),A=w(_);function w(C){return C&&C.__esModule?C:{default:C}}function O(C,M){if(!(C instanceof M))throw new TypeError("Cannot call a class as a function")}function k(C,M){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:C}function S(C,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);C.prototype=Object.create(M&&M.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(C,M):C.__proto__=M)}var R=function(C){S(M,C);function M(){return O(this,M),k(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return M}(y.default);R.blotName="code",R.tagName="CODE";var l=function(C){S(M,C);function M(){return O(this,M),k(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return h(M,[{key:"delta",value:function(){var N=this,D=this.domNode.textContent;return D.endsWith(`
`)&&(D=D.slice(0,-1)),D.split(`
`).reduce(function(B,F){return B.insert(F).insert(`
`,N.formats())},new T.default)}},{key:"format",value:function(N,D){if(!(N===this.statics.blotName&&D)){var B=this.descendant(A.default,this.length()-1),F=a(B,1),G=F[0];G!=null&&G.deleteAt(G.length()-1,1),u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,N,D)}}},{key:"formatAt",value:function(N,D,B,F){if(D!==0&&!(m.default.query(B,m.default.Scope.BLOCK)==null||B===this.statics.blotName&&F===this.statics.formats(this.domNode))){var G=this.newlineIndex(N);if(!(G<0||G>=N+D)){var Y=this.newlineIndex(N,!0)+1,H=G-Y+1,ee=this.isolate(Y,H),V=ee.next;ee.format(B,F),V instanceof M&&V.formatAt(0,N-Y+D-H,B,F)}}}},{key:"insertAt",value:function(N,D,B){if(B==null){var F=this.descendant(A.default,N),G=a(F,2),Y=G[0],H=G[1];Y.insertAt(H,D)}}},{key:"length",value:function(){var N=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?N:N+1}},{key:"newlineIndex",value:function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(D)return this.domNode.textContent.slice(0,N).lastIndexOf(`
`);var B=this.domNode.textContent.slice(N).indexOf(`
`);return B>-1?N+B:-1}},{key:"optimize",value:function(N){this.domNode.textContent.endsWith(`
`)||this.appendChild(m.default.create("text",`
`)),u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,N);var D=this.next;D!=null&&D.prev===this&&D.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===D.statics.formats(D.domNode)&&(D.optimize(N),D.moveChildren(this),D.remove())}},{key:"replace",value:function(N){u(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,N),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(D){var B=m.default.find(D);B==null?D.parentNode.removeChild(D):B instanceof m.default.Embed?B.remove():B.unwrap()})}}],[{key:"create",value:function(N){var D=u(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,N);return D.setAttribute("spellcheck",!1),D}},{key:"formats",value:function(){return!0}}]),M}(d.default);l.blotName="code-block",l.tagName="PRE",l.TAB="  ",n.Code=R,n.default=l},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},h=function(){function V(U,q){var z=[],X=!0,re=!1,J=void 0;try{for(var W=U[Symbol.iterator](),te;!(X=(te=W.next()).done)&&(z.push(te.value),!(q&&z.length===q));X=!0);}catch(se){re=!0,J=se}finally{try{!X&&W.return&&W.return()}finally{if(re)throw J}}return z}return function(U,q){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return V(U,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function V(U,q){for(var z=0;z<q.length;z++){var X=q[z];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(U,X.key,X)}}return function(U,q,z){return q&&V(U.prototype,q),z&&V(U,z),U}}(),p=s(2),T=D(p),v=s(20),m=D(v),f=s(0),d=D(f),b=s(13),y=D(b),_=s(24),A=D(_),w=s(4),O=D(w),k=s(16),S=D(k),R=s(21),l=D(R),C=s(11),M=D(C),P=s(3),N=D(P);function D(V){return V&&V.__esModule?V:{default:V}}function B(V,U,q){return U in V?Object.defineProperty(V,U,{value:q,enumerable:!0,configurable:!0,writable:!0}):V[U]=q,V}function F(V,U){if(!(V instanceof U))throw new TypeError("Cannot call a class as a function")}var G=/^[ -~]*$/,Y=function(){function V(U){F(this,V),this.scroll=U,this.delta=this.getDelta()}return u(V,[{key:"applyDelta",value:function(q){var z=this,X=!1;this.scroll.update();var re=this.scroll.length();return this.scroll.batchStart(),q=ee(q),q.reduce(function(J,W){var te=W.retain||W.delete||W.insert.length||1,se=W.attributes||{};if(W.insert!=null){if(typeof W.insert=="string"){var oe=W.insert;oe.endsWith(`
`)&&X&&(X=!1,oe=oe.slice(0,-1)),J>=re&&!oe.endsWith(`
`)&&(X=!0),z.scroll.insertAt(J,oe);var fe=z.scroll.line(J),Ee=h(fe,2),Pe=Ee[0],Le=Ee[1],Ue=(0,N.default)({},(0,w.bubbleFormats)(Pe));if(Pe instanceof O.default){var ot=Pe.descendant(d.default.Leaf,Le),Tt=h(ot,1),lt=Tt[0];Ue=(0,N.default)(Ue,(0,w.bubbleFormats)(lt))}se=m.default.attributes.diff(Ue,se)||{}}else if(a(W.insert)==="object"){var he=Object.keys(W.insert)[0];if(he==null)return J;z.scroll.insertAt(J,he,W.insert[he])}re+=te}return Object.keys(se).forEach(function(me){z.scroll.formatAt(J,te,me,se[me])}),J+te},0),q.reduce(function(J,W){return typeof W.delete=="number"?(z.scroll.deleteAt(J,W.delete),J):J+(W.retain||W.insert.length||1)},0),this.scroll.batchEnd(),this.update(q)}},{key:"deleteText",value:function(q,z){return this.scroll.deleteAt(q,z),this.update(new T.default().retain(q).delete(z))}},{key:"formatLine",value:function(q,z){var X=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(re).forEach(function(J){if(!(X.scroll.whitelist!=null&&!X.scroll.whitelist[J])){var W=X.scroll.lines(q,Math.max(z,1)),te=z;W.forEach(function(se){var oe=se.length();if(!(se instanceof y.default))se.format(J,re[J]);else{var fe=q-se.offset(X.scroll),Ee=se.newlineIndex(fe+te)-fe+1;se.formatAt(fe,Ee,J,re[J])}te-=oe})}}),this.scroll.optimize(),this.update(new T.default().retain(q).retain(z,(0,l.default)(re)))}},{key:"formatText",value:function(q,z){var X=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(re).forEach(function(J){X.scroll.formatAt(q,z,J,re[J])}),this.update(new T.default().retain(q).retain(z,(0,l.default)(re)))}},{key:"getContents",value:function(q,z){return this.delta.slice(q,q+z)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(q,z){return q.concat(z.delta())},new T.default)}},{key:"getFormat",value:function(q){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,X=[],re=[];z===0?this.scroll.path(q).forEach(function(W){var te=h(W,1),se=te[0];se instanceof O.default?X.push(se):se instanceof d.default.Leaf&&re.push(se)}):(X=this.scroll.lines(q,z),re=this.scroll.descendants(d.default.Leaf,q,z));var J=[X,re].map(function(W){if(W.length===0)return{};for(var te=(0,w.bubbleFormats)(W.shift());Object.keys(te).length>0;){var se=W.shift();if(se==null)return te;te=H((0,w.bubbleFormats)(se),te)}return te});return N.default.apply(N.default,J)}},{key:"getText",value:function(q,z){return this.getContents(q,z).filter(function(X){return typeof X.insert=="string"}).map(function(X){return X.insert}).join("")}},{key:"insertEmbed",value:function(q,z,X){return this.scroll.insertAt(q,z,X),this.update(new T.default().retain(q).insert(B({},z,X)))}},{key:"insertText",value:function(q,z){var X=this,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return z=z.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(q,z),Object.keys(re).forEach(function(J){X.scroll.formatAt(q,z.length,J,re[J])}),this.update(new T.default().retain(q).insert(z,(0,l.default)(re)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var q=this.scroll.children.head;return q.statics.blotName!==O.default.blotName||q.children.length>1?!1:q.children.head instanceof S.default}},{key:"removeFormat",value:function(q,z){var X=this.getText(q,z),re=this.scroll.line(q+z),J=h(re,2),W=J[0],te=J[1],se=0,oe=new T.default;W!=null&&(W instanceof y.default?se=W.newlineIndex(te)-te+1:se=W.length()-te,oe=W.delta().slice(te,te+se-1).insert(`
`));var fe=this.getContents(q,z+se),Ee=fe.diff(new T.default().insert(X).concat(oe)),Pe=new T.default().retain(q).concat(Ee);return this.applyDelta(Pe)}},{key:"update",value:function(q){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,re=this.delta;if(z.length===1&&z[0].type==="characterData"&&z[0].target.data.match(G)&&d.default.find(z[0].target)){var J=d.default.find(z[0].target),W=(0,w.bubbleFormats)(J),te=J.offset(this.scroll),se=z[0].oldValue.replace(A.default.CONTENTS,""),oe=new T.default().insert(se),fe=new T.default().insert(J.value()),Ee=new T.default().retain(te).concat(oe.diff(fe,X));q=Ee.reduce(function(Pe,Le){return Le.insert?Pe.insert(Le.insert,W):Pe.push(Le)},new T.default),this.delta=re.compose(q)}else this.delta=this.getDelta(),(!q||!(0,M.default)(re.compose(q),this.delta))&&(q=re.diff(this.delta,X));return q}}]),V}();function H(V,U){return Object.keys(U).reduce(function(q,z){return V[z]==null||(U[z]===V[z]?q[z]=U[z]:Array.isArray(U[z])?U[z].indexOf(V[z])<0&&(q[z]=U[z].concat([V[z]])):q[z]=[U[z],V[z]]),q},{})}function ee(V){return V.reduce(function(U,q){if(q.insert===1){var z=(0,l.default)(q.attributes);return delete z.image,U.insert({image:q.attributes.image},z)}if(q.attributes!=null&&(q.attributes.list===!0||q.attributes.bullet===!0)&&(q=(0,l.default)(q),q.attributes.list?q.attributes.list="ordered":(q.attributes.list="bullet",delete q.attributes.bullet)),typeof q.insert=="string"){var X=q.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return U.insert(X,q.attributes)}return U.push(q)},new T.default)}n.default=Y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var a=function(){function C(M,P){var N=[],D=!0,B=!1,F=void 0;try{for(var G=M[Symbol.iterator](),Y;!(D=(Y=G.next()).done)&&(N.push(Y.value),!(P&&N.length===P));D=!0);}catch(H){B=!0,F=H}finally{try{!D&&G.return&&G.return()}finally{if(B)throw F}}return N}return function(M,P){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return C(M,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function C(M,P){for(var N=0;N<P.length;N++){var D=P[N];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(M,D.key,D)}}return function(M,P,N){return P&&C(M.prototype,P),N&&C(M,N),M}}(),u=s(0),p=A(u),T=s(21),v=A(T),m=s(11),f=A(m),d=s(8),b=A(d),y=s(10),_=A(y);function A(C){return C&&C.__esModule?C:{default:C}}function w(C){if(Array.isArray(C)){for(var M=0,P=Array(C.length);M<C.length;M++)P[M]=C[M];return P}else return Array.from(C)}function O(C,M){if(!(C instanceof M))throw new TypeError("Cannot call a class as a function")}var k=(0,_.default)("quill:selection"),S=function C(M){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;O(this,C),this.index=M,this.length=P},R=function(){function C(M,P){var N=this;O(this,C),this.emitter=P,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=p.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){N.mouseDown||setTimeout(N.update.bind(N,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(D,B){D===b.default.events.TEXT_CHANGE&&B.length()>0&&N.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(N.hasFocus()){var D=N.getNativeRange();D!=null&&D.start.node!==N.cursor.textNode&&N.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{N.setNativeRange(D.start.node,D.start.offset,D.end.node,D.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(D,B){if(B.range){var F=B.range,G=F.startNode,Y=F.startOffset,H=F.endNode,ee=F.endOffset;N.setNativeRange(G,Y,H,ee)}}),this.update(b.default.sources.SILENT)}return h(C,[{key:"handleComposition",value:function(){var P=this;this.root.addEventListener("compositionstart",function(){P.composing=!0}),this.root.addEventListener("compositionend",function(){if(P.composing=!1,P.cursor.parent){var N=P.cursor.restore();if(!N)return;setTimeout(function(){P.setNativeRange(N.startNode,N.startOffset,N.endNode,N.endOffset)},1)}})}},{key:"handleDragging",value:function(){var P=this;this.emitter.listenDOM("mousedown",document.body,function(){P.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){P.mouseDown=!1,P.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(P,N){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[P])){this.scroll.update();var D=this.getNativeRange();if(!(D==null||!D.native.collapsed||p.default.query(P,p.default.Scope.BLOCK))){if(D.start.node!==this.cursor.textNode){var B=p.default.find(D.start.node,!1);if(B==null)return;if(B instanceof p.default.Leaf){var F=B.split(D.start.offset);B.parent.insertBefore(this.cursor,F)}else B.insertBefore(this.cursor,D.start.node);this.cursor.attach()}this.cursor.format(P,N),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=this.scroll.length();P=Math.min(P,D-1),N=Math.min(P+N,D-1)-P;var B=void 0,F=this.scroll.leaf(P),G=a(F,2),Y=G[0],H=G[1];if(Y==null)return null;var ee=Y.position(H,!0),V=a(ee,2);B=V[0],H=V[1];var U=document.createRange();if(N>0){U.setStart(B,H);var q=this.scroll.leaf(P+N),z=a(q,2);if(Y=z[0],H=z[1],Y==null)return null;var X=Y.position(H,!0),re=a(X,2);return B=re[0],H=re[1],U.setEnd(B,H),U.getBoundingClientRect()}else{var J="left",W=void 0;return B instanceof Text?(H<B.data.length?(U.setStart(B,H),U.setEnd(B,H+1)):(U.setStart(B,H-1),U.setEnd(B,H),J="right"),W=U.getBoundingClientRect()):(W=Y.domNode.getBoundingClientRect(),H>0&&(J="right")),{bottom:W.top+W.height,height:W.height,left:W[J],right:W[J],top:W.top,width:0}}}},{key:"getNativeRange",value:function(){var P=document.getSelection();if(P==null||P.rangeCount<=0)return null;var N=P.getRangeAt(0);if(N==null)return null;var D=this.normalizeNative(N);return k.info("getNativeRange",D),D}},{key:"getRange",value:function(){var P=this.getNativeRange();if(P==null)return[null,null];var N=this.normalizedToRange(P);return[N,P]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(P){var N=this,D=[[P.start.node,P.start.offset]];P.native.collapsed||D.push([P.end.node,P.end.offset]);var B=D.map(function(Y){var H=a(Y,2),ee=H[0],V=H[1],U=p.default.find(ee,!0),q=U.offset(N.scroll);return V===0?q:U instanceof p.default.Container?q+U.length():q+U.index(ee,V)}),F=Math.min(Math.max.apply(Math,w(B)),this.scroll.length()-1),G=Math.min.apply(Math,[F].concat(w(B)));return new S(G,F-G)}},{key:"normalizeNative",value:function(P){if(!l(this.root,P.startContainer)||!P.collapsed&&!l(this.root,P.endContainer))return null;var N={start:{node:P.startContainer,offset:P.startOffset},end:{node:P.endContainer,offset:P.endOffset},native:P};return[N.start,N.end].forEach(function(D){for(var B=D.node,F=D.offset;!(B instanceof Text)&&B.childNodes.length>0;)if(B.childNodes.length>F)B=B.childNodes[F],F=0;else if(B.childNodes.length===F)B=B.lastChild,F=B instanceof Text?B.data.length:B.childNodes.length+1;else break;D.node=B,D.offset=F}),N}},{key:"rangeToNative",value:function(P){var N=this,D=P.collapsed?[P.index]:[P.index,P.index+P.length],B=[],F=this.scroll.length();return D.forEach(function(G,Y){G=Math.min(F-1,G);var H=void 0,ee=N.scroll.leaf(G),V=a(ee,2),U=V[0],q=V[1],z=U.position(q,Y!==0),X=a(z,2);H=X[0],q=X[1],B.push(H,q)}),B.length<2&&(B=B.concat(B)),B}},{key:"scrollIntoView",value:function(P){var N=this.lastRange;if(N!=null){var D=this.getBounds(N.index,N.length);if(D!=null){var B=this.scroll.length()-1,F=this.scroll.line(Math.min(N.index,B)),G=a(F,1),Y=G[0],H=Y;if(N.length>0){var ee=this.scroll.line(Math.min(N.index+N.length,B)),V=a(ee,1);H=V[0]}if(!(Y==null||H==null)){var U=P.getBoundingClientRect();D.top<U.top?P.scrollTop-=U.top-D.top:D.bottom>U.bottom&&(P.scrollTop+=D.bottom-U.bottom)}}}}},{key:"setNativeRange",value:function(P,N){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(k.info("setNativeRange",P,N,D,B),!(P!=null&&(this.root.parentNode==null||P.parentNode==null||D.parentNode==null))){var G=document.getSelection();if(G!=null)if(P!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||F||P!==Y.startContainer||N!==Y.startOffset||D!==Y.endContainer||B!==Y.endOffset){P.tagName=="BR"&&(N=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode),D.tagName=="BR"&&(B=[].indexOf.call(D.parentNode.childNodes,D),D=D.parentNode);var H=document.createRange();H.setStart(P,N),H.setEnd(D,B),G.removeAllRanges(),G.addRange(H)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof N=="string"&&(D=N,N=!1),k.info("setRange",P),P!=null){var B=this.rangeToNative(P);this.setNativeRange.apply(this,w(B).concat([N]))}else this.setNativeRange(null);this.update(D)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,N=this.lastRange,D=this.getRange(),B=a(D,2),F=B[0],G=B[1];if(this.lastRange=F,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(N,this.lastRange)){var Y;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var H=[b.default.events.SELECTION_CHANGE,(0,v.default)(this.lastRange),(0,v.default)(N),P];if((Y=this.emitter).emit.apply(Y,[b.default.events.EDITOR_CHANGE].concat(H)),P!==b.default.sources.SILENT){var ee;(ee=this.emitter).emit.apply(ee,H)}}}}]),C}();function l(C,M){try{M.parentNode}catch{return!1}return M instanceof Text&&(M=M.parentNode),C.contains(M)}n.Range=S,n.default=R},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(y,_){for(var A=0;A<_.length;A++){var w=_[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,A){return _&&b(y.prototype,_),A&&b(y,A),y}}(),h=function b(y,_,A){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:b(O,_,A)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(A)}},u=s(0),p=T(u);function T(b){return b&&b.__esModule?b:{default:b}}function v(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function m(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function f(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var d=function(b){f(y,b);function y(){return v(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"insertInto",value:function(A,w){A.children.length===0?h(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,A,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(p.default.Embed);d.blotName="break",d.tagName="BR",n.default=d},function(o,n,s){var a=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var b in d)d.hasOwnProperty(b)&&(f[b]=d[b])};return function(f,d){m(f,d);function b(){this.constructor=f}f.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(44),u=s(30),p=s(1),T=function(m){a(f,m);function f(d){var b=m.call(this,d)||this;return b.build(),b}return f.prototype.appendChild=function(d){this.insertBefore(d)},f.prototype.attach=function(){m.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},f.prototype.build=function(){var d=this;this.children=new h.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var y=v(b);d.insertBefore(y,d.children.head||void 0)}catch(_){if(_ instanceof p.ParchmentError)return;throw _}})},f.prototype.deleteAt=function(d,b){if(d===0&&b===this.length())return this.remove();this.children.forEachAt(d,b,function(y,_,A){y.deleteAt(_,A)})},f.prototype.descendant=function(d,b){var y=this.children.find(b),_=y[0],A=y[1];return d.blotName==null&&d(_)||d.blotName!=null&&_ instanceof d?[_,A]:_ instanceof f?_.descendant(d,A):[null,-1]},f.prototype.descendants=function(d,b,y){b===void 0&&(b=0),y===void 0&&(y=Number.MAX_VALUE);var _=[],A=y;return this.children.forEachAt(b,y,function(w,O,k){(d.blotName==null&&d(w)||d.blotName!=null&&w instanceof d)&&_.push(w),w instanceof f&&(_=_.concat(w.descendants(d,O,A))),A-=k}),_},f.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),m.prototype.detach.call(this)},f.prototype.formatAt=function(d,b,y,_){this.children.forEachAt(d,b,function(A,w,O){A.formatAt(w,O,y,_)})},f.prototype.insertAt=function(d,b,y){var _=this.children.find(d),A=_[0],w=_[1];if(A)A.insertAt(w,b,y);else{var O=y==null?p.create("text",b):p.create(b,y);this.appendChild(O)}},f.prototype.insertBefore=function(d,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return d instanceof y}))throw new p.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,b)},f.prototype.length=function(){return this.children.reduce(function(d,b){return d+b.length()},0)},f.prototype.moveChildren=function(d,b){this.children.forEach(function(y){d.insertBefore(y,b)})},f.prototype.optimize=function(d){if(m.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var b=p.create(this.statics.defaultChild);this.appendChild(b),b.optimize(d)}else this.remove()},f.prototype.path=function(d,b){b===void 0&&(b=!1);var y=this.children.find(d,b),_=y[0],A=y[1],w=[[this,d]];return _ instanceof f?w.concat(_.path(A,b)):(_!=null&&w.push([_,A]),w)},f.prototype.removeChild=function(d){this.children.remove(d)},f.prototype.replace=function(d){d instanceof f&&d.moveChildren(this),m.prototype.replace.call(this,d)},f.prototype.split=function(d,b){if(b===void 0&&(b=!1),!b){if(d===0)return this;if(d===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(d,this.length(),function(_,A,w){_=_.split(A,b),y.appendChild(_)}),y},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(d,b){var y=this,_=[],A=[];d.forEach(function(w){w.target===y.domNode&&w.type==="childList"&&(_.push.apply(_,w.addedNodes),A.push.apply(A,w.removedNodes))}),A.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var O=p.find(w);O!=null&&(O.domNode.parentNode==null||O.domNode.parentNode===y.domNode)&&O.detach()}}),_.filter(function(w){return w.parentNode==y.domNode}).sort(function(w,O){return w===O?0:w.compareDocumentPosition(O)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var O=null;w.nextSibling!=null&&(O=p.find(w.nextSibling));var k=v(w);(k.next!=O||k.next==null)&&(k.parent!=null&&k.parent.removeChild(y),y.insertBefore(k,O||void 0))})},f}(u.default);function v(m){var f=p.find(m);if(f==null)try{f=p.create(m)}catch{f=p.create(p.Scope.INLINE),[].slice.call(m.childNodes).forEach(function(b){f.domNode.appendChild(b)}),m.parentNode&&m.parentNode.replaceChild(f.domNode,m),f.attach()}return f}n.default=T},function(o,n,s){var a=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var b in d)d.hasOwnProperty(b)&&(f[b]=d[b])};return function(f,d){m(f,d);function b(){this.constructor=f}f.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(12),u=s(31),p=s(17),T=s(1),v=function(m){a(f,m);function f(d){var b=m.call(this,d)||this;return b.attributes=new u.default(b.domNode),b}return f.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},f.prototype.format=function(d,b){var y=T.query(d);y instanceof h.default?this.attributes.attribute(y,b):b&&y!=null&&(d!==this.statics.blotName||this.formats()[d]!==b)&&this.replaceWith(d,b)},f.prototype.formats=function(){var d=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(d[this.statics.blotName]=b),d},f.prototype.replaceWith=function(d,b){var y=m.prototype.replaceWith.call(this,d,b);return this.attributes.copy(y),y},f.prototype.update=function(d,b){var y=this;m.prototype.update.call(this,d,b),d.some(function(_){return _.target===y.domNode&&_.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(d,b){var y=m.prototype.wrap.call(this,d,b);return y instanceof f&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},f}(p.default);n.default=v},function(o,n,s){var a=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)m.hasOwnProperty(f)&&(v[f]=m[f])};return function(v,m){T(v,m);function f(){this.constructor=v}v.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(30),u=s(1),p=function(T){a(v,T);function v(){return T!==null&&T.apply(this,arguments)||this}return v.value=function(m){return!0},v.prototype.index=function(m,f){return this.domNode===m||this.domNode.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},v.prototype.position=function(m,f){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return m>0&&(d+=1),[this.parent.domNode,d]},v.prototype.value=function(){var m;return m={},m[this.statics.blotName]=this.statics.value(this.domNode)||!0,m},v.scope=u.Scope.INLINE_BLOT,v}(h.default);n.default=p},function(o,n,s){var a=s(11),h=s(3),u={attributes:{compose:function(T,v,m){typeof T!="object"&&(T={}),typeof v!="object"&&(v={});var f=h(!0,{},v);m||(f=Object.keys(f).reduce(function(b,y){return f[y]!=null&&(b[y]=f[y]),b},{}));for(var d in T)T[d]!==void 0&&v[d]===void 0&&(f[d]=T[d]);return Object.keys(f).length>0?f:void 0},diff:function(T,v){typeof T!="object"&&(T={}),typeof v!="object"&&(v={});var m=Object.keys(T).concat(Object.keys(v)).reduce(function(f,d){return a(T[d],v[d])||(f[d]=v[d]===void 0?null:v[d]),f},{});return Object.keys(m).length>0?m:void 0},transform:function(T,v,m){if(typeof T!="object")return v;if(typeof v=="object"){if(!m)return v;var f=Object.keys(v).reduce(function(d,b){return T[b]===void 0&&(d[b]=v[b]),d},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(T){return new p(T)},length:function(T){return typeof T.delete=="number"?T.delete:typeof T.retain=="number"?T.retain:typeof T.insert=="string"?T.insert.length:1}};function p(T){this.ops=T,this.index=0,this.offset=0}p.prototype.hasNext=function(){return this.peekLength()<1/0},p.prototype.next=function(T){T||(T=1/0);var v=this.ops[this.index];if(v){var m=this.offset,f=u.length(v);if(T>=f-m?(T=f-m,this.index+=1,this.offset=0):this.offset+=T,typeof v.delete=="number")return{delete:T};var d={};return v.attributes&&(d.attributes=v.attributes),typeof v.retain=="number"?d.retain=T:typeof v.insert=="string"?d.insert=v.insert.substr(m,T):d.insert=v.insert,d}else return{retain:1/0}},p.prototype.peek=function(){return this.ops[this.index]},p.prototype.peekLength=function(){return this.ops[this.index]?u.length(this.ops[this.index])-this.offset:1/0},p.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},p.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var T=this.offset,v=this.index,m=this.next(),f=this.ops.slice(this.index);return this.offset=T,this.index=v,[m].concat(f)}else return[]},o.exports=u},function(o,n){var s=function(){function a(y,_){return _!=null&&y instanceof _}var h;try{h=Map}catch{h=function(){}}var u;try{u=Set}catch{u=function(){}}var p;try{p=Promise}catch{p=function(){}}function T(y,_,A,w,O){typeof _=="object"&&(A=_.depth,w=_.prototype,O=_.includeNonEnumerable,_=_.circular);var k=[],S=[],R=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof A>"u"&&(A=1/0);function l(C,M){if(C===null)return null;if(M===0)return C;var P,N;if(typeof C!="object")return C;if(a(C,h))P=new h;else if(a(C,u))P=new u;else if(a(C,p))P=new p(function(U,q){C.then(function(z){U(l(z,M-1))},function(z){q(l(z,M-1))})});else if(T.__isArray(C))P=[];else if(T.__isRegExp(C))P=new RegExp(C.source,b(C)),C.lastIndex&&(P.lastIndex=C.lastIndex);else if(T.__isDate(C))P=new Date(C.getTime());else{if(R&&Buffer.isBuffer(C))return Buffer.allocUnsafe?P=Buffer.allocUnsafe(C.length):P=new Buffer(C.length),C.copy(P),P;a(C,Error)?P=Object.create(C):typeof w>"u"?(N=Object.getPrototypeOf(C),P=Object.create(N)):(P=Object.create(w),N=w)}if(_){var D=k.indexOf(C);if(D!=-1)return S[D];k.push(C),S.push(P)}a(C,h)&&C.forEach(function(U,q){var z=l(q,M-1),X=l(U,M-1);P.set(z,X)}),a(C,u)&&C.forEach(function(U){var q=l(U,M-1);P.add(q)});for(var B in C){var F;N&&(F=Object.getOwnPropertyDescriptor(N,B)),!(F&&F.set==null)&&(P[B]=l(C[B],M-1))}if(Object.getOwnPropertySymbols)for(var G=Object.getOwnPropertySymbols(C),B=0;B<G.length;B++){var Y=G[B],H=Object.getOwnPropertyDescriptor(C,Y);H&&!H.enumerable&&!O||(P[Y]=l(C[Y],M-1),H.enumerable||Object.defineProperty(P,Y,{enumerable:!1}))}if(O)for(var ee=Object.getOwnPropertyNames(C),B=0;B<ee.length;B++){var V=ee[B],H=Object.getOwnPropertyDescriptor(C,V);H&&H.enumerable||(P[V]=l(C[V],M-1),Object.defineProperty(P,V,{enumerable:!1}))}return P}return l(y,A)}T.clonePrototype=function(_){if(_===null)return null;var A=function(){};return A.prototype=_,new A};function v(y){return Object.prototype.toString.call(y)}T.__objToStr=v;function m(y){return typeof y=="object"&&v(y)==="[object Date]"}T.__isDate=m;function f(y){return typeof y=="object"&&v(y)==="[object Array]"}T.__isArray=f;function d(y){return typeof y=="object"&&v(y)==="[object RegExp]"}T.__isRegExp=d;function b(y){var _="";return y.global&&(_+="g"),y.ignoreCase&&(_+="i"),y.multiline&&(_+="m"),_}return T.__getRegExpFlags=b,T}();typeof o=="object"&&o.exports&&(o.exports=s)},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function P(N,D){var B=[],F=!0,G=!1,Y=void 0;try{for(var H=N[Symbol.iterator](),ee;!(F=(ee=H.next()).done)&&(B.push(ee.value),!(D&&B.length===D));F=!0);}catch(V){G=!0,Y=V}finally{try{!F&&H.return&&H.return()}finally{if(G)throw Y}}return B}return function(N,D){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return P(N,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function P(N,D){for(var B=0;B<D.length;B++){var F=D[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(N,F.key,F)}}return function(N,D,B){return D&&P(N.prototype,D),B&&P(N,B),N}}(),u=function P(N,D,B){N===null&&(N=Function.prototype);var F=Object.getOwnPropertyDescriptor(N,D);if(F===void 0){var G=Object.getPrototypeOf(N);return G===null?void 0:P(G,D,B)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(B)}},p=s(0),T=k(p),v=s(8),m=k(v),f=s(4),d=k(f),b=s(16),y=k(b),_=s(13),A=k(_),w=s(25),O=k(w);function k(P){return P&&P.__esModule?P:{default:P}}function S(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function R(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:P}function l(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}function C(P){return P instanceof d.default||P instanceof f.BlockEmbed}var M=function(P){l(N,P);function N(D,B){S(this,N);var F=R(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,D));return F.emitter=B.emitter,Array.isArray(B.whitelist)&&(F.whitelist=B.whitelist.reduce(function(G,Y){return G[Y]=!0,G},{})),F.domNode.addEventListener("DOMNodeInserted",function(){}),F.optimize(),F.enable(),F}return h(N,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(B,F){var G=this.line(B),Y=a(G,2),H=Y[0],ee=Y[1],V=this.line(B+F),U=a(V,1),q=U[0];if(u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,B,F),q!=null&&H!==q&&ee>0){if(H instanceof f.BlockEmbed||q instanceof f.BlockEmbed){this.optimize();return}if(H instanceof A.default){var z=H.newlineIndex(H.length(),!0);if(z>-1&&(H=H.split(z+1),H===q)){this.optimize();return}}else if(q instanceof A.default){var X=q.newlineIndex(0);X>-1&&q.split(X+1)}var re=q.children.head instanceof y.default?null:q.children.head;H.moveChildren(q,re),H.remove()}this.optimize()}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",B)}},{key:"formatAt",value:function(B,F,G,Y){this.whitelist!=null&&!this.whitelist[G]||(u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,B,F,G,Y),this.optimize())}},{key:"insertAt",value:function(B,F,G){if(!(G!=null&&this.whitelist!=null&&!this.whitelist[F])){if(B>=this.length())if(G==null||T.default.query(F,T.default.Scope.BLOCK)==null){var Y=T.default.create(this.statics.defaultChild);this.appendChild(Y),G==null&&F.endsWith(`
`)&&(F=F.slice(0,-1)),Y.insertAt(0,F,G)}else{var H=T.default.create(F,G);this.appendChild(H)}else u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,B,F,G);this.optimize()}}},{key:"insertBefore",value:function(B,F){if(B.statics.scope===T.default.Scope.INLINE_BLOT){var G=T.default.create(this.statics.defaultChild);G.appendChild(B),B=G}u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,B,F)}},{key:"leaf",value:function(B){return this.path(B).pop()||[null,-1]}},{key:"line",value:function(B){return B===this.length()?this.line(B-1):this.descendant(C,B)}},{key:"lines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,G=function Y(H,ee,V){var U=[],q=V;return H.children.forEachAt(ee,V,function(z,X,re){C(z)?U.push(z):z instanceof T.default.Container&&(U=U.concat(Y(z,X,q))),q-=re}),U};return G(this,B,F)}},{key:"optimize",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,B,F),B.length>0&&this.emitter.emit(m.default.events.SCROLL_OPTIMIZE,B,F))}},{key:"path",value:function(B){return u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,B).slice(1)}},{key:"update",value:function(B){if(this.batch!==!0){var F=m.default.sources.USER;typeof B=="string"&&(F=B),Array.isArray(B)||(B=this.observer.takeRecords()),B.length>0&&this.emitter.emit(m.default.events.SCROLL_BEFORE_UPDATE,F,B),u(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"update",this).call(this,B.concat([])),B.length>0&&this.emitter.emit(m.default.events.SCROLL_UPDATE,F,B)}}}]),N}(T.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[d.default,f.BlockEmbed,O.default],n.default=M},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},h=function(){function W(te,se){var oe=[],fe=!0,Ee=!1,Pe=void 0;try{for(var Le=te[Symbol.iterator](),Ue;!(fe=(Ue=Le.next()).done)&&(oe.push(Ue.value),!(se&&oe.length===se));fe=!0);}catch(ot){Ee=!0,Pe=ot}finally{try{!fe&&Le.return&&Le.return()}finally{if(Ee)throw Pe}}return oe}return function(te,se){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return W(te,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function W(te,se){for(var oe=0;oe<se.length;oe++){var fe=se[oe];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(te,fe.key,fe)}}return function(te,se,oe){return se&&W(te.prototype,se),oe&&W(te,oe),te}}(),p=s(21),T=P(p),v=s(11),m=P(v),f=s(3),d=P(f),b=s(2),y=P(b),_=s(20),A=P(_),w=s(0),O=P(w),k=s(5),S=P(k),R=s(10),l=P(R),C=s(9),M=P(C);function P(W){return W&&W.__esModule?W:{default:W}}function N(W,te,se){return te in W?Object.defineProperty(W,te,{value:se,enumerable:!0,configurable:!0,writable:!0}):W[te]=se,W}function D(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")}function B(W,te){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(typeof te=="object"||typeof te=="function")?te:W}function F(W,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);W.prototype=Object.create(te&&te.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(W,te):W.__proto__=te)}var G=(0,l.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",H=function(W){F(te,W),u(te,null,[{key:"match",value:function(oe,fe){return fe=J(fe),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Ee){return!!fe[Ee]!==oe[Ee]&&fe[Ee]!==null})?!1:fe.key===(oe.which||oe.keyCode)}}]);function te(se,oe){D(this,te);var fe=B(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,se,oe));return fe.bindings={},Object.keys(fe.options.bindings).forEach(function(Ee){Ee==="list autofill"&&se.scroll.whitelist!=null&&!se.scroll.whitelist.list||fe.options.bindings[Ee]&&fe.addBinding(fe.options.bindings[Ee])}),fe.addBinding({key:te.keys.ENTER,shiftKey:null},z),fe.addBinding({key:te.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(fe.addBinding({key:te.keys.BACKSPACE},{collapsed:!0},V),fe.addBinding({key:te.keys.DELETE},{collapsed:!0},U)):(fe.addBinding({key:te.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},V),fe.addBinding({key:te.keys.DELETE},{collapsed:!0,suffix:/^.?$/},U)),fe.addBinding({key:te.keys.BACKSPACE},{collapsed:!1},q),fe.addBinding({key:te.keys.DELETE},{collapsed:!1},q),fe.addBinding({key:te.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},V),fe.listen(),fe}return u(te,[{key:"addBinding",value:function(oe){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Pe=J(oe);if(Pe==null||Pe.key==null)return G.warn("Attempted to add invalid keyboard binding",Pe);typeof fe=="function"&&(fe={handler:fe}),typeof Ee=="function"&&(Ee={handler:Ee}),Pe=(0,d.default)(Pe,fe,Ee),this.bindings[Pe.key]=this.bindings[Pe.key]||[],this.bindings[Pe.key].push(Pe)}},{key:"listen",value:function(){var oe=this;this.quill.root.addEventListener("keydown",function(fe){if(!fe.defaultPrevented){var Ee=fe.which||fe.keyCode,Pe=(oe.bindings[Ee]||[]).filter(function(ht){return te.match(fe,ht)});if(Pe.length!==0){var Le=oe.quill.getSelection();if(!(Le==null||!oe.quill.hasFocus())){var Ue=oe.quill.getLine(Le.index),ot=h(Ue,2),Tt=ot[0],lt=ot[1],he=oe.quill.getLeaf(Le.index),me=h(he,2),Te=me[0],Oe=me[1],ge=Le.length===0?[Te,Oe]:oe.quill.getLeaf(Le.index+Le.length),Be=h(ge,2),Re=Be[0],Ae=Be[1],ut=Te instanceof O.default.Text?Te.value().slice(0,Oe):"",Ht=Re instanceof O.default.Text?Re.value().slice(Ae):"",pt={collapsed:Le.length===0,empty:Le.length===0&&Tt.length()<=1,format:oe.quill.getFormat(Le),offset:lt,prefix:ut,suffix:Ht},Zi=Pe.some(function(ht){if(ht.collapsed!=null&&ht.collapsed!==pt.collapsed||ht.empty!=null&&ht.empty!==pt.empty||ht.offset!=null&&ht.offset!==pt.offset)return!1;if(Array.isArray(ht.format)){if(ht.format.every(function(be){return pt.format[be]==null}))return!1}else if(a(ht.format)==="object"&&!Object.keys(ht.format).every(function(be){return ht.format[be]===!0?pt.format[be]!=null:ht.format[be]===!1?pt.format[be]==null:(0,m.default)(ht.format[be],pt.format[be])}))return!1;return ht.prefix!=null&&!ht.prefix.test(pt.prefix)||ht.suffix!=null&&!ht.suffix.test(pt.suffix)?!1:ht.handler.call(oe,Le,pt)!==!0});Zi&&fe.preventDefault()}}}})}}]),te}(M.default);H.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},H.DEFAULTS={bindings:{bold:re("bold"),italic:re("italic"),underline:re("underline"),indent:{key:H.keys.TAB,format:["blockquote","indent","list"],handler:function(te,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:H.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(te,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:H.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(te,se){se.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):se.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":X(!0),"outdent code-block":X(!1),"remove tab":{key:H.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(te){this.quill.deleteText(te.index-1,1,S.default.sources.USER)}},tab:{key:H.keys.TAB,handler:function(te){this.quill.history.cutoff();var se=new y.default().retain(te.index).delete(te.length).insert("	");this.quill.updateContents(se,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(te.index+1,S.default.sources.SILENT)}},"list empty enter":{key:H.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(te,se){this.quill.format("list",!1,S.default.sources.USER),se.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:H.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(te){var se=this.quill.getLine(te.index),oe=h(se,2),fe=oe[0],Ee=oe[1],Pe=(0,d.default)({},fe.formats(),{list:"checked"}),Le=new y.default().retain(te.index).insert(`
`,Pe).retain(fe.length()-Ee-1).retain(1,{list:"unchecked"});this.quill.updateContents(Le,S.default.sources.USER),this.quill.setSelection(te.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:H.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(te,se){var oe=this.quill.getLine(te.index),fe=h(oe,2),Ee=fe[0],Pe=fe[1],Le=new y.default().retain(te.index).insert(`
`,se.format).retain(Ee.length()-Pe-1).retain(1,{header:null});this.quill.updateContents(Le,S.default.sources.USER),this.quill.setSelection(te.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(te,se){var oe=se.prefix.length,fe=this.quill.getLine(te.index),Ee=h(fe,2),Pe=Ee[0],Le=Ee[1];if(Le>oe)return!0;var Ue=void 0;switch(se.prefix.trim()){case"[]":case"[ ]":Ue="unchecked";break;case"[x]":Ue="checked";break;case"-":case"*":Ue="bullet";break;default:Ue="ordered"}this.quill.insertText(te.index," ",S.default.sources.USER),this.quill.history.cutoff();var ot=new y.default().retain(te.index-Le).delete(oe+1).retain(Pe.length()-2-Le).retain(1,{list:Ue});this.quill.updateContents(ot,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(te.index-oe,S.default.sources.SILENT)}},"code exit":{key:H.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(te){var se=this.quill.getLine(te.index),oe=h(se,2),fe=oe[0],Ee=oe[1],Pe=new y.default().retain(te.index+fe.length()-Ee-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Pe,S.default.sources.USER)}},"embed left":ee(H.keys.LEFT,!1),"embed left shift":ee(H.keys.LEFT,!0),"embed right":ee(H.keys.RIGHT,!1),"embed right shift":ee(H.keys.RIGHT,!0)}};function ee(W,te){var se,oe=W===H.keys.LEFT?"prefix":"suffix";return se={key:W,shiftKey:te,altKey:null},N(se,oe,/^$/),N(se,"handler",function(Ee){var Pe=Ee.index;W===H.keys.RIGHT&&(Pe+=Ee.length+1);var Le=this.quill.getLeaf(Pe),Ue=h(Le,1),ot=Ue[0];return ot instanceof O.default.Embed?(W===H.keys.LEFT?te?this.quill.setSelection(Ee.index-1,Ee.length+1,S.default.sources.USER):this.quill.setSelection(Ee.index-1,S.default.sources.USER):te?this.quill.setSelection(Ee.index,Ee.length+1,S.default.sources.USER):this.quill.setSelection(Ee.index+Ee.length+1,S.default.sources.USER),!1):!0}),se}function V(W,te){if(!(W.index===0||this.quill.getLength()<=1)){var se=this.quill.getLine(W.index),oe=h(se,1),fe=oe[0],Ee={};if(te.offset===0){var Pe=this.quill.getLine(W.index-1),Le=h(Pe,1),Ue=Le[0];if(Ue!=null&&Ue.length()>1){var ot=fe.formats(),Tt=this.quill.getFormat(W.index-1,1);Ee=A.default.attributes.diff(ot,Tt)||{}}}var lt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(te.prefix)?2:1;this.quill.deleteText(W.index-lt,lt,S.default.sources.USER),Object.keys(Ee).length>0&&this.quill.formatLine(W.index-lt,lt,Ee,S.default.sources.USER),this.quill.focus()}}function U(W,te){var se=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(te.suffix)?2:1;if(!(W.index>=this.quill.getLength()-se)){var oe={},fe=0,Ee=this.quill.getLine(W.index),Pe=h(Ee,1),Le=Pe[0];if(te.offset>=Le.length()-1){var Ue=this.quill.getLine(W.index+1),ot=h(Ue,1),Tt=ot[0];if(Tt){var lt=Le.formats(),he=this.quill.getFormat(W.index,1);oe=A.default.attributes.diff(lt,he)||{},fe=Tt.length()}}this.quill.deleteText(W.index,se,S.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(W.index+fe-1,se,oe,S.default.sources.USER)}}function q(W){var te=this.quill.getLines(W),se={};if(te.length>1){var oe=te[0].formats(),fe=te[te.length-1].formats();se=A.default.attributes.diff(fe,oe)||{}}this.quill.deleteText(W,S.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(W.index,1,se,S.default.sources.USER),this.quill.setSelection(W.index,S.default.sources.SILENT),this.quill.focus()}function z(W,te){var se=this;W.length>0&&this.quill.scroll.deleteAt(W.index,W.length);var oe=Object.keys(te.format).reduce(function(fe,Ee){return O.default.query(Ee,O.default.Scope.BLOCK)&&!Array.isArray(te.format[Ee])&&(fe[Ee]=te.format[Ee]),fe},{});this.quill.insertText(W.index,`
`,oe,S.default.sources.USER),this.quill.setSelection(W.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(te.format).forEach(function(fe){oe[fe]==null&&(Array.isArray(te.format[fe])||fe!=="link"&&se.quill.format(fe,te.format[fe],S.default.sources.USER))})}function X(W){return{key:H.keys.TAB,shiftKey:!W,format:{"code-block":!0},handler:function(se){var oe=O.default.query("code-block"),fe=se.index,Ee=se.length,Pe=this.quill.scroll.descendant(oe,fe),Le=h(Pe,2),Ue=Le[0],ot=Le[1];if(Ue!=null){var Tt=this.quill.getIndex(Ue),lt=Ue.newlineIndex(ot,!0)+1,he=Ue.newlineIndex(Tt+ot+Ee),me=Ue.domNode.textContent.slice(lt,he).split(`
`);ot=0,me.forEach(function(Te,Oe){W?(Ue.insertAt(lt+ot,oe.TAB),ot+=oe.TAB.length,Oe===0?fe+=oe.TAB.length:Ee+=oe.TAB.length):Te.startsWith(oe.TAB)&&(Ue.deleteAt(lt+ot,oe.TAB.length),ot-=oe.TAB.length,Oe===0?fe-=oe.TAB.length:Ee-=oe.TAB.length),ot+=Te.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(fe,Ee,S.default.sources.SILENT)}}}}function re(W){return{key:W[0].toUpperCase(),shortKey:!0,handler:function(se,oe){this.quill.format(W,!oe.format[W],S.default.sources.USER)}}}function J(W){if(typeof W=="string"||typeof W=="number")return J({key:W});if((typeof W>"u"?"undefined":a(W))==="object"&&(W=(0,T.default)(W,!1)),typeof W.key=="string")if(H.keys[W.key.toUpperCase()]!=null)W.key=H.keys[W.key.toUpperCase()];else if(W.key.length===1)W.key=W.key.toUpperCase().charCodeAt(0);else return null;return W.shortKey&&(W[Y]=W.shortKey,delete W.shortKey),W}n.default=H,n.SHORTKEY=Y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function A(w,O){var k=[],S=!0,R=!1,l=void 0;try{for(var C=w[Symbol.iterator](),M;!(S=(M=C.next()).done)&&(k.push(M.value),!(O&&k.length===O));S=!0);}catch(P){R=!0,l=P}finally{try{!S&&C.return&&C.return()}finally{if(R)throw l}}return k}return function(w,O){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return A(w,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function A(w,O,k){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,O);if(S===void 0){var R=Object.getPrototypeOf(w);return R===null?void 0:A(R,O,k)}else{if("value"in S)return S.value;var l=S.get;return l===void 0?void 0:l.call(k)}},u=function(){function A(w,O){for(var k=0;k<O.length;k++){var S=O[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,O,k){return O&&A(w.prototype,O),k&&A(w,k),w}}(),p=s(0),T=f(p),v=s(7),m=f(v);function f(A){return A&&A.__esModule?A:{default:A}}function d(A,w){if(!(A instanceof w))throw new TypeError("Cannot call a class as a function")}function b(A,w){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:A}function y(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);A.prototype=Object.create(w&&w.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(A,w):A.__proto__=w)}var _=function(A){y(w,A),u(w,null,[{key:"value",value:function(){}}]);function w(O,k){d(this,w);var S=b(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,O));return S.selection=k,S.textNode=document.createTextNode(w.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return u(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(k,S){if(this._length!==0)return h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,k,S);for(var R=this,l=0;R!=null&&R.statics.scope!==T.default.Scope.BLOCK_BLOT;)l+=R.offset(R.parent),R=R.parent;R!=null&&(this._length=w.CONTENTS.length,R.optimize(),R.formatAt(l,w.CONTENTS.length,k,S),this._length=0)}},{key:"index",value:function(k,S){return k===this.textNode?0:h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,k,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var k=this.textNode,S=this.selection.getNativeRange(),R=void 0,l=void 0,C=void 0;if(S!=null&&S.start.node===k&&S.end.node===k){var M=[k,S.start.offset,S.end.offset];R=M[0],l=M[1],C=M[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var P=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof m.default?(R=this.next.domNode,this.next.insertAt(0,P),this.textNode.data=w.CONTENTS):(this.textNode.data=P,this.parent.insertBefore(T.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),l!=null){var N=[l,C].map(function(B){return Math.max(0,Math.min(R.data.length,B-1))}),D=a(N,2);return l=D[0],C=D[1],{startNode:R,startOffset:l,endNode:R,endOffset:C}}}}},{key:"update",value:function(k,S){var R=this;if(k.some(function(C){return C.type==="characterData"&&C.target===R.textNode})){var l=this.restore();l&&(S.range=l)}}},{key:"value",value:function(){return""}}]),w}(T.default.Embed);_.blotName="cursor",_.className="ql-cursor",_.tagName="span",_.CONTENTS="\uFEFF",n.default=_},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(0),h=T(a),u=s(4),p=T(u);function T(b){return b&&b.__esModule?b:{default:b}}function v(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function m(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function f(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var d=function(b){f(y,b);function y(){return v(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(h.default.Container);d.allowedChildren=[p.default,u.BlockEmbed,d],n.default=d},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var a=function(){function _(A,w){for(var O=0;O<w.length;O++){var k=w[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,w,O){return w&&_(A.prototype,w),O&&_(A,O),A}}(),h=function _(A,w,O){A===null&&(A=Function.prototype);var k=Object.getOwnPropertyDescriptor(A,w);if(k===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:_(S,w,O)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(O)}},u=s(0),p=T(u);function T(_){return _&&_.__esModule?_:{default:_}}function v(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function m(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function f(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var d=function(_){f(A,_);function A(){return v(this,A),m(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"value",value:function(O){var k=h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,O);return k.startsWith("rgb(")?(k=k.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+k.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):k}}]),A}(p.default.Attributor.Style),b=new p.default.Attributor.Class("color","ql-color",{scope:p.default.Scope.INLINE}),y=new d("color","color",{scope:p.default.Scope.INLINE});n.ColorAttributor=d,n.ColorClass=b,n.ColorStyle=y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var a=function(){function y(_,A){for(var w=0;w<A.length;w++){var O=A[w];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,A,w){return A&&y(_.prototype,A),w&&y(_,w),_}}(),h=function y(_,A,w){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,A);if(O===void 0){var k=Object.getPrototypeOf(_);return k===null?void 0:y(k,A,w)}else{if("value"in O)return O.value;var S=O.get;return S===void 0?void 0:S.call(w)}},u=s(6),p=T(u);function T(y){return y&&y.__esModule?y:{default:y}}function v(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}function m(y,_){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:y}function f(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(y,_):y.__proto__=_)}var d=function(y){f(_,y);function _(){return v(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return a(_,[{key:"format",value:function(w,O){if(w!==this.statics.blotName||!O)return h(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,w,O);O=this.constructor.sanitize(O),this.domNode.setAttribute("href",O)}}],[{key:"create",value:function(w){var O=h(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,w);return w=this.sanitize(w),O.setAttribute("href",w),O.setAttribute("rel","noopener noreferrer"),O.setAttribute("target","_blank"),O}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return b(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),_}(p.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(y,_){var A=document.createElement("a");A.href=y;var w=A.href.slice(0,A.href.indexOf(":"));return _.indexOf(w)>-1}n.default=d,n.sanitize=b},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h=function(){function _(A,w){for(var O=0;O<w.length;O++){var k=w[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,w,O){return w&&_(A.prototype,w),O&&_(A,O),A}}(),u=s(23),p=m(u),T=s(107),v=m(T);function m(_){return _&&_.__esModule?_:{default:_}}function f(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}var d=0;function b(_,A){_.setAttribute(A,_.getAttribute(A)!=="true")}var y=function(){function _(A){var w=this;f(this,_),this.select=A,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(O){switch(O.keyCode){case p.default.keys.ENTER:w.togglePicker();break;case p.default.keys.ESCAPE:w.escape(),O.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return h(_,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var O=this,k=document.createElement("span");return k.tabIndex="0",k.setAttribute("role","button"),k.classList.add("ql-picker-item"),w.hasAttribute("value")&&k.setAttribute("data-value",w.getAttribute("value")),w.textContent&&k.setAttribute("data-label",w.textContent),k.addEventListener("click",function(){O.selectItem(k,!0)}),k.addEventListener("keydown",function(S){switch(S.keyCode){case p.default.keys.ENTER:O.selectItem(k,!0),S.preventDefault();break;case p.default.keys.ESCAPE:O.escape(),S.preventDefault();break}}),k}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=v.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,O=document.createElement("span");O.classList.add("ql-picker-options"),O.setAttribute("aria-hidden","true"),O.tabIndex="-1",O.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",O.id),this.options=O,[].slice.call(this.select.options).forEach(function(k){var S=w.buildItem(k);O.appendChild(S),k.selected===!0&&w.selectItem(S)}),this.container.appendChild(O)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(O){w.container.setAttribute(O.name,O.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,k=this.container.querySelector(".ql-selected");if(w!==k&&(k!=null&&k.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),O))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var O=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(O)}else this.selectItem(null);var k=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",k)}}]),_}();n.default=y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(0),h=G(a),u=s(5),p=G(u),T=s(4),v=G(T),m=s(16),f=G(m),d=s(25),b=G(d),y=s(24),_=G(y),A=s(35),w=G(A),O=s(6),k=G(O),S=s(22),R=G(S),l=s(7),C=G(l),M=s(55),P=G(M),N=s(42),D=G(N),B=s(23),F=G(B);function G(Y){return Y&&Y.__esModule?Y:{default:Y}}p.default.register({"blots/block":v.default,"blots/block/embed":T.BlockEmbed,"blots/break":f.default,"blots/container":b.default,"blots/cursor":_.default,"blots/embed":w.default,"blots/inline":k.default,"blots/scroll":R.default,"blots/text":C.default,"modules/clipboard":P.default,"modules/history":D.default,"modules/keyboard":F.default}),h.default.register(v.default,f.default,_.default,k.default,R.default,C.default),n.default=p.default},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(1),h=function(){function u(p){this.domNode=p,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(u.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),u.create=function(p){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var T;return Array.isArray(this.tagName)?(typeof p=="string"&&(p=p.toUpperCase(),parseInt(p).toString()===p&&(p=parseInt(p))),typeof p=="number"?T=document.createElement(this.tagName[p-1]):this.tagName.indexOf(p)>-1?T=document.createElement(p):T=document.createElement(this.tagName[0])):T=document.createElement(this.tagName),this.className&&T.classList.add(this.className),T},u.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},u.prototype.clone=function(){var p=this.domNode.cloneNode(!1);return a.create(p)},u.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},u.prototype.deleteAt=function(p,T){var v=this.isolate(p,T);v.remove()},u.prototype.formatAt=function(p,T,v,m){var f=this.isolate(p,T);if(a.query(v,a.Scope.BLOT)!=null&&m)f.wrap(v,m);else if(a.query(v,a.Scope.ATTRIBUTE)!=null){var d=a.create(this.statics.scope);f.wrap(d),d.format(v,m)}},u.prototype.insertAt=function(p,T,v){var m=v==null?a.create("text",T):a.create(T,v),f=this.split(p);this.parent.insertBefore(m,f)},u.prototype.insertInto=function(p,T){T===void 0&&(T=null),this.parent!=null&&this.parent.children.remove(this);var v=null;p.children.insertBefore(this,T),T!=null&&(v=T.domNode),(this.domNode.parentNode!=p.domNode||this.domNode.nextSibling!=v)&&p.domNode.insertBefore(this.domNode,v),this.parent=p,this.attach()},u.prototype.isolate=function(p,T){var v=this.split(p);return v.split(T),v},u.prototype.length=function(){return 1},u.prototype.offset=function(p){return p===void 0&&(p=this.parent),this.parent==null||this==p?0:this.parent.children.offset(this)+this.parent.offset(p)},u.prototype.optimize=function(p){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},u.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},u.prototype.replace=function(p){p.parent!=null&&(p.parent.insertBefore(this,p.next),p.remove())},u.prototype.replaceWith=function(p,T){var v=typeof p=="string"?a.create(p,T):p;return v.replace(this),v},u.prototype.split=function(p,T){return p===0?this:this.next},u.prototype.update=function(p,T){},u.prototype.wrap=function(p,T){var v=typeof p=="string"?a.create(p,T):p;return this.parent!=null&&this.parent.insertBefore(v,this.next),v.appendChild(this),v},u.blotName="abstract",u}();n.default=h},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(12),h=s(32),u=s(33),p=s(1),T=function(){function v(m){this.attributes={},this.domNode=m,this.build()}return v.prototype.attribute=function(m,f){f?m.add(this.domNode,f)&&(m.value(this.domNode)!=null?this.attributes[m.attrName]=m:delete this.attributes[m.attrName]):(m.remove(this.domNode),delete this.attributes[m.attrName])},v.prototype.build=function(){var m=this;this.attributes={};var f=a.default.keys(this.domNode),d=h.default.keys(this.domNode),b=u.default.keys(this.domNode);f.concat(d).concat(b).forEach(function(y){var _=p.query(y,p.Scope.ATTRIBUTE);_ instanceof a.default&&(m.attributes[_.attrName]=_)})},v.prototype.copy=function(m){var f=this;Object.keys(this.attributes).forEach(function(d){var b=f.attributes[d].value(f.domNode);m.format(d,b)})},v.prototype.move=function(m){var f=this;this.copy(m),Object.keys(this.attributes).forEach(function(d){f.attributes[d].remove(f.domNode)}),this.attributes={}},v.prototype.values=function(){var m=this;return Object.keys(this.attributes).reduce(function(f,d){return f[d]=m.attributes[d].value(m.domNode),f},{})},v}();n.default=T},function(o,n,s){var a=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)m.hasOwnProperty(f)&&(v[f]=m[f])};return function(v,m){T(v,m);function f(){this.constructor=v}v.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(12);function u(T,v){var m=T.getAttribute("class")||"";return m.split(/\s+/).filter(function(f){return f.indexOf(v+"-")===0})}var p=function(T){a(v,T);function v(){return T!==null&&T.apply(this,arguments)||this}return v.keys=function(m){return(m.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},v.prototype.add=function(m,f){return this.canAdd(m,f)?(this.remove(m),m.classList.add(this.keyName+"-"+f),!0):!1},v.prototype.remove=function(m){var f=u(m,this.keyName);f.forEach(function(d){m.classList.remove(d)}),m.classList.length===0&&m.removeAttribute("class")},v.prototype.value=function(m){var f=u(m,this.keyName)[0]||"",d=f.slice(this.keyName.length+1);return this.canAdd(m,d)?d:""},v}(h.default);n.default=p},function(o,n,s){var a=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)m.hasOwnProperty(f)&&(v[f]=m[f])};return function(v,m){T(v,m);function f(){this.constructor=v}v.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(12);function u(T){var v=T.split("-"),m=v.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return v[0]+m}var p=function(T){a(v,T);function v(){return T!==null&&T.apply(this,arguments)||this}return v.keys=function(m){return(m.getAttribute("style")||"").split(";").map(function(f){var d=f.split(":");return d[0].trim()})},v.prototype.add=function(m,f){return this.canAdd(m,f)?(m.style[u(this.keyName)]=f,!0):!1},v.prototype.remove=function(m){m.style[u(this.keyName)]="",m.getAttribute("style")||m.removeAttribute("style")},v.prototype.value=function(m){var f=m.style[u(this.keyName)];return this.canAdd(m,f)?f:""},v}(h.default);n.default=p},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function p(T,v){for(var m=0;m<v.length;m++){var f=v[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}return function(T,v,m){return v&&p(T.prototype,v),m&&p(T,m),T}}();function h(p,T){if(!(p instanceof T))throw new TypeError("Cannot call a class as a function")}var u=function(){function p(T,v){h(this,p),this.quill=T,this.options=v,this.modules={}}return a(p,[{key:"init",value:function(){var v=this;Object.keys(this.options.modules).forEach(function(m){v.modules[m]==null&&v.addModule(m)})}},{key:"addModule",value:function(v){var m=this.quill.constructor.import("modules/"+v);return this.modules[v]=new m(this.quill,this.options.modules[v]||{}),this.modules[v]}}]),p}();u.DEFAULTS={modules:{}},u.themes={default:u},n.default=u},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function A(w,O){for(var k=0;k<O.length;k++){var S=O[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,O,k){return O&&A(w.prototype,O),k&&A(w,k),w}}(),h=function A(w,O,k){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,O);if(S===void 0){var R=Object.getPrototypeOf(w);return R===null?void 0:A(R,O,k)}else{if("value"in S)return S.value;var l=S.get;return l===void 0?void 0:l.call(k)}},u=s(0),p=m(u),T=s(7),v=m(T);function m(A){return A&&A.__esModule?A:{default:A}}function f(A,w){if(!(A instanceof w))throw new TypeError("Cannot call a class as a function")}function d(A,w){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:A}function b(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);A.prototype=Object.create(w&&w.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(A,w):A.__proto__=w)}var y="\uFEFF",_=function(A){b(w,A);function w(O){f(this,w);var k=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,O));return k.contentNode=document.createElement("span"),k.contentNode.setAttribute("contenteditable",!1),[].slice.call(k.domNode.childNodes).forEach(function(S){k.contentNode.appendChild(S)}),k.leftGuard=document.createTextNode(y),k.rightGuard=document.createTextNode(y),k.domNode.appendChild(k.leftGuard),k.domNode.appendChild(k.contentNode),k.domNode.appendChild(k.rightGuard),k}return a(w,[{key:"index",value:function(k,S){return k===this.leftGuard?0:k===this.rightGuard?1:h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,k,S)}},{key:"restore",value:function(k){var S=void 0,R=void 0,l=k.data.split(y).join("");if(k===this.leftGuard)if(this.prev instanceof v.default){var C=this.prev.length();this.prev.insertAt(C,l),S={startNode:this.prev.domNode,startOffset:C+l.length}}else R=document.createTextNode(l),this.parent.insertBefore(p.default.create(R),this),S={startNode:R,startOffset:l.length};else k===this.rightGuard&&(this.next instanceof v.default?(this.next.insertAt(0,l),S={startNode:this.next.domNode,startOffset:l.length}):(R=document.createTextNode(l),this.parent.insertBefore(p.default.create(R),this.next),S={startNode:R,startOffset:l.length}));return k.data=y,S}},{key:"update",value:function(k,S){var R=this;k.forEach(function(l){if(l.type==="characterData"&&(l.target===R.leftGuard||l.target===R.rightGuard)){var C=R.restore(l.target);C&&(S.range=C)}})}}]),w}(p.default.Embed);n.default=_},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var a=s(0),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}var p={scope:h.default.Scope.BLOCK,whitelist:["right","center","justify"]},T=new h.default.Attributor.Attribute("align","align",p),v=new h.default.Attributor.Class("align","ql-align",p),m=new h.default.Attributor.Style("align","text-align",p);n.AlignAttribute=T,n.AlignClass=v,n.AlignStyle=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var a=s(0),h=p(a),u=s(26);function p(m){return m&&m.__esModule?m:{default:m}}var T=new h.default.Attributor.Class("background","ql-bg",{scope:h.default.Scope.INLINE}),v=new u.ColorAttributor("background","background-color",{scope:h.default.Scope.INLINE});n.BackgroundClass=T,n.BackgroundStyle=v},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var a=s(0),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}var p={scope:h.default.Scope.BLOCK,whitelist:["rtl"]},T=new h.default.Attributor.Attribute("direction","dir",p),v=new h.default.Attributor.Class("direction","ql-direction",p),m=new h.default.Attributor.Style("direction","direction",p);n.DirectionAttribute=T,n.DirectionClass=v,n.DirectionStyle=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var a=function(){function A(w,O){for(var k=0;k<O.length;k++){var S=O[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,O,k){return O&&A(w.prototype,O),k&&A(w,k),w}}(),h=function A(w,O,k){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,O);if(S===void 0){var R=Object.getPrototypeOf(w);return R===null?void 0:A(R,O,k)}else{if("value"in S)return S.value;var l=S.get;return l===void 0?void 0:l.call(k)}},u=s(0),p=T(u);function T(A){return A&&A.__esModule?A:{default:A}}function v(A,w){if(!(A instanceof w))throw new TypeError("Cannot call a class as a function")}function m(A,w){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:A}function f(A,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);A.prototype=Object.create(w&&w.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(A,w):A.__proto__=w)}var d={scope:p.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new p.default.Attributor.Class("font","ql-font",d),y=function(A){f(w,A);function w(){return v(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"value",value:function(k){return h(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,k).replace(/["']/g,"")}}]),w}(p.default.Attributor.Style),_=new y("font","font-family",d);n.FontStyle=_,n.FontClass=b},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var a=s(0),h=u(a);function u(v){return v&&v.__esModule?v:{default:v}}var p=new h.default.Attributor.Class("size","ql-size",{scope:h.default.Scope.INLINE,whitelist:["small","large","huge"]}),T=new h.default.Attributor.Style("size","font-size",{scope:h.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=p,n.SizeStyle=T},function(o,n,s){o.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var a=function(){function O(k,S){for(var R=0;R<S.length;R++){var l=S[R];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(k,l.key,l)}}return function(k,S,R){return S&&O(k.prototype,S),R&&O(k,R),k}}(),h=s(0),u=f(h),p=s(5),T=f(p),v=s(9),m=f(v);function f(O){return O&&O.__esModule?O:{default:O}}function d(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function b(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:O}function y(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}var _=function(O){y(k,O);function k(S,R){d(this,k);var l=b(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,S,R));return l.lastRecorded=0,l.ignoreChange=!1,l.clear(),l.quill.on(T.default.events.EDITOR_CHANGE,function(C,M,P,N){C!==T.default.events.TEXT_CHANGE||l.ignoreChange||(!l.options.userOnly||N===T.default.sources.USER?l.record(M,P):l.transform(M))}),l.quill.keyboard.addBinding({key:"Z",shortKey:!0},l.undo.bind(l)),l.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},l.redo.bind(l)),/Win/i.test(navigator.platform)&&l.quill.keyboard.addBinding({key:"Y",shortKey:!0},l.redo.bind(l)),l}return a(k,[{key:"change",value:function(R,l){if(this.stack[R].length!==0){var C=this.stack[R].pop();this.stack[l].push(C),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(C[R],T.default.sources.USER),this.ignoreChange=!1;var M=w(C[R]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(R,l){if(R.ops.length!==0){this.stack.redo=[];var C=this.quill.getContents().diff(l),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var P=this.stack.undo.pop();C=C.compose(P.undo),R=P.redo.compose(R)}else this.lastRecorded=M;this.stack.undo.push({redo:R,undo:C}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(R){this.stack.undo.forEach(function(l){l.undo=R.transform(l.undo,!0),l.redo=R.transform(l.redo,!0)}),this.stack.redo.forEach(function(l){l.undo=R.transform(l.undo,!0),l.redo=R.transform(l.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),k}(m.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function A(O){var k=O.ops[O.ops.length-1];return k==null?!1:k.insert!=null?typeof k.insert=="string"&&k.insert.endsWith(`
`):k.attributes!=null?Object.keys(k.attributes).some(function(S){return u.default.query(S,u.default.Scope.BLOCK)!=null}):!1}function w(O){var k=O.reduce(function(R,l){return R+=l.delete||0,R},0),S=O.length()-k;return A(O)&&(S-=1),S}n.default=_,n.getLastChangeIndex=w},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var a=function(){function z(X,re){for(var J=0;J<re.length;J++){var W=re[J];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,re,J){return re&&z(X.prototype,re),J&&z(X,J),X}}(),h=function z(X,re,J){X===null&&(X=Function.prototype);var W=Object.getOwnPropertyDescriptor(X,re);if(W===void 0){var te=Object.getPrototypeOf(X);return te===null?void 0:z(te,re,J)}else{if("value"in W)return W.value;var se=W.get;return se===void 0?void 0:se.call(J)}},u=s(3),p=M(u),T=s(2),v=M(T),m=s(8),f=M(m),d=s(23),b=M(d),y=s(34),_=M(y),A=s(59),w=M(A),O=s(60),k=M(O),S=s(28),R=M(S),l=s(61),C=M(l);function M(z){return z&&z.__esModule?z:{default:z}}function P(z,X){if(!(z instanceof X))throw new TypeError("Cannot call a class as a function")}function N(z,X){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:z}function D(z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);z.prototype=Object.create(X&&X.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(z,X):z.__proto__=X)}var B=[!1,"center","right","justify"],F=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],G=[!1,"serif","monospace"],Y=["1","2","3",!1],H=["small",!1,"large","huge"],ee=function(z){D(X,z);function X(re,J){P(this,X);var W=N(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,re,J)),te=function se(oe){if(!document.body.contains(re.root))return document.body.removeEventListener("click",se);W.tooltip!=null&&!W.tooltip.root.contains(oe.target)&&document.activeElement!==W.tooltip.textbox&&!W.quill.hasFocus()&&W.tooltip.hide(),W.pickers!=null&&W.pickers.forEach(function(fe){fe.container.contains(oe.target)||fe.close()})};return re.emitter.listenDOM("click",document.body,te),W}return a(X,[{key:"addModule",value:function(J){var W=h(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"addModule",this).call(this,J);return J==="toolbar"&&this.extendToolbar(W),W}},{key:"buildButtons",value:function(J,W){J.forEach(function(te){var se=te.getAttribute("class")||"";se.split(/\s+/).forEach(function(oe){if(oe.startsWith("ql-")&&(oe=oe.slice(3),W[oe]!=null))if(oe==="direction")te.innerHTML=W[oe][""]+W[oe].rtl;else if(typeof W[oe]=="string")te.innerHTML=W[oe];else{var fe=te.value||"";fe!=null&&W[oe][fe]&&(te.innerHTML=W[oe][fe])}})})}},{key:"buildPickers",value:function(J,W){var te=this;this.pickers=J.map(function(oe){if(oe.classList.contains("ql-align"))return oe.querySelector("option")==null&&q(oe,B),new k.default(oe,W.align);if(oe.classList.contains("ql-background")||oe.classList.contains("ql-color")){var fe=oe.classList.contains("ql-background")?"background":"color";return oe.querySelector("option")==null&&q(oe,F,fe==="background"?"#ffffff":"#000000"),new w.default(oe,W[fe])}else return oe.querySelector("option")==null&&(oe.classList.contains("ql-font")?q(oe,G):oe.classList.contains("ql-header")?q(oe,Y):oe.classList.contains("ql-size")&&q(oe,H)),new R.default(oe)});var se=function(){te.pickers.forEach(function(fe){fe.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,se)}}]),X}(_.default);ee.DEFAULTS=(0,p.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var X=this,re=this.container.querySelector("input.ql-image[type=file]");re==null&&(re=document.createElement("input"),re.setAttribute("type","file"),re.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),re.classList.add("ql-image"),re.addEventListener("change",function(){if(re.files!=null&&re.files[0]!=null){var J=new FileReader;J.onload=function(W){var te=X.quill.getSelection(!0);X.quill.updateContents(new v.default().retain(te.index).delete(te.length).insert({image:W.target.result}),f.default.sources.USER),X.quill.setSelection(te.index+1,f.default.sources.SILENT),re.value=""},J.readAsDataURL(re.files[0])}}),this.container.appendChild(re)),re.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var V=function(z){D(X,z);function X(re,J){P(this,X);var W=N(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,re,J));return W.textbox=W.root.querySelector('input[type="text"]'),W.listen(),W}return a(X,[{key:"listen",value:function(){var J=this;this.textbox.addEventListener("keydown",function(W){b.default.match(W,"enter")?(J.save(),W.preventDefault()):b.default.match(W,"escape")&&(J.cancel(),W.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),W!=null?this.textbox.value=W:J!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+J)||""),this.root.setAttribute("data-mode",J)}},{key:"restoreFocus",value:function(){var J=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=J}},{key:"save",value:function(){var J=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var W=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",J,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",J,f.default.sources.USER)),this.quill.root.scrollTop=W;break}case"video":J=U(J);case"formula":{if(!J)break;var te=this.quill.getSelection(!0);if(te!=null){var se=te.index+te.length;this.quill.insertEmbed(se,this.root.getAttribute("data-mode"),J,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(se+1," ",f.default.sources.USER),this.quill.setSelection(se+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),X}(C.default);function U(z){var X=z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||z.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return X?(X[1]||"https")+"://www.youtube.com/embed/"+X[2]+"?showinfo=0":(X=z.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(X[1]||"https")+"://player.vimeo.com/video/"+X[2]+"/":z}function q(z,X){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;X.forEach(function(J){var W=document.createElement("option");J===re?W.setAttribute("selected","selected"):W.setAttribute("value",J),z.appendChild(W)})}n.BaseTooltip=V,n.default=ee},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function h(){this.head=this.tail=null,this.length=0}return h.prototype.append=function(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];this.insertBefore(u[0],null),u.length>1&&this.append.apply(this,u.slice(1))},h.prototype.contains=function(u){for(var p,T=this.iterator();p=T();)if(p===u)return!0;return!1},h.prototype.insertBefore=function(u,p){u&&(u.next=p,p!=null?(u.prev=p.prev,p.prev!=null&&(p.prev.next=u),p.prev=u,p===this.head&&(this.head=u)):this.tail!=null?(this.tail.next=u,u.prev=this.tail,this.tail=u):(u.prev=null,this.head=this.tail=u),this.length+=1)},h.prototype.offset=function(u){for(var p=0,T=this.head;T!=null;){if(T===u)return p;p+=T.length(),T=T.next}return-1},h.prototype.remove=function(u){this.contains(u)&&(u.prev!=null&&(u.prev.next=u.next),u.next!=null&&(u.next.prev=u.prev),u===this.head&&(this.head=u.next),u===this.tail&&(this.tail=u.prev),this.length-=1)},h.prototype.iterator=function(u){return u===void 0&&(u=this.head),function(){var p=u;return u!=null&&(u=u.next),p}},h.prototype.find=function(u,p){p===void 0&&(p=!1);for(var T,v=this.iterator();T=v();){var m=T.length();if(u<m||p&&u===m&&(T.next==null||T.next.length()!==0))return[T,u];u-=m}return[null,0]},h.prototype.forEach=function(u){for(var p,T=this.iterator();p=T();)u(p)},h.prototype.forEachAt=function(u,p,T){if(!(p<=0))for(var v=this.find(u),m=v[0],f=v[1],d,b=u-f,y=this.iterator(m);(d=y())&&b<u+p;){var _=d.length();u>b?T(d,u-b,Math.min(p,b+_-u)):T(d,0,Math.min(_,u+p-b)),b+=_}},h.prototype.map=function(u){return this.reduce(function(p,T){return p.push(u(T)),p},[])},h.prototype.reduce=function(u,p){for(var T,v=this.iterator();T=v();)p=u(p,T);return p},h}();n.default=a},function(o,n,s){var a=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var b in d)d.hasOwnProperty(b)&&(f[b]=d[b])};return function(f,d){m(f,d);function b(){this.constructor=f}f.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(17),u=s(1),p={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},T=100,v=function(m){a(f,m);function f(d){var b=m.call(this,d)||this;return b.scroll=b,b.observer=new MutationObserver(function(y){b.update(y)}),b.observer.observe(b.domNode,p),b.attach(),b}return f.prototype.detach=function(){m.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(d,b){this.update(),d===0&&b===this.length()?this.children.forEach(function(y){y.remove()}):m.prototype.deleteAt.call(this,d,b)},f.prototype.formatAt=function(d,b,y,_){this.update(),m.prototype.formatAt.call(this,d,b,y,_)},f.prototype.insertAt=function(d,b,y){this.update(),m.prototype.insertAt.call(this,d,b,y)},f.prototype.optimize=function(d,b){var y=this;d===void 0&&(d=[]),b===void 0&&(b={}),m.prototype.optimize.call(this,b);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)d.push(_.pop());for(var A=function(S,R){R===void 0&&(R=!0),!(S==null||S===y)&&S.domNode.parentNode!=null&&(S.domNode[u.DATA_KEY].mutations==null&&(S.domNode[u.DATA_KEY].mutations=[]),R&&A(S.parent))},w=function(S){S.domNode[u.DATA_KEY]==null||S.domNode[u.DATA_KEY].mutations==null||(S instanceof h.default&&S.children.forEach(w),S.optimize(b))},O=d,k=0;O.length>0;k+=1){if(k>=T)throw new Error("[Parchment] Maximum optimize iterations reached");for(O.forEach(function(S){var R=u.find(S.target,!0);R!=null&&(R.domNode===S.target&&(S.type==="childList"?(A(u.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(l){var C=u.find(l,!1);A(C,!1),C instanceof h.default&&C.children.forEach(function(M){A(M,!1)})})):S.type==="attributes"&&A(R.prev)),A(R))}),this.children.forEach(w),O=[].slice.call(this.observer.takeRecords()),_=O.slice();_.length>0;)d.push(_.pop())}},f.prototype.update=function(d,b){var y=this;b===void 0&&(b={}),d=d||this.observer.takeRecords(),d.map(function(_){var A=u.find(_.target,!0);return A==null?null:A.domNode[u.DATA_KEY].mutations==null?(A.domNode[u.DATA_KEY].mutations=[_],A):(A.domNode[u.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_==null||_===y||_.domNode[u.DATA_KEY]==null||_.update(_.domNode[u.DATA_KEY].mutations||[],b)}),this.domNode[u.DATA_KEY].mutations!=null&&m.prototype.update.call(this,this.domNode[u.DATA_KEY].mutations,b),this.optimize(d,b)},f.blotName="scroll",f.defaultChild="block",f.scope=u.Scope.BLOCK_BLOT,f.tagName="DIV",f}(h.default);n.default=v},function(o,n,s){var a=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var d in f)f.hasOwnProperty(d)&&(m[d]=f[d])};return function(m,f){v(m,f);function d(){this.constructor=m}m.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(18),u=s(1);function p(v,m){if(Object.keys(v).length!==Object.keys(m).length)return!1;for(var f in v)if(v[f]!==m[f])return!1;return!0}var T=function(v){a(m,v);function m(){return v!==null&&v.apply(this,arguments)||this}return m.formats=function(f){if(f.tagName!==m.tagName)return v.formats.call(this,f)},m.prototype.format=function(f,d){var b=this;f===this.statics.blotName&&!d?(this.children.forEach(function(y){y instanceof h.default||(y=y.wrap(m.blotName,!0)),b.attributes.copy(y)}),this.unwrap()):v.prototype.format.call(this,f,d)},m.prototype.formatAt=function(f,d,b,y){if(this.formats()[b]!=null||u.query(b,u.Scope.ATTRIBUTE)){var _=this.isolate(f,d);_.format(b,y)}else v.prototype.formatAt.call(this,f,d,b,y)},m.prototype.optimize=function(f){v.prototype.optimize.call(this,f);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var b=this.next;b instanceof m&&b.prev===this&&p(d,b.formats())&&(b.moveChildren(this),b.remove())},m.blotName="inline",m.scope=u.Scope.INLINE_BLOT,m.tagName="SPAN",m}(h.default);n.default=T},function(o,n,s){var a=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)m.hasOwnProperty(f)&&(v[f]=m[f])};return function(v,m){T(v,m);function f(){this.constructor=v}v.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(18),u=s(1),p=function(T){a(v,T);function v(){return T!==null&&T.apply(this,arguments)||this}return v.formats=function(m){var f=u.query(v.blotName).tagName;if(m.tagName!==f)return T.formats.call(this,m)},v.prototype.format=function(m,f){u.query(m,u.Scope.BLOCK)!=null&&(m===this.statics.blotName&&!f?this.replaceWith(v.blotName):T.prototype.format.call(this,m,f))},v.prototype.formatAt=function(m,f,d,b){u.query(d,u.Scope.BLOCK)!=null?this.format(d,b):T.prototype.formatAt.call(this,m,f,d,b)},v.prototype.insertAt=function(m,f,d){if(d==null||u.query(f,u.Scope.INLINE)!=null)T.prototype.insertAt.call(this,m,f,d);else{var b=this.split(m),y=u.create(f,d);b.parent.insertBefore(y,b)}},v.prototype.update=function(m,f){navigator.userAgent.match(/Trident/)?this.build():T.prototype.update.call(this,m,f)},v.blotName="block",v.scope=u.Scope.BLOCK_BLOT,v.tagName="P",v}(h.default);n.default=p},function(o,n,s){var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,v){T.__proto__=v}||function(T,v){for(var m in v)v.hasOwnProperty(m)&&(T[m]=v[m])};return function(T,v){p(T,v);function m(){this.constructor=T}T.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(19),u=function(p){a(T,p);function T(){return p!==null&&p.apply(this,arguments)||this}return T.formats=function(v){},T.prototype.format=function(v,m){p.prototype.formatAt.call(this,0,this.length(),v,m)},T.prototype.formatAt=function(v,m,f,d){v===0&&m===this.length()?this.format(f,d):p.prototype.formatAt.call(this,v,m,f,d)},T.prototype.formats=function(){return this.statics.formats(this.domNode)},T}(h.default);n.default=u},function(o,n,s){var a=this&&this.__extends||function(){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)m.hasOwnProperty(f)&&(v[f]=m[f])};return function(v,m){T(v,m);function f(){this.constructor=v}v.prototype=m===null?Object.create(m):(f.prototype=m.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var h=s(19),u=s(1),p=function(T){a(v,T);function v(m){var f=T.call(this,m)||this;return f.text=f.statics.value(f.domNode),f}return v.create=function(m){return document.createTextNode(m)},v.value=function(m){var f=m.data;return f.normalize&&(f=f.normalize()),f},v.prototype.deleteAt=function(m,f){this.domNode.data=this.text=this.text.slice(0,m)+this.text.slice(m+f)},v.prototype.index=function(m,f){return this.domNode===m?f:-1},v.prototype.insertAt=function(m,f,d){d==null?(this.text=this.text.slice(0,m)+f+this.text.slice(m),this.domNode.data=this.text):T.prototype.insertAt.call(this,m,f,d)},v.prototype.length=function(){return this.text.length},v.prototype.optimize=function(m){T.prototype.optimize.call(this,m),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof v&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},v.prototype.position=function(m,f){return[this.domNode,m]},v.prototype.split=function(m,f){if(f===void 0&&(f=!1),!f){if(m===0)return this;if(m===this.length())return this.next}var d=u.create(this.domNode.splitText(m));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},v.prototype.update=function(m,f){var d=this;m.some(function(b){return b.type==="characterData"&&b.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},v.prototype.value=function(){return this.text},v.blotName="text",v.scope=u.Scope.INLINE_BLOT,v}(h.default);n.default=p},function(o,n,s){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var h=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(u,p){return arguments.length>1&&!this.contains(u)==!p?p:h.call(this,u)}}String.prototype.startsWith||(String.prototype.startsWith=function(u,p){return p=p||0,this.substr(p,u.length)===u}),String.prototype.endsWith||(String.prototype.endsWith=function(u,p){var T=this.toString();(typeof p!="number"||!isFinite(p)||Math.floor(p)!==p||p>T.length)&&(p=T.length),p-=u.length;var v=T.indexOf(u,p);return v!==-1&&v===p}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(p){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof p!="function")throw new TypeError("predicate must be a function");for(var T=Object(this),v=T.length>>>0,m=arguments[1],f,d=0;d<v;d++)if(f=T[d],p.call(m,f,d,T))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(o,n){var s=-1,a=1,h=0;function u(k,S,R){if(k==S)return k?[[h,k]]:[];(R<0||k.length<R)&&(R=null);var l=m(k,S),C=k.substring(0,l);k=k.substring(l),S=S.substring(l),l=f(k,S);var M=k.substring(k.length-l);k=k.substring(0,k.length-l),S=S.substring(0,S.length-l);var P=p(k,S);return C&&P.unshift([h,C]),M&&P.push([h,M]),b(P),R!=null&&(P=A(P,R)),P=w(P),P}function p(k,S){var R;if(!k)return[[a,S]];if(!S)return[[s,k]];var l=k.length>S.length?k:S,C=k.length>S.length?S:k,M=l.indexOf(C);if(M!=-1)return R=[[a,l.substring(0,M)],[h,C],[a,l.substring(M+C.length)]],k.length>S.length&&(R[0][0]=R[2][0]=s),R;if(C.length==1)return[[s,k],[a,S]];var P=d(k,S);if(P){var N=P[0],D=P[1],B=P[2],F=P[3],G=P[4],Y=u(N,B),H=u(D,F);return Y.concat([[h,G]],H)}return T(k,S)}function T(k,S){for(var R=k.length,l=S.length,C=Math.ceil((R+l)/2),M=C,P=2*C,N=new Array(P),D=new Array(P),B=0;B<P;B++)N[B]=-1,D[B]=-1;N[M+1]=0,D[M+1]=0;for(var F=R-l,G=F%2!=0,Y=0,H=0,ee=0,V=0,U=0;U<C;U++){for(var q=-U+Y;q<=U-H;q+=2){var z=M+q,X;q==-U||q!=U&&N[z-1]<N[z+1]?X=N[z+1]:X=N[z-1]+1;for(var re=X-q;X<R&&re<l&&k.charAt(X)==S.charAt(re);)X++,re++;if(N[z]=X,X>R)H+=2;else if(re>l)Y+=2;else if(G){var J=M+F-q;if(J>=0&&J<P&&D[J]!=-1){var W=R-D[J];if(X>=W)return v(k,S,X,re)}}}for(var te=-U+ee;te<=U-V;te+=2){var J=M+te,W;te==-U||te!=U&&D[J-1]<D[J+1]?W=D[J+1]:W=D[J-1]+1;for(var se=W-te;W<R&&se<l&&k.charAt(R-W-1)==S.charAt(l-se-1);)W++,se++;if(D[J]=W,W>R)V+=2;else if(se>l)ee+=2;else if(!G){var z=M+F-te;if(z>=0&&z<P&&N[z]!=-1){var X=N[z],re=M+X-z;if(W=R-W,X>=W)return v(k,S,X,re)}}}}return[[s,k],[a,S]]}function v(k,S,R,l){var C=k.substring(0,R),M=S.substring(0,l),P=k.substring(R),N=S.substring(l),D=u(C,M),B=u(P,N);return D.concat(B)}function m(k,S){if(!k||!S||k.charAt(0)!=S.charAt(0))return 0;for(var R=0,l=Math.min(k.length,S.length),C=l,M=0;R<C;)k.substring(M,C)==S.substring(M,C)?(R=C,M=R):l=C,C=Math.floor((l-R)/2+R);return C}function f(k,S){if(!k||!S||k.charAt(k.length-1)!=S.charAt(S.length-1))return 0;for(var R=0,l=Math.min(k.length,S.length),C=l,M=0;R<C;)k.substring(k.length-C,k.length-M)==S.substring(S.length-C,S.length-M)?(R=C,M=R):l=C,C=Math.floor((l-R)/2+R);return C}function d(k,S){var R=k.length>S.length?k:S,l=k.length>S.length?S:k;if(R.length<4||l.length*2<R.length)return null;function C(H,ee,V){for(var U=H.substring(V,V+Math.floor(H.length/4)),q=-1,z="",X,re,J,W;(q=ee.indexOf(U,q+1))!=-1;){var te=m(H.substring(V),ee.substring(q)),se=f(H.substring(0,V),ee.substring(0,q));z.length<se+te&&(z=ee.substring(q-se,q)+ee.substring(q,q+te),X=H.substring(0,V-se),re=H.substring(V+te),J=ee.substring(0,q-se),W=ee.substring(q+te))}return z.length*2>=H.length?[X,re,J,W,z]:null}var M=C(R,l,Math.ceil(R.length/4)),P=C(R,l,Math.ceil(R.length/2)),N;if(!M&&!P)return null;P?M?N=M[4].length>P[4].length?M:P:N=P:N=M;var D,B,F,G;k.length>S.length?(D=N[0],B=N[1],F=N[2],G=N[3]):(F=N[0],G=N[1],D=N[2],B=N[3]);var Y=N[4];return[D,B,F,G,Y]}function b(k){k.push([h,""]);for(var S=0,R=0,l=0,C="",M="",P;S<k.length;)switch(k[S][0]){case a:l++,M+=k[S][1],S++;break;case s:R++,C+=k[S][1],S++;break;case h:R+l>1?(R!==0&&l!==0&&(P=m(M,C),P!==0&&(S-R-l>0&&k[S-R-l-1][0]==h?k[S-R-l-1][1]+=M.substring(0,P):(k.splice(0,0,[h,M.substring(0,P)]),S++),M=M.substring(P),C=C.substring(P)),P=f(M,C),P!==0&&(k[S][1]=M.substring(M.length-P)+k[S][1],M=M.substring(0,M.length-P),C=C.substring(0,C.length-P))),R===0?k.splice(S-l,R+l,[a,M]):l===0?k.splice(S-R,R+l,[s,C]):k.splice(S-R-l,R+l,[s,C],[a,M]),S=S-R-l+(R?1:0)+(l?1:0)+1):S!==0&&k[S-1][0]==h?(k[S-1][1]+=k[S][1],k.splice(S,1)):S++,l=0,R=0,C="",M="";break}k[k.length-1][1]===""&&k.pop();var N=!1;for(S=1;S<k.length-1;)k[S-1][0]==h&&k[S+1][0]==h&&(k[S][1].substring(k[S][1].length-k[S-1][1].length)==k[S-1][1]?(k[S][1]=k[S-1][1]+k[S][1].substring(0,k[S][1].length-k[S-1][1].length),k[S+1][1]=k[S-1][1]+k[S+1][1],k.splice(S-1,1),N=!0):k[S][1].substring(0,k[S+1][1].length)==k[S+1][1]&&(k[S-1][1]+=k[S+1][1],k[S][1]=k[S][1].substring(k[S+1][1].length)+k[S+1][1],k.splice(S+1,1),N=!0)),S++;N&&b(k)}var y=u;y.INSERT=a,y.DELETE=s,y.EQUAL=h,o.exports=y;function _(k,S){if(S===0)return[h,k];for(var R=0,l=0;l<k.length;l++){var C=k[l];if(C[0]===s||C[0]===h){var M=R+C[1].length;if(S===M)return[l+1,k];if(S<M){k=k.slice();var P=S-R,N=[C[0],C[1].slice(0,P)],D=[C[0],C[1].slice(P)];return k.splice(l,1,N,D),[l+1,k]}else R=M}}throw new Error("cursor_pos is out of bounds!")}function A(k,S){var R=_(k,S),l=R[1],C=R[0],M=l[C],P=l[C+1];if(M==null)return k;if(M[0]!==h)return k;if(P!=null&&M[1]+P[1]===P[1]+M[1])return l.splice(C,2,P,M),O(l,C,2);if(P!=null&&P[1].indexOf(M[1])===0){l.splice(C,2,[P[0],M[1]],[0,M[1]]);var N=P[1].slice(M[1].length);return N.length>0&&l.splice(C+2,0,[P[0],N]),O(l,C,3)}else return k}function w(k){for(var S=!1,R=function(P){return P.charCodeAt(0)>=56320&&P.charCodeAt(0)<=57343},l=function(P){return P.charCodeAt(P.length-1)>=55296&&P.charCodeAt(P.length-1)<=56319},C=2;C<k.length;C+=1)k[C-2][0]===h&&l(k[C-2][1])&&k[C-1][0]===s&&R(k[C-1][1])&&k[C][0]===a&&R(k[C][1])&&(S=!0,k[C-1][1]=k[C-2][1].slice(-1)+k[C-1][1],k[C][1]=k[C-2][1].slice(-1)+k[C][1],k[C-2][1]=k[C-2][1].slice(0,-1));if(!S)return k;for(var M=[],C=0;C<k.length;C+=1)k[C][1].length>0&&M.push(k[C]);return M}function O(k,S,R){for(var l=S+R-1;l>=0&&l>=S-1;l--)if(l+1<k.length){var C=k[l],M=k[l+1];C[0]===M[1]&&k.splice(l,2,[C[0],C[1]+M[1]])}return k}},function(o,n){n=o.exports=typeof Object.keys=="function"?Object.keys:s,n.shim=s;function s(a){var h=[];for(var u in a)h.push(u);return h}},function(o,n){var s=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=o.exports=s?a:h,n.supported=a;function a(u){return Object.prototype.toString.call(u)=="[object Arguments]"}n.unsupported=h;function h(u){return u&&typeof u=="object"&&typeof u.length=="number"&&Object.prototype.hasOwnProperty.call(u,"callee")&&!Object.prototype.propertyIsEnumerable.call(u,"callee")||!1}},function(o,n){var s=Object.prototype.hasOwnProperty,a="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(a=!1));function u(T,v,m){this.fn=T,this.context=v,this.once=m||!1}function p(){this._events=new h,this._eventsCount=0}p.prototype.eventNames=function(){var v=[],m,f;if(this._eventsCount===0)return v;for(f in m=this._events)s.call(m,f)&&v.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(m)):v},p.prototype.listeners=function(v,m){var f=a?a+v:v,d=this._events[f];if(m)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var b=0,y=d.length,_=new Array(y);b<y;b++)_[b]=d[b].fn;return _},p.prototype.emit=function(v,m,f,d,b,y){var _=a?a+v:v;if(!this._events[_])return!1;var A=this._events[_],w=arguments.length,O,k;if(A.fn){switch(A.once&&this.removeListener(v,A.fn,void 0,!0),w){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,m),!0;case 3:return A.fn.call(A.context,m,f),!0;case 4:return A.fn.call(A.context,m,f,d),!0;case 5:return A.fn.call(A.context,m,f,d,b),!0;case 6:return A.fn.call(A.context,m,f,d,b,y),!0}for(k=1,O=new Array(w-1);k<w;k++)O[k-1]=arguments[k];A.fn.apply(A.context,O)}else{var S=A.length,R;for(k=0;k<S;k++)switch(A[k].once&&this.removeListener(v,A[k].fn,void 0,!0),w){case 1:A[k].fn.call(A[k].context);break;case 2:A[k].fn.call(A[k].context,m);break;case 3:A[k].fn.call(A[k].context,m,f);break;case 4:A[k].fn.call(A[k].context,m,f,d);break;default:if(!O)for(R=1,O=new Array(w-1);R<w;R++)O[R-1]=arguments[R];A[k].fn.apply(A[k].context,O)}}return!0},p.prototype.on=function(v,m,f){var d=new u(m,f||this),b=a?a+v:v;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],d]:this._events[b].push(d):(this._events[b]=d,this._eventsCount++),this},p.prototype.once=function(v,m,f){var d=new u(m,f||this,!0),b=a?a+v:v;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],d]:this._events[b].push(d):(this._events[b]=d,this._eventsCount++),this},p.prototype.removeListener=function(v,m,f,d){var b=a?a+v:v;if(!this._events[b])return this;if(!m)return--this._eventsCount===0?this._events=new h:delete this._events[b],this;var y=this._events[b];if(y.fn)y.fn===m&&(!d||y.once)&&(!f||y.context===f)&&(--this._eventsCount===0?this._events=new h:delete this._events[b]);else{for(var _=0,A=[],w=y.length;_<w;_++)(y[_].fn!==m||d&&!y[_].once||f&&y[_].context!==f)&&A.push(y[_]);A.length?this._events[b]=A.length===1?A[0]:A:--this._eventsCount===0?this._events=new h:delete this._events[b]}return this},p.prototype.removeAllListeners=function(v){var m;return v?(m=a?a+v:v,this._events[m]&&(--this._eventsCount===0?this._events=new h:delete this._events[m])):(this._events=new h,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prototype.setMaxListeners=function(){return this},p.prefixed=a,p.EventEmitter=p,typeof o<"u"&&(o.exports=p)},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},h=function(){function he(me,Te){var Oe=[],ge=!0,Be=!1,Re=void 0;try{for(var Ae=me[Symbol.iterator](),ut;!(ge=(ut=Ae.next()).done)&&(Oe.push(ut.value),!(Te&&Oe.length===Te));ge=!0);}catch(Ht){Be=!0,Re=Ht}finally{try{!ge&&Ae.return&&Ae.return()}finally{if(Be)throw Re}}return Oe}return function(me,Te){if(Array.isArray(me))return me;if(Symbol.iterator in Object(me))return he(me,Te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function he(me,Te){for(var Oe=0;Oe<Te.length;Oe++){var ge=Te[Oe];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(me,ge.key,ge)}}return function(me,Te,Oe){return Te&&he(me.prototype,Te),Oe&&he(me,Oe),me}}(),p=s(3),T=D(p),v=s(2),m=D(v),f=s(0),d=D(f),b=s(5),y=D(b),_=s(10),A=D(_),w=s(9),O=D(w),k=s(36),S=s(37),R=s(13),l=D(R),C=s(26),M=s(38),P=s(39),N=s(40);function D(he){return he&&he.__esModule?he:{default:he}}function B(he,me,Te){return me in he?Object.defineProperty(he,me,{value:Te,enumerable:!0,configurable:!0,writable:!0}):he[me]=Te,he}function F(he,me){if(!(he instanceof me))throw new TypeError("Cannot call a class as a function")}function G(he,me){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me&&(typeof me=="object"||typeof me=="function")?me:he}function Y(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof me);he.prototype=Object.create(me&&me.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),me&&(Object.setPrototypeOf?Object.setPrototypeOf(he,me):he.__proto__=me)}var H=(0,A.default)("quill:clipboard"),ee="__ql-matcher",V=[[Node.TEXT_NODE,lt],[Node.TEXT_NODE,Ue],["br",Ee],[Node.ELEMENT_NODE,Ue],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,ot],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,Tt],["li",Le],["b",se.bind(se,"bold")],["i",se.bind(se,"italic")],["style",Pe]],U=[k.AlignAttribute,M.DirectionAttribute].reduce(function(he,me){return he[me.keyName]=me,he},{}),q=[k.AlignStyle,S.BackgroundStyle,C.ColorStyle,M.DirectionStyle,P.FontStyle,N.SizeStyle].reduce(function(he,me){return he[me.keyName]=me,he},{}),z=function(he){Y(me,he);function me(Te,Oe){F(this,me);var ge=G(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,Te,Oe));return ge.quill.root.addEventListener("paste",ge.onPaste.bind(ge)),ge.container=ge.quill.addContainer("ql-clipboard"),ge.container.setAttribute("contenteditable",!0),ge.container.setAttribute("tabindex",-1),ge.matchers=[],V.concat(ge.options.matchers).forEach(function(Be){var Re=h(Be,2),Ae=Re[0],ut=Re[1];!Oe.matchVisual&&ut===ot||ge.addMatcher(Ae,ut)}),ge}return u(me,[{key:"addMatcher",value:function(Oe,ge){this.matchers.push([Oe,ge])}},{key:"convert",value:function(Oe){if(typeof Oe=="string")return this.container.innerHTML=Oe.replace(/\>\r?\n +\</g,"><"),this.convert();var ge=this.quill.getFormat(this.quill.selection.savedRange.index);if(ge[l.default.blotName]){var Be=this.container.innerText;return this.container.innerHTML="",new m.default().insert(Be,B({},l.default.blotName,ge[l.default.blotName]))}var Re=this.prepareMatching(),Ae=h(Re,2),ut=Ae[0],Ht=Ae[1],pt=te(this.container,ut,Ht);return J(pt,`
`)&&pt.ops[pt.ops.length-1].attributes==null&&(pt=pt.compose(new m.default().retain(pt.length()-1).delete(1))),H.log("convert",this.container.innerHTML,pt),this.container.innerHTML="",pt}},{key:"dangerouslyPasteHTML",value:function(Oe,ge){var Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof Oe=="string")this.quill.setContents(this.convert(Oe),ge),this.quill.setSelection(0,y.default.sources.SILENT);else{var Re=this.convert(ge);this.quill.updateContents(new m.default().retain(Oe).concat(Re),Be),this.quill.setSelection(Oe+Re.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(Oe){var ge=this;if(!(Oe.defaultPrevented||!this.quill.isEnabled())){var Be=this.quill.getSelection(),Re=new m.default().retain(Be.index),Ae=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){Re=Re.concat(ge.convert()).delete(Be.length),ge.quill.updateContents(Re,y.default.sources.USER),ge.quill.setSelection(Re.length()-Be.length,y.default.sources.SILENT),ge.quill.scrollingContainer.scrollTop=Ae,ge.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Oe=this,ge=[],Be=[];return this.matchers.forEach(function(Re){var Ae=h(Re,2),ut=Ae[0],Ht=Ae[1];switch(ut){case Node.TEXT_NODE:Be.push(Ht);break;case Node.ELEMENT_NODE:ge.push(Ht);break;default:[].forEach.call(Oe.container.querySelectorAll(ut),function(pt){pt[ee]=pt[ee]||[],pt[ee].push(Ht)});break}}),[ge,Be]}}]),me}(O.default);z.DEFAULTS={matchers:[],matchVisual:!0};function X(he,me,Te){return(typeof me>"u"?"undefined":a(me))==="object"?Object.keys(me).reduce(function(Oe,ge){return X(Oe,ge,me[ge])},he):he.reduce(function(Oe,ge){return ge.attributes&&ge.attributes[me]?Oe.push(ge):Oe.insert(ge.insert,(0,T.default)({},B({},me,Te),ge.attributes))},new m.default)}function re(he){if(he.nodeType!==Node.ELEMENT_NODE)return{};var me="__ql-computed-style";return he[me]||(he[me]=window.getComputedStyle(he))}function J(he,me){for(var Te="",Oe=he.ops.length-1;Oe>=0&&Te.length<me.length;--Oe){var ge=he.ops[Oe];if(typeof ge.insert!="string")break;Te=ge.insert+Te}return Te.slice(-1*me.length)===me}function W(he){if(he.childNodes.length===0)return!1;var me=re(he);return["block","list-item"].indexOf(me.display)>-1}function te(he,me,Te){return he.nodeType===he.TEXT_NODE?Te.reduce(function(Oe,ge){return ge(he,Oe)},new m.default):he.nodeType===he.ELEMENT_NODE?[].reduce.call(he.childNodes||[],function(Oe,ge){var Be=te(ge,me,Te);return ge.nodeType===he.ELEMENT_NODE&&(Be=me.reduce(function(Re,Ae){return Ae(ge,Re)},Be),Be=(ge[ee]||[]).reduce(function(Re,Ae){return Ae(ge,Re)},Be)),Oe.concat(Be)},new m.default):new m.default}function se(he,me,Te){return X(Te,he,!0)}function oe(he,me){var Te=d.default.Attributor.Attribute.keys(he),Oe=d.default.Attributor.Class.keys(he),ge=d.default.Attributor.Style.keys(he),Be={};return Te.concat(Oe).concat(ge).forEach(function(Re){var Ae=d.default.query(Re,d.default.Scope.ATTRIBUTE);Ae!=null&&(Be[Ae.attrName]=Ae.value(he),Be[Ae.attrName])||(Ae=U[Re],Ae!=null&&(Ae.attrName===Re||Ae.keyName===Re)&&(Be[Ae.attrName]=Ae.value(he)||void 0),Ae=q[Re],Ae!=null&&(Ae.attrName===Re||Ae.keyName===Re)&&(Ae=q[Re],Be[Ae.attrName]=Ae.value(he)||void 0))}),Object.keys(Be).length>0&&(me=X(me,Be)),me}function fe(he,me){var Te=d.default.query(he);if(Te==null)return me;if(Te.prototype instanceof d.default.Embed){var Oe={},ge=Te.value(he);ge!=null&&(Oe[Te.blotName]=ge,me=new m.default().insert(Oe,Te.formats(he)))}else typeof Te.formats=="function"&&(me=X(me,Te.blotName,Te.formats(he)));return me}function Ee(he,me){return J(me,`
`)||me.insert(`
`),me}function Pe(){return new m.default}function Le(he,me){var Te=d.default.query(he);if(Te==null||Te.blotName!=="list-item"||!J(me,`
`))return me;for(var Oe=-1,ge=he.parentNode;!ge.classList.contains("ql-clipboard");)(d.default.query(ge)||{}).blotName==="list"&&(Oe+=1),ge=ge.parentNode;return Oe<=0?me:me.compose(new m.default().retain(me.length()-1).retain(1,{indent:Oe}))}function Ue(he,me){return J(me,`
`)||(W(he)||me.length()>0&&he.nextSibling&&W(he.nextSibling))&&me.insert(`
`),me}function ot(he,me){if(W(he)&&he.nextElementSibling!=null&&!J(me,`

`)){var Te=he.offsetHeight+parseFloat(re(he).marginTop)+parseFloat(re(he).marginBottom);he.nextElementSibling.offsetTop>he.offsetTop+Te*1.5&&me.insert(`
`)}return me}function Tt(he,me){var Te={},Oe=he.style||{};return Oe.fontStyle&&re(he).fontStyle==="italic"&&(Te.italic=!0),Oe.fontWeight&&(re(he).fontWeight.startsWith("bold")||parseInt(re(he).fontWeight)>=700)&&(Te.bold=!0),Object.keys(Te).length>0&&(me=X(me,Te)),parseFloat(Oe.textIndent||0)>0&&(me=new m.default().insert("	").concat(me)),me}function lt(he,me){var Te=he.data;if(he.parentNode.tagName==="O:P")return me.insert(Te.trim());if(Te.trim().length===0&&he.parentNode.classList.contains("ql-clipboard"))return me;if(!re(he.parentNode).whiteSpace.startsWith("pre")){var Oe=function(Be,Re){return Re=Re.replace(/[^\u00a0]/g,""),Re.length<1&&Be?" ":Re};Te=Te.replace(/\r\n/g," ").replace(/\n/g," "),Te=Te.replace(/\s\s+/g,Oe.bind(Oe,!0)),(he.previousSibling==null&&W(he.parentNode)||he.previousSibling!=null&&W(he.previousSibling))&&(Te=Te.replace(/^\s+/,Oe.bind(Oe,!1))),(he.nextSibling==null&&W(he.parentNode)||he.nextSibling!=null&&W(he.nextSibling))&&(Te=Te.replace(/\s+$/,Oe.bind(Oe,!1)))}return me.insert(Te)}n.default=z,n.matchAttributor=oe,n.matchBlot=fe,n.matchNewline=Ue,n.matchSpacing=ot,n.matchText=lt},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(y,_){for(var A=0;A<_.length;A++){var w=_[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,A){return _&&b(y.prototype,_),A&&b(y,A),y}}(),h=function b(y,_,A){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:b(O,_,A)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(A)}},u=s(6),p=T(u);function T(b){return b&&b.__esModule?b:{default:b}}function v(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function m(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function f(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var d=function(b){f(y,b);function y(){return v(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"optimize",value:function(A){h(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,A),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return h(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(p.default);d.blotName="bold",d.tagName=["STRONG","B"],n.default=d},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var a=function(){function N(D,B){var F=[],G=!0,Y=!1,H=void 0;try{for(var ee=D[Symbol.iterator](),V;!(G=(V=ee.next()).done)&&(F.push(V.value),!(B&&F.length===B));G=!0);}catch(U){Y=!0,H=U}finally{try{!G&&ee.return&&ee.return()}finally{if(Y)throw H}}return F}return function(D,B){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return N(D,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function N(D,B){for(var F=0;F<B.length;F++){var G=B[F];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,B,F){return B&&N(D.prototype,B),F&&N(D,F),D}}(),u=s(2),p=A(u),T=s(0),v=A(T),m=s(5),f=A(m),d=s(10),b=A(d),y=s(9),_=A(y);function A(N){return N&&N.__esModule?N:{default:N}}function w(N,D,B){return D in N?Object.defineProperty(N,D,{value:B,enumerable:!0,configurable:!0,writable:!0}):N[D]=B,N}function O(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function k(N,D){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:N}function S(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);N.prototype=Object.create(D&&D.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(N,D):N.__proto__=D)}var R=(0,b.default)("quill:toolbar"),l=function(N){S(D,N);function D(B,F){O(this,D);var G=k(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,B,F));if(Array.isArray(G.options.container)){var Y=document.createElement("div");M(Y,G.options.container),B.container.parentNode.insertBefore(Y,B.container),G.container=Y}else typeof G.options.container=="string"?G.container=document.querySelector(G.options.container):G.container=G.options.container;if(!(G.container instanceof HTMLElement)){var H;return H=R.error("Container required for toolbar",G.options),k(G,H)}return G.container.classList.add("ql-toolbar"),G.controls=[],G.handlers={},Object.keys(G.options.handlers).forEach(function(ee){G.addHandler(ee,G.options.handlers[ee])}),[].forEach.call(G.container.querySelectorAll("button, select"),function(ee){G.attach(ee)}),G.quill.on(f.default.events.EDITOR_CHANGE,function(ee,V){ee===f.default.events.SELECTION_CHANGE&&G.update(V)}),G.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var ee=G.quill.selection.getRange(),V=a(ee,1),U=V[0];G.update(U)}),G}return h(D,[{key:"addHandler",value:function(F,G){this.handlers[F]=G}},{key:"attach",value:function(F){var G=this,Y=[].find.call(F.classList,function(ee){return ee.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),F.tagName==="BUTTON"&&F.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){R.warn("ignoring attaching to disabled format",Y,F);return}if(v.default.query(Y)==null){R.warn("ignoring attaching to nonexistent format",Y,F);return}}var H=F.tagName==="SELECT"?"change":"click";F.addEventListener(H,function(ee){var V=void 0;if(F.tagName==="SELECT"){if(F.selectedIndex<0)return;var U=F.options[F.selectedIndex];U.hasAttribute("selected")?V=!1:V=U.value||!1}else F.classList.contains("ql-active")?V=!1:V=F.value||!F.hasAttribute("value"),ee.preventDefault();G.quill.focus();var q=G.quill.selection.getRange(),z=a(q,1),X=z[0];if(G.handlers[Y]!=null)G.handlers[Y].call(G,V);else if(v.default.query(Y).prototype instanceof v.default.Embed){if(V=prompt("Enter "+Y),!V)return;G.quill.updateContents(new p.default().retain(X.index).delete(X.length).insert(w({},Y,V)),f.default.sources.USER)}else G.quill.format(Y,V,f.default.sources.USER);G.update(X)}),this.controls.push([Y,F])}}},{key:"update",value:function(F){var G=F==null?{}:this.quill.getFormat(F);this.controls.forEach(function(Y){var H=a(Y,2),ee=H[0],V=H[1];if(V.tagName==="SELECT"){var U=void 0;if(F==null)U=null;else if(G[ee]==null)U=V.querySelector("option[selected]");else if(!Array.isArray(G[ee])){var q=G[ee];typeof q=="string"&&(q=q.replace(/\"/g,'\\"')),U=V.querySelector('option[value="'+q+'"]')}U==null?(V.value="",V.selectedIndex=-1):U.selected=!0}else if(F==null)V.classList.remove("ql-active");else if(V.hasAttribute("value")){var z=G[ee]===V.getAttribute("value")||G[ee]!=null&&G[ee].toString()===V.getAttribute("value")||G[ee]==null&&!V.getAttribute("value");V.classList.toggle("ql-active",z)}else V.classList.toggle("ql-active",G[ee]!=null)})}}]),D}(_.default);l.DEFAULTS={};function C(N,D,B){var F=document.createElement("button");F.setAttribute("type","button"),F.classList.add("ql-"+D),B!=null&&(F.value=B),N.appendChild(F)}function M(N,D){Array.isArray(D[0])||(D=[D]),D.forEach(function(B){var F=document.createElement("span");F.classList.add("ql-formats"),B.forEach(function(G){if(typeof G=="string")C(F,G);else{var Y=Object.keys(G)[0],H=G[Y];Array.isArray(H)?P(F,Y,H):C(F,Y,H)}}),N.appendChild(F)})}function P(N,D,B){var F=document.createElement("select");F.classList.add("ql-"+D),B.forEach(function(G){var Y=document.createElement("option");G!==!1?Y.setAttribute("value",G):Y.setAttribute("selected","selected"),F.appendChild(Y)}),N.appendChild(F)}l.DEFAULTS={container:null,handlers:{clean:function(){var D=this,B=this.quill.getSelection();if(B!=null)if(B.length==0){var F=this.quill.getFormat();Object.keys(F).forEach(function(G){v.default.query(G,v.default.Scope.INLINE)!=null&&D.quill.format(G,!1)})}else this.quill.removeFormat(B,f.default.sources.USER)},direction:function(D){var B=this.quill.getFormat().align;D==="rtl"&&B==null?this.quill.format("align","right",f.default.sources.USER):!D&&B==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",D,f.default.sources.USER)},indent:function(D){var B=this.quill.getSelection(),F=this.quill.getFormat(B),G=parseInt(F.indent||0);if(D==="+1"||D==="-1"){var Y=D==="+1"?1:-1;F.direction==="rtl"&&(Y*=-1),this.quill.format("indent",G+Y,f.default.sources.USER)}},link:function(D){D===!0&&(D=prompt("Enter link URL:")),this.quill.format("link",D,f.default.sources.USER)},list:function(D){var B=this.quill.getSelection(),F=this.quill.getFormat(B);D==="check"?F.list==="checked"||F.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",D,f.default.sources.USER)}}},n.default=l,n.addControls=M},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(y,_){for(var A=0;A<_.length;A++){var w=_[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,A){return _&&b(y.prototype,_),A&&b(y,A),y}}(),h=function b(y,_,A){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:b(O,_,A)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(A)}},u=s(28),p=T(u);function T(b){return b&&b.__esModule?b:{default:b}}function v(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function m(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function f(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var d=function(b){f(y,b);function y(_,A){v(this,y);var w=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,_));return w.label.innerHTML=A,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(O){O.classList.add("ql-primary")}),w}return a(y,[{key:"buildItem",value:function(A){var w=h(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,A);return w.style.backgroundColor=A.getAttribute("value")||"",w}},{key:"selectItem",value:function(A,w){h(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,A,w);var O=this.label.querySelector(".ql-color-label"),k=A&&A.getAttribute("data-value")||"";O&&(O.tagName==="line"?O.style.stroke=k:O.style.fill=k)}}]),y}(p.default);n.default=d},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(y,_){for(var A=0;A<_.length;A++){var w=_[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,A){return _&&b(y.prototype,_),A&&b(y,A),y}}(),h=function b(y,_,A){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:b(O,_,A)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(A)}},u=s(28),p=T(u);function T(b){return b&&b.__esModule?b:{default:b}}function v(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function m(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function f(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var d=function(b){f(y,b);function y(_,A){v(this,y);var w=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,_));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(O){O.innerHTML=A[O.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return a(y,[{key:"selectItem",value:function(A,w){h(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,A,w),A=A||this.defaultItem,this.label.innerHTML=A.innerHTML}}]),y}(p.default);n.default=d},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function p(T,v){for(var m=0;m<v.length;m++){var f=v[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}return function(T,v,m){return v&&p(T.prototype,v),m&&p(T,m),T}}();function h(p,T){if(!(p instanceof T))throw new TypeError("Cannot call a class as a function")}var u=function(){function p(T,v){var m=this;h(this,p),this.quill=T,this.boundsContainer=v||document.body,this.root=T.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){m.root.style.marginTop=-1*m.quill.root.scrollTop+"px"}),this.hide()}return a(p,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(v){var m=v.left+v.width/2-this.root.offsetWidth/2,f=v.bottom+this.quill.root.scrollTop;this.root.style.left=m+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),y=0;if(b.right>d.right&&(y=d.right-b.right,this.root.style.left=m+y+"px"),b.left<d.left&&(y=d.left-b.left,this.root.style.left=m+y+"px"),b.bottom>d.bottom){var _=b.bottom-b.top,A=v.bottom-v.top+_;this.root.style.top=f-A+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),p}();n.default=u},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function P(N,D){var B=[],F=!0,G=!1,Y=void 0;try{for(var H=N[Symbol.iterator](),ee;!(F=(ee=H.next()).done)&&(B.push(ee.value),!(D&&B.length===D));F=!0);}catch(V){G=!0,Y=V}finally{try{!F&&H.return&&H.return()}finally{if(G)throw Y}}return B}return function(N,D){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return P(N,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function P(N,D,B){N===null&&(N=Function.prototype);var F=Object.getOwnPropertyDescriptor(N,D);if(F===void 0){var G=Object.getPrototypeOf(N);return G===null?void 0:P(G,D,B)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(B)}},u=function(){function P(N,D){for(var B=0;B<D.length;B++){var F=D[B];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(N,F.key,F)}}return function(N,D,B){return D&&P(N.prototype,D),B&&P(N,B),N}}(),p=s(3),T=O(p),v=s(8),m=O(v),f=s(43),d=O(f),b=s(27),y=O(b),_=s(15),A=s(41),w=O(A);function O(P){return P&&P.__esModule?P:{default:P}}function k(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function S(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:P}function R(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}var l=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],C=function(P){R(N,P);function N(D,B){k(this,N),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=l);var F=S(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,D,B));return F.quill.container.classList.add("ql-snow"),F}return u(N,[{key:"extendToolbar",value:function(B){B.container.classList.add("ql-snow"),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),w.default),this.tooltip=new M(this.quill,this.options.bounds),B.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(F,G){B.handlers.link.call(B,!G.format.link)})}}]),N}(d.default);C.DEFAULTS=(0,T.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){if(N){var D=this.quill.getSelection();if(D==null||D.length==0)return;var B=this.quill.getText(D);/^\S+@\S+\.\S+$/.test(B)&&B.indexOf("mailto:")!==0&&(B="mailto:"+B);var F=this.quill.theme.tooltip;F.edit("link",B)}else this.quill.format("link",!1)}}}}});var M=function(P){R(N,P);function N(D,B){k(this,N);var F=S(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,D,B));return F.preview=F.root.querySelector("a.ql-preview"),F}return u(N,[{key:"listen",value:function(){var B=this;h(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(F){B.root.classList.contains("ql-editing")?B.save():B.edit("link",B.preview.textContent),F.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(F){if(B.linkRange!=null){var G=B.linkRange;B.restoreFocus(),B.quill.formatText(G,"link",!1,m.default.sources.USER),delete B.linkRange}F.preventDefault(),B.hide()}),this.quill.on(m.default.events.SELECTION_CHANGE,function(F,G,Y){if(F!=null){if(F.length===0&&Y===m.default.sources.USER){var H=B.quill.scroll.descendant(y.default,F.index),ee=a(H,2),V=ee[0],U=ee[1];if(V!=null){B.linkRange=new _.Range(F.index-U,V.length());var q=y.default.formats(V.domNode);B.preview.textContent=q,B.preview.setAttribute("href",q),B.show(),B.position(B.quill.getBounds(B.linkRange));return}}else delete B.linkRange;B.hide()}})}},{key:"show",value:function(){h(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),N}(f.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=C},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(29),h=ge(a),u=s(36),p=s(38),T=s(64),v=s(65),m=ge(v),f=s(66),d=ge(f),b=s(67),y=ge(b),_=s(37),A=s(26),w=s(39),O=s(40),k=s(56),S=ge(k),R=s(68),l=ge(R),C=s(27),M=ge(C),P=s(69),N=ge(P),D=s(70),B=ge(D),F=s(71),G=ge(F),Y=s(72),H=ge(Y),ee=s(73),V=ge(ee),U=s(13),q=ge(U),z=s(74),X=ge(z),re=s(75),J=ge(re),W=s(57),te=ge(W),se=s(41),oe=ge(se),fe=s(28),Ee=ge(fe),Pe=s(59),Le=ge(Pe),Ue=s(60),ot=ge(Ue),Tt=s(61),lt=ge(Tt),he=s(108),me=ge(he),Te=s(62),Oe=ge(Te);function ge(Be){return Be&&Be.__esModule?Be:{default:Be}}h.default.register({"attributors/attribute/direction":p.DirectionAttribute,"attributors/class/align":u.AlignClass,"attributors/class/background":_.BackgroundClass,"attributors/class/color":A.ColorClass,"attributors/class/direction":p.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":O.SizeClass,"attributors/style/align":u.AlignStyle,"attributors/style/background":_.BackgroundStyle,"attributors/style/color":A.ColorStyle,"attributors/style/direction":p.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":O.SizeStyle},!0),h.default.register({"formats/align":u.AlignClass,"formats/direction":p.DirectionClass,"formats/indent":T.IndentClass,"formats/background":_.BackgroundStyle,"formats/color":A.ColorStyle,"formats/font":w.FontClass,"formats/size":O.SizeClass,"formats/blockquote":m.default,"formats/code-block":q.default,"formats/header":d.default,"formats/list":y.default,"formats/bold":S.default,"formats/code":U.Code,"formats/italic":l.default,"formats/link":M.default,"formats/script":N.default,"formats/strike":B.default,"formats/underline":G.default,"formats/image":H.default,"formats/video":V.default,"formats/list/item":b.ListItem,"modules/formula":X.default,"modules/syntax":J.default,"modules/toolbar":te.default,"themes/bubble":me.default,"themes/snow":Oe.default,"ui/icons":oe.default,"ui/picker":Ee.default,"ui/icon-picker":ot.default,"ui/color-picker":Le.default,"ui/tooltip":lt.default},!0),n.default=h.default},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var a=function(){function y(_,A){for(var w=0;w<A.length;w++){var O=A[w];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(_,O.key,O)}}return function(_,A,w){return A&&y(_.prototype,A),w&&y(_,w),_}}(),h=function y(_,A,w){_===null&&(_=Function.prototype);var O=Object.getOwnPropertyDescriptor(_,A);if(O===void 0){var k=Object.getPrototypeOf(_);return k===null?void 0:y(k,A,w)}else{if("value"in O)return O.value;var S=O.get;return S===void 0?void 0:S.call(w)}},u=s(0),p=T(u);function T(y){return y&&y.__esModule?y:{default:y}}function v(y,_){if(!(y instanceof _))throw new TypeError("Cannot call a class as a function")}function m(y,_){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:y}function f(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);y.prototype=Object.create(_&&_.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(y,_):y.__proto__=_)}var d=function(y){f(_,y);function _(){return v(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return a(_,[{key:"add",value:function(w,O){if(O==="+1"||O==="-1"){var k=this.value(w)||0;O=O==="+1"?k+1:k-1}return O===0?(this.remove(w),!0):h(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,w,O)}},{key:"canAdd",value:function(w,O){return h(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,w,O)||h(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,w,parseInt(O))}},{key:"value",value:function(w){return parseInt(h(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,w))||void 0}}]),_}(p.default.Attributor.Class),b=new d("indent","ql-indent",{scope:p.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=b},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(4),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function T(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function v(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var m=function(f){v(d,f);function d(){return p(this,d),T(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(h.default);m.blotName="blockquote",m.tagName="blockquote",n.default=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function d(b,y){for(var _=0;_<y.length;_++){var A=y[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(b,A.key,A)}}return function(b,y,_){return y&&d(b.prototype,y),_&&d(b,_),b}}(),h=s(4),u=p(h);function p(d){return d&&d.__esModule?d:{default:d}}function T(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function v(d,b){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:d}function m(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}var f=function(d){m(b,d);function b(){return T(this,b),v(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),b}(u.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var a=function(){function k(S,R){for(var l=0;l<R.length;l++){var C=R[l];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,R,l){return R&&k(S.prototype,R),l&&k(S,l),S}}(),h=function k(S,R,l){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,R);if(C===void 0){var M=Object.getPrototypeOf(S);return M===null?void 0:k(M,R,l)}else{if("value"in C)return C.value;var P=C.get;return P===void 0?void 0:P.call(l)}},u=s(0),p=d(u),T=s(4),v=d(T),m=s(25),f=d(m);function d(k){return k&&k.__esModule?k:{default:k}}function b(k,S,R){return S in k?Object.defineProperty(k,S,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[S]=R,k}function y(k,S){if(!(k instanceof S))throw new TypeError("Cannot call a class as a function")}function _(k,S){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:k}function A(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(k,S):k.__proto__=S)}var w=function(k){A(S,k);function S(){return y(this,S),_(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"format",value:function(l,C){l===O.blotName&&!C?this.replaceWith(p.default.create(this.statics.scope)):h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,l,C)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(l,C){return this.parent.isolate(this.offset(this.parent),this.length()),l===this.parent.statics.blotName?(this.parent.replaceWith(l,C),this):(this.parent.unwrap(),h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,l,C))}}],[{key:"formats",value:function(l){return l.tagName===this.tagName?void 0:h(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,l)}}]),S}(v.default);w.blotName="list-item",w.tagName="LI";var O=function(k){A(S,k),a(S,null,[{key:"create",value:function(l){var C=l==="ordered"?"OL":"UL",M=h(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,C);return(l==="checked"||l==="unchecked")&&M.setAttribute("data-checked",l==="checked"),M}},{key:"formats",value:function(l){if(l.tagName==="OL")return"ordered";if(l.tagName==="UL")return l.hasAttribute("data-checked")?l.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(R){y(this,S);var l=_(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,R)),C=function(P){if(P.target.parentNode===R){var N=l.statics.formats(R),D=p.default.find(P.target);N==="checked"?D.format("list","unchecked"):N==="unchecked"&&D.format("list","checked")}};return R.addEventListener("touchstart",C),R.addEventListener("mousedown",C),l}return a(S,[{key:"format",value:function(l,C){this.children.length>0&&this.children.tail.format(l,C)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(l,C){if(l instanceof w)h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,l,C);else{var M=C==null?this.length():C.offset(this),P=this.split(M);P.parent.insertBefore(l,P)}}},{key:"optimize",value:function(l){h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,l);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&C.domNode.tagName===this.domNode.tagName&&C.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(C.moveChildren(this),C.remove())}},{key:"replace",value:function(l){if(l.statics.blotName!==this.statics.blotName){var C=p.default.create(this.statics.defaultChild);l.moveChildren(C),this.appendChild(C)}h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,l)}}]),S}(f.default);O.blotName="list",O.scope=p.default.Scope.BLOCK_BLOT,O.tagName=["OL","UL"],O.defaultChild="list-item",O.allowedChildren=[w],n.ListItem=w,n.default=O},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(56),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function T(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function v(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var m=function(f){v(d,f);function d(){return p(this,d),T(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(h.default);m.blotName="italic",m.tagName=["EM","I"],n.default=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function b(y,_){for(var A=0;A<_.length;A++){var w=_[A];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}return function(y,_,A){return _&&b(y.prototype,_),A&&b(y,A),y}}(),h=function b(y,_,A){y===null&&(y=Function.prototype);var w=Object.getOwnPropertyDescriptor(y,_);if(w===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:b(O,_,A)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(A)}},u=s(6),p=T(u);function T(b){return b&&b.__esModule?b:{default:b}}function v(b,y){if(!(b instanceof y))throw new TypeError("Cannot call a class as a function")}function m(b,y){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:b}function f(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);b.prototype=Object.create(y&&y.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(b,y):b.__proto__=y)}var d=function(b){f(y,b);function y(){return v(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"create",value:function(A){return A==="super"?document.createElement("sup"):A==="sub"?document.createElement("sub"):h(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,A)}},{key:"formats",value:function(A){if(A.tagName==="SUB")return"sub";if(A.tagName==="SUP")return"super"}}]),y}(p.default);d.blotName="script",d.tagName=["SUB","SUP"],n.default=d},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(6),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function T(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function v(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var m=function(f){v(d,f);function d(){return p(this,d),T(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(h.default);m.blotName="strike",m.tagName="S",n.default=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=s(6),h=u(a);function u(f){return f&&f.__esModule?f:{default:f}}function p(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function T(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function v(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var m=function(f){v(d,f);function d(){return p(this,d),T(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(h.default);m.blotName="underline",m.tagName="U",n.default=m},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function _(A,w){for(var O=0;O<w.length;O++){var k=w[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,w,O){return w&&_(A.prototype,w),O&&_(A,O),A}}(),h=function _(A,w,O){A===null&&(A=Function.prototype);var k=Object.getOwnPropertyDescriptor(A,w);if(k===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:_(S,w,O)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(O)}},u=s(0),p=v(u),T=s(27);function v(_){return _&&_.__esModule?_:{default:_}}function m(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function f(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function d(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var b=["alt","height","width"],y=function(_){d(A,_);function A(){return m(this,A),f(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"format",value:function(O,k){b.indexOf(O)>-1?k?this.domNode.setAttribute(O,k):this.domNode.removeAttribute(O):h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,O,k)}}],[{key:"create",value:function(O){var k=h(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,O);return typeof O=="string"&&k.setAttribute("src",this.sanitize(O)),k}},{key:"formats",value:function(O){return b.reduce(function(k,S){return O.hasAttribute(S)&&(k[S]=O.getAttribute(S)),k},{})}},{key:"match",value:function(O){return/\.(jpe?g|gif|png)$/.test(O)||/^data:image\/.+;base64/.test(O)}},{key:"sanitize",value:function(O){return(0,T.sanitize)(O,["http","https","data"])?O:"//:0"}},{key:"value",value:function(O){return O.getAttribute("src")}}]),A}(p.default.Embed);y.blotName="image",y.tagName="IMG",n.default=y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function _(A,w){for(var O=0;O<w.length;O++){var k=w[O];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,w,O){return w&&_(A.prototype,w),O&&_(A,O),A}}(),h=function _(A,w,O){A===null&&(A=Function.prototype);var k=Object.getOwnPropertyDescriptor(A,w);if(k===void 0){var S=Object.getPrototypeOf(A);return S===null?void 0:_(S,w,O)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(O)}},u=s(4),p=s(27),T=v(p);function v(_){return _&&_.__esModule?_:{default:_}}function m(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function f(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:_}function d(_,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);_.prototype=Object.create(A&&A.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(_,A):_.__proto__=A)}var b=["height","width"],y=function(_){d(A,_);function A(){return m(this,A),f(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"format",value:function(O,k){b.indexOf(O)>-1?k?this.domNode.setAttribute(O,k):this.domNode.removeAttribute(O):h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,O,k)}}],[{key:"create",value:function(O){var k=h(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,O);return k.setAttribute("frameborder","0"),k.setAttribute("allowfullscreen",!0),k.setAttribute("src",this.sanitize(O)),k}},{key:"formats",value:function(O){return b.reduce(function(k,S){return O.hasAttribute(S)&&(k[S]=O.getAttribute(S)),k},{})}},{key:"sanitize",value:function(O){return T.default.sanitize(O)}},{key:"value",value:function(O){return O.getAttribute("src")}}]),A}(u.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",n.default=y},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var a=function(){function O(k,S){for(var R=0;R<S.length;R++){var l=S[R];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(k,l.key,l)}}return function(k,S,R){return S&&O(k.prototype,S),R&&O(k,R),k}}(),h=function O(k,S,R){k===null&&(k=Function.prototype);var l=Object.getOwnPropertyDescriptor(k,S);if(l===void 0){var C=Object.getPrototypeOf(k);return C===null?void 0:O(C,S,R)}else{if("value"in l)return l.value;var M=l.get;return M===void 0?void 0:M.call(R)}},u=s(35),p=d(u),T=s(5),v=d(T),m=s(9),f=d(m);function d(O){return O&&O.__esModule?O:{default:O}}function b(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function y(O,k){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:O}function _(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(O,k):O.__proto__=k)}var A=function(O){_(k,O);function k(){return b(this,k),y(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return a(k,null,[{key:"create",value:function(R){var l=h(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,R);return typeof R=="string"&&(window.katex.render(R,l,{throwOnError:!1,errorColor:"#f00"}),l.setAttribute("data-value",R)),l}},{key:"value",value:function(R){return R.getAttribute("data-value")}}]),k}(p.default);A.blotName="formula",A.className="ql-formula",A.tagName="SPAN";var w=function(O){_(k,O),a(k,null,[{key:"register",value:function(){v.default.register(A,!0)}}]);function k(){b(this,k);var S=y(this,(k.__proto__||Object.getPrototypeOf(k)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return k}(f.default);n.FormulaBlot=A,n.default=w},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var a=function(){function R(l,C){for(var M=0;M<C.length;M++){var P=C[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(l,P.key,P)}}return function(l,C,M){return C&&R(l.prototype,C),M&&R(l,M),l}}(),h=function R(l,C,M){l===null&&(l=Function.prototype);var P=Object.getOwnPropertyDescriptor(l,C);if(P===void 0){var N=Object.getPrototypeOf(l);return N===null?void 0:R(N,C,M)}else{if("value"in P)return P.value;var D=P.get;return D===void 0?void 0:D.call(M)}},u=s(0),p=y(u),T=s(5),v=y(T),m=s(9),f=y(m),d=s(13),b=y(d);function y(R){return R&&R.__esModule?R:{default:R}}function _(R,l){if(!(R instanceof l))throw new TypeError("Cannot call a class as a function")}function A(R,l){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:R}function w(R,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);R.prototype=Object.create(l&&l.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(R,l):R.__proto__=l)}var O=function(R){w(l,R);function l(){return _(this,l),A(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return a(l,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),h(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var P=this.domNode.textContent;this.cachedText!==P&&((P.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=M(P),this.domNode.normalize(),this.attach()),this.cachedText=P)}}]),l}(b.default);O.className="ql-syntax";var k=new p.default.Attributor.Class("token","hljs",{scope:p.default.Scope.INLINE}),S=function(R){w(l,R),a(l,null,[{key:"register",value:function(){v.default.register(k,!0),v.default.register(O,!0)}}]);function l(C,M){_(this,l);var P=A(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,C,M));if(typeof P.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var N=null;return P.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(N),N=setTimeout(function(){P.highlight(),N=null},P.options.interval)}),P.highlight(),P}return a(l,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(v.default.sources.USER);var P=this.quill.getSelection();this.quill.scroll.descendants(O).forEach(function(N){N.highlight(M.options.highlight)}),this.quill.update(v.default.sources.SILENT),P!=null&&this.quill.setSelection(P,v.default.sources.SILENT)}}}]),l}(f.default);S.DEFAULTS={highlight:function(){return window.hljs==null?null:function(R){var l=window.hljs.highlightAuto(R);return l.value}}(),interval:1e3},n.CodeBlock=O,n.CodeToken=k,n.default=S},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(o,n){o.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(o,n){o.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(o,n){o.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(o,n){o.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(o,n){o.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(o,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var a=function l(C,M,P){C===null&&(C=Function.prototype);var N=Object.getOwnPropertyDescriptor(C,M);if(N===void 0){var D=Object.getPrototypeOf(C);return D===null?void 0:l(D,M,P)}else{if("value"in N)return N.value;var B=N.get;return B===void 0?void 0:B.call(P)}},h=function(){function l(C,M){for(var P=0;P<M.length;P++){var N=M[P];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(C,N.key,N)}}return function(C,M,P){return M&&l(C.prototype,M),P&&l(C,P),C}}(),u=s(3),p=_(u),T=s(8),v=_(T),m=s(43),f=_(m),d=s(15),b=s(41),y=_(b);function _(l){return l&&l.__esModule?l:{default:l}}function A(l,C){if(!(l instanceof C))throw new TypeError("Cannot call a class as a function")}function w(l,C){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:l}function O(l,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);l.prototype=Object.create(C&&C.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(l,C):l.__proto__=C)}var k=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=function(l){O(C,l);function C(M,P){A(this,C),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=k);var N=w(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,P));return N.quill.container.classList.add("ql-bubble"),N}return h(C,[{key:"extendToolbar",value:function(P){this.tooltip=new R(this.quill,this.options.bounds),this.tooltip.root.appendChild(P.container),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),y.default)}}]),C}(f.default);S.DEFAULTS=(0,p.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){C?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var R=function(l){O(C,l);function C(M,P){A(this,C);var N=w(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,P));return N.quill.on(v.default.events.EDITOR_CHANGE,function(D,B,F,G){if(D===v.default.events.SELECTION_CHANGE)if(B!=null&&B.length>0&&G===v.default.sources.USER){N.show(),N.root.style.left="0px",N.root.style.width="",N.root.style.width=N.root.offsetWidth+"px";var Y=N.quill.getLines(B.index,B.length);if(Y.length===1)N.position(N.quill.getBounds(B));else{var H=Y[Y.length-1],ee=N.quill.getIndex(H),V=Math.min(H.length()-1,B.index+B.length-ee),U=N.quill.getBounds(new d.Range(ee,V));N.position(U)}}else document.activeElement!==N.textbox&&N.quill.hasFocus()&&N.hide()}),N}return h(C,[{key:"listen",value:function(){var P=this;a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){P.root.classList.remove("ql-editing")}),this.quill.on(v.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!P.root.classList.contains("ql-hidden")){var N=P.quill.getSelection();N!=null&&P.position(P.quill.getBounds(N))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(P){var N=a(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"position",this).call(this,P),D=this.root.querySelector(".ql-tooltip-arrow");if(D.style.marginLeft="",N===0)return N;D.style.marginLeft=-1*N-D.offsetWidth/2+"px"}}]),C}(m.BaseTooltip);R.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=R,n.default=S},function(o,n,s){o.exports=s(63)}]).default})}(Dn)),Dn.exports}var qs=Rs();const Dt=Rr(qs),ro=Dt.import("formats/image"),Bs=Dt.import("formats/link");function js(t={}){class e extends ro{static create(n){var u;let s=n,a;if(s.substring(0,4)!=="data"){let p=null;try{p=new URL(s)}catch(v){console.warn(v)}let T=!1;if(p&&t.external_gifs)try{const v=yi.fromUrlAndAllowlists(p,(u=t.embed_allowlist)==null?void 0:u.image,!1);if(v==null)throw`Unsupported image host: ${p.hostname}`;s=v.validateAndClean(p),T=!0}catch(v){console.warn(v)}if(p&&!T&&t.image_upload_paths){const v=p.toString().toLowerCase().split("//")[1];for(const m of t.image_upload_paths)if(v.startsWith(m)){T=!0;break}}if(!T)return a=Bs.create(s),a.setAttribute("href",s),a.innerHTML=s,a}a=ro.create(s);const h=s.split(";").shift().split(":").pop();return!t.allow_animated_gifs&&h==="image/gif"&&a.setAttribute("data-check-animated","1"),a}}return e}const oo=(t,e,o)=>{const n=t.quill;let s=n.getSelection();s||(s=t.lastRange);const a=s?s.index:null;n.insertEmbed(a,e,o),s&&n.setSelection(s.index+2,0)},Fs=t=>{t.root.addEventListener("drop",async e=>{e.preventDefault(),e.stopPropagation();const o=e.dataTransfer;t.focus();const n=Hs(e.clientX,e.clientY);if(n){const a=Dt.find(n.startContainer,!0).offset(void 0)+n.startOffset;t.setSelection(a,0,Dt.sources.SILENT),await so(t,o,a)}else{const s=t.getLength();await so(t,o,s)}})};async function so(t,e,o){let n=o;if(e.files&&e.files.length>0){for(const s of e.files)if(s.type.startsWith("image/")){const a=await Us(s);t.insertEmbed(n,"image",a,Dt.sources.USER),t.setSelection(n+1,Dt.sources.SILENT),n+=2}}else if(e.types.includes("text/uri-list")){const s=e.getData("text/uri-list");s&&zs(s)&&(t.insertEmbed(n,"image",s,Dt.sources.USER),t.setSelection(n+1,Dt.sources.SILENT))}}function Hs(t,e){if(document.caretRangeFromPoint)return document.caretRangeFromPoint(t,e);if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(t,e);if(o){const n=document.createRange();return n.setStart(o.offsetNode,o.offset),n}}return null}function Us(t){return new Promise((e,o)=>{const n=new FileReader;n.onload=s=>e(s.target.result),n.onerror=s=>o(s),n.readAsDataURL(t)})}function zs(t){return/^https?:\/\/.+\.(jpe?g|png|gif|webp|svg)(\?.*)?$/i.test(t)}const Ws=11;class Vs{constructor(e,o){it(this,mn);it(this,Rn,{});it(this,Li,!1);it(this,ft);it(this,hi,null);const n=this,s=g(e),a=s.attr("id"),h=$s(o);Me(this,mn,h.new_quill_event_name),this.source_type=null,this.source_id=null;const u={clipboard:{matchVisual:!1}},p=new Ds(h.formats);u.toolbar={container:p.container};const T=p.all.length,v=document.createElement("canvas"),m=v.getContext("2d"),f=Dt.import("formats/video"),d=Dt.import("blots/block/embed");class b extends f{static create($e){let ct,et,Ye;if(typeof $e=="string"){ct=$e;const $t=ct.split("#ngq:").pop().split(":");et=$t[0],Ye=$t[1]}else et=$e.width,Ye=$e.height,ct=`${$e.src}#ngq:${et}:${Ye}`;const At=f.create(ct);return At.setAttribute("width",et),At.setAttribute("height",Ye),At.setAttribute("data-smart-scale",`${et},${Ye}`),At}}b.blotName="video",b.tagName="iframe",Dt.register(b);class y extends d{}y.blotName="divider",y.tagName="hr",Dt.register(y);const _=js(h);Dt.register(_,!0);const A=new Dt(s[0],{bounds:s[0],placeholder:h.placeholder,theme:"snow",formats:h.formats,modules:u});Fs(A),Me(this,ft,A);const w=g(`#${a}-embed-templates`),O=g("<div>");O.html(w.html()),w.html("");const k=new ye;k.ignore_active_tasks=!0;const S=g(`#${a}-insert-link`,O);S.removeAttr("id"),S.remove(),k.setBody(S),k.hide(),k.onHide(()=>{J()}),S.show();const R=g('input[name="url"]:first',S),l=g('input[name="text"]:first',S),C=g('input[name="mode"]:first',S),M=g('h4[for="text"]:first',S);S.on("submit",be=>{be.preventDefault();const $e=C.val();let ct=R.val().trim();ct||(ct=null);const et=()=>{l.val(""),R.val(""),k.hide(),H.focus()};if($e==="embed"){ve(this,ft).format("link",ct,"api"),et();return}let Ye=ve(this,ft).getSelection();Ye||(Ye=ve(this,hi)),Ye.length>0&&ve(this,ft).deleteText(Ye.index,Ye.length),Ye.length=0;const At=ve(this,ft).insertText(Ye.index,l.val(),"link",ct,"api");for(const $t in At.ops)At.ops[$t].insert&&(Ye.index+=At.ops[$t].insert.length);ve(this,ft).setSelection(Ye.index,0),et()});const P=new ye;P.ignore_active_tasks=!0;const N=g(`#${a}-embed-code`,O);N.removeAttr("id"),N.remove(),P.setBody(N),P.hide(),P.onHide(()=>{J()}),N.show();const D=g("textarea",N);N.submit(be=>{if(be.preventDefault(),D.val().length<1){P.hide();return}const $e=g("iframe",g("<div>").html(D.val())).first();if($e.length!==1||!$e[0].tagName||$e[0].tagName!=="IFRAME"||!$e.attr("src")){alert("Invalid embed code.");return}let ct=$e.attr("src"),et=$e.attr("width"),Ye=$e.attr("height");(!et||!Ye)&&(et=640,Ye=360);try{let At;try{if(ct.startsWith("//")&&(ct=`https:${ct}`),At=new URL(ct),!At.hostname)throw"You must enter a valid URL, with host and whatnot!"}catch(Kt){return console.error(Kt),alert(Kt.message?"You haven't entered a valid URL for this embed.":Kt)}const $t=yi.fromUrlAndAllowlists(At,h.embed_allowlist.embed);if($t===null)throw`Sorry, we don't support embeds from ${At.hostname}.`;const di=$t.validateAndClean(At);return oo(this,"video",{src:di,width:et,height:Ye}),D.val(""),P.hide(),!1}catch(At){return alert(`${At}

Please contact support@newgrounds.com and send the exact embed code you're using if you think you're seeing this in error.`)}});const B=ve(this,ft).getModule("toolbar");B.addHandler("divider",()=>{oo(this,"divider","null")}),B.addHandler("video",()=>{re(),P.show(),setTimeout(()=>{D.focus()},5)}),B.addHandler("link",()=>{re(),k.show();let be=ve(this,ft).getSelection();be||(be=ve(this,hi)),be&&be.length>0&&(ve(this,ft).getText(be.index,be.length).length!==be.length?(M.hide(),l.hide(),l.val("<embed>"),C.val("embed")):(M.show(),l.show(),l.val(ve(this,ft).getText(be.index,be.length)),C.val("text"))),setTimeout(()=>{R.trigger("focus")},5)}),ve(this,ft).ng_wrapper=n,Me(this,hi,{index:0,length:0});let F,G,Y;const H=g(".ql-editor",s).first();this.$quill_body=H,h.tabindex!==!1&&H.attr("tabindex",h.tabindex);const ee=s.siblings(".ql-toolbar").first();g("button",ee).attr("tabindex","-1"),g("a",ee).attr("tabindex","-1"),g("input",ee).attr("tabindex","-1"),g("select",ee).attr("tabindex","-1"),g('[role="button"]',ee).attr("tabindex","-1");const V=g(`#${a}-chars-text`),U=g(`#${a}-chars-percent`);T>Ws&&ee.addClass("ql-wrap-buttons");let q=0,z=0,X=!1;function re(){z&&clearTimeout(z),X=!0}function J(be){z&&clearTimeout(z),X=!1,be!==!1&&H.focus()}g("button, span.ql-picker",ee).on("touchstart mousedown",be=>{z&&clearTimeout(z),!(g(be.currentTarget).hasClass("ql-link")||g(be.currentTarget).hasClass("ql-video"))&&(re(),z=setTimeout(()=>{J(!1)},500))});let W=!1;H.on("blur",()=>{Me(this,hi,ve(this,ft).getSelection()),ut&&(Le&&pt.call(Zi),q&&clearTimeout(q),W&&(q=setTimeout(()=>{!X&&!W&&Le&&(ut.call(Ht),Le=!1)},200)),W=!1)}),H.focus(()=>{ut&&(W=!0)}),this.disable=()=>{ve(this,ft).disable(),ht.disable(),ee.css("pointer-events","none")},this.enable=()=>{ve(this,ft).enable(),ht.enable(),ee.css("pointer-events","")},this.onCleared=()=>{},this.onChange=()=>{};function te(){return g('iframe[class~="ql-video"]',H).length}function se(){return g("img",H).length}let oe=!1;function fe(){if(oe){if(h.max_embeds){const be=g(".ql-video",ee);te()>=h.max_embeds?be.addClass("disabled"):be.removeClass("disabled")}if(h.max_images){const be=g(".ql-image",ee);se()>=h.max_images?be.addClass("disabled"):be.removeClass("disabled")}oe=!1}}const Ee=()=>{Y=ve(this,ft).getLength()-1,Y+=g("ul",H).length*2,Y+=g("ol",H).length*2,h.count_urls&&(Y+=g("img",H).length*(h.count_urls===!0?50:h.count_urls),g("iframe",H).each(function(){Y+=h.count_urls===!0?g(this).attr("src").length:h.count_urls}),g("a",H).each(function(){Y+=h.count_urls===!0?g(this).attr("href").length:h.count_urls})),F=Y/h.max_text,G=F*100,V.html((h.max_text-Y).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),G>100?U.removeClass("warn").addClass("error"):G>=75?U.addClass("warn").removeClass("error"):U.removeClass("warn").removeClass("error"),U.css("width",`${G<100?G:100}%`)},Pe=be=>{Me(this,Li,!1),ve(this,ft).setContents(be),setTimeout(()=>{Me(this,Li,!0)},100),Ee()};let Le=!1;ve(this,ft).on("text-change",(be,$e,ct)=>{var $t,di,Kt;if(!ve(this,Li))return;let et,Ye=!1,At=!1;for(et in be.ops)($t=be.ops[et].insert)!=null&&$t.video?(At=!0,oe=!0):(di=be.ops[et].insert)!=null&&di.image?(Ye=!0,oe=!0):be.ops[et].delete&&(oe=!0);if((h.max_embeds||h.formats.indexOf("video")<0)&&At){if(te()>h.max_embeds)return alert(`Sorry, you can't embed more than ${h.max_embeds} ${h.max_embeds===1?"video":"videos"}`),Pe($e);g("iframe[data-smart-scale]",H).each(function(){Qe.smartscale(g(this))})}if(!h.allow_animated_gifs||h.max_images){for(et in be.ops)if((Kt=be.ops[et].insert)!=null&&Kt.image){Ye=!0;break}if(Ye){if(h.max_images&&se()>h.max_images)return alert(`Sorry, you can't post more than ${h.max_images} ${h.max_images===1?"image":"images"}`),Pe($e);if(!h.allow_animated_gifs){const It=g("img[data-check-animated]:last",H);It.removeAttr("data-check-animated"),It.length>0&&(n.disable(),It[0].onload=()=>{n.enable(),v.width=It[0].naturalWidth,v.height=It[0].naturalHeight,m.drawImage(It[0],0,0,v.width,v.height),It.attr("src",v.toDataURL()),m.clearRect(0,0,v.width,v.height)})}}}if(h.max_lines&&ve(this,ft).getLines().length>h.max_lines){if(Pe($e),ve(this,ft).getLines().length>h.max_lines){const It=ve(this,ft).getLines();for(;It.length>h.max_lines;){const tt=It.pop();g(tt.domNode).remove()}H.blur()}return}n.tryRecord(),Le=!0,n.onChange.call(n)});let Ue=0;this.getHtml=()=>H.html(),this.tryRecord=function(){if(!(!h.record||Ue))return n.doRecord(),Ue=setTimeout(()=>{Ue=0,n.doRecord()},2e3),this},this.doRecord=()=>{const be=Math.floor(Date.now()/1e3),$e={key:h.record,body:H.html(),expire:be+30};window.localStorage.setItem("ngquill-snapshot",JSON.stringify($e))},this.setContents=be=>(ve(this,ft).setContents(ve(this,ft).clipboard.convert(be)),this);let ot=!1;if(h.record){let be=window.localStorage.getItem("ngquill-snapshot");try{be&&(be=JSON.parse(be))}catch{console.warn("invalid JSON value")}if(be&&Object.hasOwn(be,"key")&&Object.hasOwn(be,"body")&&Object.hasOwn(be,"expire")){const $e=Math.floor(Date.now()/1e3);be.key!==h.record||be.expire<$e?window.localStorage.removeItem("ngquill-snapshot"):(h.body=be.body,ot=!0)}}if(h.body){const be=g("<div>").html(h.body);ve(this,ft).setContents(ve(this,ft).clipboard.convert(be.html())),oe=!0,setTimeout(()=>{fe(),ot&&(Le=!1,this.onChange.call(this))},300)}let Tt;g(document).ready(()=>{Me(this,Li,!0),h.body&&g("iframe",H).each(function(){const be=g(this).attr("width"),$e=g(this).attr("height");be&&$e&&(g(this).attr("data-smart-scale",`${be},${$e}`),Qe.smartscale(g(this)))}),Ee(),fe(),Tt=setInterval(()=>{Ee(),fe()},500),ve(this,Rn).update=Tt,ke.dispatch(ve(this,mn),n)});function lt(){return new Promise((be,$e)=>{lt.busy&&$e("Can't call uploadImages() until previous execution is complete."),lt.busy=!0,lt.progress=0;const ct=3;let et=[],Ye=0;n.disable(),g("img",H).each(function(){et.push(g(this))}),et.length>0&&Te.call(Oe,et.length);function At(){et=[],Ye=0,lt.busy=!1,n.enable()}function $t(tt){At(),$e(tt)}function di(){const tt=et.shift();let Rt=[];if(tt.attr("src").substring(0,4)!=="data"){(!tt.attr("width")||!tt.attr("height"))&&(tt.attr("width",tt[0].naturalWidth),tt.attr("height",tt[0].naturalHeight)),It();return}let xi=tt.attr("src").split(";").shift().split(":").pop(),Xt=xi.split("/").pop().toLowerCase();Xt==="jpeg"&&(Xt="jpg"),Ye++;let mt=tt[0].naturalWidth,Ct=tt[0].naturalHeight;const Ri=Math.round((tt.attr("src").length-22)*(3/4));let gn=!1;Xt==="gif"?gn=!h.allow_animated_gifs||Ri>h.max_gif_size:gn=mt>h.max_image_width||Ri>h.max_image_size,gn&&(mt>h.max_image_width?(v.width=h.max_image_width,v.height=Math.round(tt[0].naturalHeight*(h.max_image_width/mt))):(v.width=mt,v.height=Ct),m.drawImage(tt[0],0,0,v.width,v.height),Ri>1e5&&(xi="image/webp"),tt.attr("src",v.toDataURL(xi,.9)),mt=v.width,Ct=v.height,m.clearRect(0,0,v.width,v.height)),Rt=tt.attr("src").split(","),tt.attr("width",mt),tt.attr("height",Ct);const qn=Rt[0].substring(Rt[0].indexOf(":")+1,Rt[0].indexOf(";")),Bn=Rt.pop(),Ti=Qn(Bn,qn),qt=new FormData;qt.append("image",Ti),qt.append("width",mt),qt.append("height",Ct),qt.append("ext",Xt),qt.append("userkey",PHP.get("uek")),qt.append("csrf_token",h.csrf_token?h.csrf_token:""),n.source_id&&n.source_type&&(qt.append("source_type",n.source_type),qt.append("source_id",n.source_id)),g.ajax({url:"/image-upload",type:"POST",data:qt,contentType:!1,cache:!1,processData:!1,dataType:"json",error:Ei=>{tt.remove();let pi=Ei;pi.responseText&&(pi=pi.responseText),alert(`There was an error uploading one of your images:

${pi}`),$t(Ei)},success:Ei=>{tt.attr("src",Ei.img_src),Ye--,It()}}),setTimeout(It,50)}function Kt(){if(h.strip_whitespace){const tt=[];let Rt=!0;const xi=H.children();let Xt=null;xi.each(function(){if(Xt=null,["HR","UL","OL","IFRAME","IMG"].indexOf(g(this).prop("tagName"))>=0){Rt=!1;return}let mt=g(this).html();g(this).prop("tagName")!=="PRE"&&(mt=mt.trim(),Xt=g(this)),!mt||mt==="<br>"?(Rt&&tt.push(g(this)),Rt=!0):g(this).prop("tagName")!=="PRE"&&(g(this).html(mt),Rt=!1)}),Xt&&Xt.html().trim()==="<br>"&&tt.push(Xt);for(const mt in tt)tt[mt].remove();Ee()}if(!((Y===0||H.children().length<1)&&n.onSavedEmpty.call(this)===!1)){if(Y<h.min_text){alert("You haven't written enough content yet!"),At();return}be(H.html()),At()}}function It(){et.length>0&&Ye<ct?di():et.length<1&&Ye<1&&Kt()}It()})}lt.busy=!1,lt.progress=0;let he=()=>{},me=this,Te=()=>{},Oe=this,ge=()=>{},Be=this,Re=be=>{console.error(be)},Ae=this,ut=null,Ht=this,pt=null,Zi=this;this.preprocess=function(be,$e){return typeof $e<"u"&&(Be=$e),ge=be,this},this.beforeUploadingImages=function(be,$e){return typeof $e<"u"&&(Oe=$e),Te=be,this},this.success=function(be,$e){return typeof $e<"u"&&(me=$e),he=be,this},this.fail=function(be,$e){return typeof $e<"u"&&(Ae=$e),Re=be,this},this.registerDraft=function(be){return this},this.autoSave=function(be,$e){return typeof $e<"u"&&(Ht=$e),ut=be,this},this.preAutoSave=function(be,$e){return typeof $e<"u"&&(Zi=$e),pt=be,this},this.onSavedEmpty=()=>{},this.validate=()=>!0,this.process=function(){let be;Ee(),!(ge.call(Be)===!1||Y===0&&n.onSavedEmpty.call(this)===!1||this.validate()===!1)&&(Y<h.min_text?(be="You haven't written enough content yet!",Re.call(Ae,be)!==!1&&alert(be)):G>100?(be="Sorry, you are over the character limit!",Re.call(Ae,be)!==!1&&alert(be)):lt().then(ct=>{window.localStorage.removeItem("ngquill-snapshot"),he.call(me,ct)}).catch(ct=>{Re.call(Ae,ct)}))},this.clear=function(){let be=!0;ve(this,ft).getLength()-1>0&&(be=confirm("Are you sure you want to reset your text?")),be&&H.html(""),this.onCleared.call(this)};let ht=g("<button>");this.setSaveButton=be=>{ht=g(be),n.save_button=ht,ht.click($e=>{$e.preventDefault(),n.process()})}}get lastRange(){return ve(this,hi)}set lastRange(e){Me(this,hi,e)}get quill(){return ve(this,ft)}}mn=new WeakMap,Rn=new WeakMap,Li=new WeakMap,ft=new WeakMap,hi=new WeakMap;class Xs{constructor(){it(this,Di,null);it(this,Mi,null);console.log("ActiveScreenPosition constructor"),Me(this,Di,null),Me(this,Mi,null)}getPosition(e){let o=e;return o?(typeof e.originalEvent<"u"&&typeof e.originalEvent.touches<"u"?o=e.originalEvent.touches[0]:typeof e.changedPointers<"u"?o=e.changedPointers[0]:typeof e.pointers<"u"&&(o=e.pointers[0]),Me(this,Di,o.pageX),Me(this,Mi,o.pageY),{x:o.pageX,y:o.pageY}):{x:ve(this,Di),y:ve(this,Mi)}}get lastX(){return ve(this,Di)}get lastY(){return ve(this,Mi)}get upName(){return we.get("ismobile")?"touchend":"mouseup"}get downName(){return we.get("ismobile")?"touchstart":"mousedown"}get moveName(){return we.get("ismobile")||we.get("ismobile")?"touchmove":"mousemove"}get is_mobile(){return!!we.get("ismobile")}}Di=new WeakMap,Mi=new WeakMap,window.Quill=Dt,window.NewWindow=_s,window.Reload=ws,window.IsValidInteger=ks,window.Trim=xs,window.Round=Ts,window.FormatNumber=hr,window.CharactersRemaining=dr,window.CharactersRemainingMinusHTML=Yr,window.CheckCharsRemaining=Kr,window.NgFormValidator=Jr,window.NgXmlDom=eo,window.enableSelectFacades=to,window.addEvent=Cs,window.SearchHelper=Ns;const Ve={...Pt,activeScreenPosition:Xs,alert:Br,alertAsync:Xo,bbspost:rn,bbssig:Qo,blogpost:Fr,confirm:tr,confirmAsync:Ko,blackout:ye,dom:Ft,allowlist:yi,input:Je,activeTasks:ze,event:ke,search:ps,desktop:ns,mobile:Gr,footer:Sn,grids:lr,layer_element:tn,notification_controller:We,click_watcher:Hr,review:rt,votebar:As,color:ti,dropmenu:or,hovertext:Xr,friendship:ar,fave_follow:nt,reactions:He,emote:Vr,flagging_options:Ni,sharebox:$n,artSlideshow:Et,playlist_form:Nn,forms:Ai,image:cs,element:_t,media:Qe,local:Ot,components:Wt,ui:nn,report_akismet_spam:ds,taghelper:ii,supporter:In,uploadEvent:xt,uploader:Wr,uploads:jr,croptool:nr,croppable_image:is,user:fr,moderation:er,visual_links:En};Hr.addHandler("ngutils",Ve),Ve.checkDataAttributes=()=>{g("*[data-exec-script]").click(function(){const t=g(this).attr("data-exec-script");let e=g(this).attr("data-exec-params");try{e&&(e=JSON.parse(e))}catch{return console.error(`Bad JSON in data-exec-params="${e}"`),!1}return Ve.click_watcher.execute(t,e)}),g("a[data-post-on-click]").each(function(){let t=g(this).attr("data-post-on-click");if(t.indexOf("{")!==0)t={};else try{t=JSON.parse(t)}catch{return console.error(`Bad JSON in data-post-on-click="${t}"`),!1}t.XD=!0,g(this).formifyLink(t)})},Ve.onAjaxComplete=()=>{setTimeout(()=>{Ve.media.smartscale.autodetect(),Ve.element.autoCondense(),Ve.media.smartload.autodetect(),Ve.forms.fakeSelect.autodetect(),Ve.forms.selectLinks.autodetect(),Ve.forms.selectAltLabels.autodetect()},3)},Ve.ieHacks=()=>{if(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)){const o=g("#outer-skin"),n=()=>{g(o).height(g(document).height())};Ve.event.addListener(Ve.event.resize,n),n()}},Ve.ajaxOnClick=(t,e,o,n)=>{t.preventDefault();const s=g(e);s.attr("data-confirm")&&!tr(s.attr("data-confirm"))||g.get(s.attr("href"),a=>{o&&Ve.event.dispatch(o,a)}).fail(a=>{n&&Ve.event.dispatch(n,a)})},Ve.initScrollFixColumn=()=>{const t=g(".scrollfix-column").first();if(!t||t.length<1)return;let e=!1;const o=g("<div></div>");o.attr("class",t.attr("class")),o.attr("id","scrollfix-shim"),o.hide(),t.after(o);const n=g(window),s=t.offset().top,a=0,h=t.css("position"),u=s;function p(){e=!0,t.css("position","fixed"),t.css("top",a),o.width(t.outerWidth()),o.height(t.outerHeight()),o.show()}function T(){e=!1,o.hide(),t.css("position",h)}function v(){const f=n.scrollTop()>=u;e&&!f?T():!e&&f&&p()}v(),g(document).scroll(v)},g(document).ajaxComplete(()=>{Ve.onAjaxComplete()}),g(()=>{Ve.media.smartscale.autodetect(),Ve.element.autoCondense(),Ve.initScrollFixColumn(),Ve.ieHacks(),Ve.grids.init(),Ve.media.smartload.autodetect(),Ve.forms.fakeSelect.autodetect(),Ve.forms.selectLinks.autodetect(),Ve.forms.selectAltLabels.autodetect();const t=new gt(!0),e=o=>t.isLocked()?(o.preventDefault(),!1):!0;g("#body-main").on("touchmove",e),g("#notification-bar").on("touchmove",e),we.get("activeuser")&&Ve.notification_controller.init(),Ve.checkDataAttributes()}),g(()=>{setTimeout(()=>{const e=!!we.get("ismobile")?"#body-main":"body";g(window).resize(()=>{Ve.event.dispatch(Ve.event.resize)}),g(e).click(()=>{Ve.event.dispatch(Ve.event.closeall)});let o=g(window).scrollTop(),n=1;const s=g("#notification-bar");s.css("position","absolute").css("top","0px");let a;const h=s.outerHeight();function u(){let T=0;s.css("position")==="fixed"&&(T=h+Number.parseInt(s.css("top").replace("px",""))),Ve.event.dispatch("notification-bar-moved",T)}function p(T,v){const m=g(window).scrollTop();n=0,T===!0||m>200?v?(s.css("position","fixed").css("top","0px"),u()):(s.css("position","fixed").css("top",`-${h}px`),s.animate({top:"0px"},{duration:200,step:u,complete:u})):(s.css("position","absolute").css("top","0px"),u()),clearTimeout(a),a=setTimeout(()=>{n=-1},600)}Ve.event.addListener(Ve.event.newNotifications,()=>{p(!0,!1)}),Ve.event.addListener(Ve.event.topMenuOpen,()=>{p(!0,!0)}),g(window).on("scroll",T=>{if(Ve.notification_controller.open_menu)return;const v=g(window).scrollTop();if(v===o)return;const m=o-v;if(o=v,n===-1&&m<0){if(v<=200){s.css("position","absolute").css("top","0px"),u(),n=1;return}n=0,s.css("position","fixed").css("top","0px"),s.stop(),s.css("background-color",""),s.animate({top:`-${h}px`},{duration:200,step:u,complete:()=>{u(),s.css("position","absolute").css("top","0px")}}),clearTimeout(a),a=setTimeout(()=>{n=1},600)}else n===1&&m>0&&p(!1,!1)})},500)}),window.ngutils=Ve,window.jQuery=g,window.$=g,window.PHP=we,window.Quill=Dt,window.NgQuill=Vs})();
